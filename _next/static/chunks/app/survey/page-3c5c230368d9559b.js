(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6012],{2035:function(e,t,a){Promise.resolve().then(a.bind(a,96011))},29806:function(e,t,a){"use strict";var l,s,n,i;a.d(t,{h:function(){return l}}),(n=l||(l={})).InitiateDubaiSurvey="InitiateDubaiSurvey",n.InitiateEasyImportOnboarding="InitiateEasyImportOnboarding",n.InitiateFromPriorities="InitiateFromPriorities",(i=s||(s={})).login="LOGIN",i.register="REGISTER"},96011:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ap}});var l,s,n,i,r,c,o,d,m,u,p,h,v=a(57437),x=a(2265),j=a(99376),g=a(49567),f=a(73798),b=a.n(f),N=a(82259),y=a(51320);let P=()=>x.useContext(y.Z);var _=a(34422),w=a(77314),S=a(61335),C=a(93995),L=a(5095),k=a(58130);function A(e){let{name:t,options:a=[],btnClassName:l="",btnWrapperClassName:s="",variant:n="default",onChange:i}=e,[r,c,o]=(0,w.U$)(t),d=e=>{o.setTouched(!0),o.setValue(e),i&&i(e)},m=c.touched&&c.error;return(0,v.jsxs)("div",{className:"selectable-buttons ".concat(m?"has-error":""," ").concat(n," ").concat(s),children:[(0,v.jsx)(L.M,{mode:"popLayout",children:a.map((e,t)=>{let{label:a,value:s}=e,n=s===r.value;return(0,v.jsx)(k.E.button,{type:"button",initial:{opacity:0},animate:{opacity:1},transition:{duration:.25,delay:.05*t},className:"selectable-button ".concat(n?"is-active":""," ").concat(l),onClick:()=>d(s),children:a},"".concat(t,"_").concat(s))})}),(0,v.jsx)("div",{className:"formfield-error",children:(0,v.jsx)(L.M,{children:m&&(0,v.jsx)(k.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:c.error})})})]})}a(75222),a(90942),(l=o||(o={})).default="default",l.thin="thin";var T=a(70604);function D(e){let{children:t}=e;return(0,v.jsx)("div",{className:"survey-footer",children:t})}function Z(e){let{children:t,isMapLocationCardExpanded:a}=e;return(0,v.jsx)("div",{className:"survey-content-wrapper mb-3",children:(0,v.jsx)("div",{className:"survey-content ".concat(a?"expanded":""),children:t})})}a(75982),a(56123);var F=a(60977),M=a(18683),I=a(41317),E=a(74470);a(43822),a(36997),(s=d||(d={})).investment="investment",s.propertyPrice="propertyPrice";let O=Array(100).fill(1).map((e,t)=>t+1).filter(e=>e>=20&&e<=80&&e%10==0);function R(e){let{handle:t,value:a}=e;return(0,v.jsx)("div",{...t.props,children:(0,v.jsx)("div",{className:"formfield-rc-slider__handle",children:(0,v.jsx)("div",{className:"slider-custom-handle__text",children:"".concat(a,"%")})})})}let W=e=>{let{name:t,onSelectChange:a}=e,[l]=(0,w.U$)(t),s=l.value||0;return(0,v.jsx)(M.Z,{handleRender:e=>(0,v.jsx)(R,{value:s,handle:e}),min:20,max:80,className:"formfield-rc-slider",onChange:e=>{a&&a(e)},onBlur:l.onBlur,value:s})};var q=e=>{let{name:t,label:a,investment:l,prefix:s,onSelectChange:n,calculationType:i="investment",icon:r="",decimals:c=2,disabled:o=!1}=e,[d,m,u]=(0,w.U$)(t),[p,h]=x.useState(!1),[j,g]=x.useState(0===d.value?60:d.value||20),f=e=>{o||h(e)},b=e=>{u.setValue(e),h(!1),n&&n(e)},N=async()=>{o||(0===d.value&&(await u.setValue(j),n&&n(j)),h(!0))},y=e=>{u.setValue(e),n&&n(e)},P=m.touched&&m.error,_=(e=>{let t=(0,I.Cb)(l,e,i);return(0,E.RE)(t,!0,void 0,void 0,{minimumFractionDigits:c,maximumFractionDigits:c})})(d.value),S=0===d.value;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"mortage-container",children:[a&&(0,v.jsx)("label",{className:"formfield-label",children:a}),(0,v.jsxs)("div",{className:"split-button-container",children:[(0,v.jsx)("button",{className:"split-button-left ".concat(S?"active":""),type:"button",onClick:()=>b(0),disabled:o,children:"Cash Only"}),(0,v.jsx)("button",{className:"split-button-right ".concat(S?"":"active"),onClick:N,disabled:o,type:"button",children:S?"Select Mortgage":(0,v.jsxs)("div",{className:"d-flex justify-content-between w-100",children:[(0,v.jsxs)("span",{children:[s&&s," ",_]}),(0,v.jsx)("div",{className:"d-flex align-items-center gap-2",children:(0,v.jsxs)("span",{children:[null==d?void 0:d.value,"%"]})})]})})]}),p&&(0,v.jsx)("button",{onClick:()=>f(!1),className:"outside-click-alerter"}),(0,v.jsx)(L.M,{children:p&&(0,v.jsxs)(k.E.div,{initial:{opacity:0,visibility:"hidden"},animate:{opacity:1,visibility:"visible"},exit:{opacity:0,visibility:"hidden"},className:"mortgage-option-container",children:[(0,v.jsx)("span",{className:"fw-bold title",children:"Mortgage Percentage"}),(0,v.jsxs)("div",{className:"morgate-slider-wrapper",children:[(0,v.jsx)("div",{className:"mortgage-slider-input",children:(0,v.jsx)(W,{name:t,onSelectChange:y})}),(0,v.jsx)("div",{className:"mortgage-slider-common-values-wrapper",children:(0,v.jsx)("div",{className:"mortgage-slider-common-values",children:O.map((e,t)=>{let a=e===Number(null==d?void 0:d.value);return(0,v.jsx)("div",{className:"common-value-container ".concat(a?"active":""),onClick:o?void 0:()=>y(e),children:(0,v.jsx)("div",{className:"common-value-text",children:null!=e?e:0})},t)})})})]})]})})]}),(0,v.jsx)("div",{className:"formfield-error",children:(0,v.jsx)(L.M,{children:P&&(0,v.jsx)(k.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:m.error})})})]})};a(4770),(n=m||(m={})).investment="investment",n.propertyPrice="propertyPrice";var z=a(67386),B=a(28730);function H(e){let{children:t,variant:a}=e;return(0,v.jsx)("div",{className:"banner banner-".concat(a),children:t})}function Y(e){let{name:t,investment:a,investmentCurrency:l}=e,[s,n]=x.useState(!1),[i]=(0,w.U$)(t),[r,c]=i.value,o=(0,E.RE)(a*(100+r)/100,!1,l,!0,{minimumFractionDigits:0,maximumFractionDigits:0}),d=(0,E.RE)(a*(100+c)/100,!1,l,!0,{minimumFractionDigits:0,maximumFractionDigits:0});return(0,v.jsxs)("div",{role:"button",className:"search-price-range-selector ps-1",children:[(0,v.jsxs)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,children:["Searching properties ",r,"% to ",c,"% of total budget.",(0,v.jsx)("span",{role:"button",className:"range-selector-trigger-btn ps-2",onClick:()=>n(!0),children:(0,v.jsx)("u",{children:"Change range"})})]}),(0,v.jsx)(L.M,{children:s&&(0,v.jsxs)(k.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"range-selector-popup",children:[(0,v.jsxs)("div",{className:"header",children:[(0,v.jsx)("div",{className:"header-title",children:"Budget Range"}),(0,v.jsx)("button",{type:"button",className:"close-btn",onClick:()=>n(!1)})]}),(0,v.jsxs)("div",{className:"range-text",children:[(0,v.jsxs)("div",{className:"text-start",children:[(0,v.jsx)("div",{className:"label",children:"Min."}),(0,v.jsx)("div",{className:"value",children:o})]}),(0,v.jsx)("div",{children:"-"}),(0,v.jsxs)("div",{className:"text-end",children:[(0,v.jsx)("div",{className:"label",children:"Max."}),(0,v.jsx)("div",{className:"value",children:d})]})]}),(0,v.jsx)("div",{className:"range-input",children:(0,v.jsx)(N.U2,{name:t,min:-30,max:30,step:10,marks:{"-30":"-30","-20":"-20","-10":"-10",0:"0",10:"10",20:"20",30:"30"},minimumRange:10,tooltipValueFormatter:e=>"".concat(e,"%")})})]})})]})}function U(e){let{name:t,onOpenChange:a}=e,[l,s,n]=(0,w.U$)(t),[i,r]=x.useState(!1),c=[{id:"yes",value:!1,label:"Yes"},{id:"no-pre-approved",value:!0,label:"No, I am already pre-approved"},{id:"no-sort-myself",value:!1,label:"No, I will sort it out myself"}],o=l.value||{value:!1,id:"no-pre-approved"},d=c.find(e=>e.id===o.id)||c[0],m=e=>{n.setValue({value:e.value,id:e.id}),r(!1),a&&a(!1)};return(0,v.jsxs)("div",{className:"mortgage-help-dropdown",children:[(0,v.jsx)("span",{className:"mortgage-help-dropdown__trigger",onClick:()=>{let e=!i;r(e),a&&a(e)},children:(0,v.jsx)(C.ZP,{variant:C.sT.body,color:C.HL.primary,children:(0,v.jsx)("b",{children:(0,v.jsx)("u",{children:d.label})})})}),(0,v.jsx)(L.M,{children:i&&(0,v.jsxs)(k.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mortgage-help-dropdown__options",children:[(0,v.jsx)("button",{type:"button",className:"mortgage-help-dropdown__options-close",onClick:()=>{r(!1),a&&a(!1)},"aria-label":"Close dropdown"}),c.map(e=>(0,v.jsx)("div",{className:"mortgage-help-dropdown__option ".concat(o.id===e.id?"mortgage-help-dropdown__option--selected":""),onClick:()=>m(e),children:e.label},e.id))]})})]})}a(1881),(i=u||(u={})).warning="warning",i.success="success",i.danger="danger",i.info="info",a(40595),a(49469);var V=a(46650);let Q=e=>{let t=!1;if(e){let{developmentStatus:a}=e;t=1===a.length&&a[0]===T.oz.offPlan}return t},J=e=>{let t=!1;if(e){let{investmentPurpose:a,investmentOptionsOptimizedFor:l}=e;t=a===T.R9.investment&&"Investment Strategies"===l}return t},K=e=>{let t=!1;if(e){let{selectedStrategyInvestmentOption:a}=e;J(e)&&a&&(t=a.includes("Off-Plan"))}return t};var G=a(682);let $=(0,T.Yb)().map(e=>{let{value:t,label:a}=e;return{label:(0,v.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,v.jsx)(F.W,{isoCode:a,hideName:!0}),(0,v.jsx)("div",{children:t})]}),value:t}}),X={budgetPurpose:T.O5[0].value,financeType:T.aH[0].value,investment:25e5,previousInvestment:25e5,"investment-select":"AED",mortgage:0,isMortgagePreapproved:!0,minimumAllowedBudgetForResidency:void 0,selectedBudgetRange:[-20,10]},ee=_.Ry().shape({budgetPurpose:_.Z_().required("Please select one"),financeType:_.Z_().nullable(),investment:_.Z_().nullable()});function et(e){let{activeTabIdx:t,setActiveTabIdx:a,tabs:l=[],fullWidthTabs:s=!1}=e,n=x.useRef(null),[i,r]=x.useState(null),c=e=>{null==a||a(e)},o=x.useCallback(()=>{if(!n.current||t<0)return;let e=n.current,a=e.children[t];if(a){if(s){let a=l.length,s=e.offsetWidth,n=t*s/a;r({left:n,right:s-n-s/a})}else{let t=e.getBoundingClientRect(),l=a.getBoundingClientRect();r({left:l.left-t.left,right:t.right-l.right})}}},[t,s,l.length]);return x.useEffect(()=>{o()},[l,t,s,o]),x.useEffect(()=>{if(!n.current)return;let e=new ResizeObserver(()=>{o()});return e.observe(n.current),()=>e.disconnect()},[o]),x.useEffect(()=>{let e=()=>o();return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[o]),(0,v.jsxs)("div",{className:"tabs-with-track ".concat(s?"fullwidth-mode":""),children:[(0,v.jsx)("div",{ref:n,className:"tabs-items",children:l.map((e,a)=>(0,v.jsx)("button",{type:"button",className:"tabs-item ".concat(a===t?"active":""),onClick:()=>c(a),children:e},a))}),(0,v.jsx)("div",{className:"tabs-track",children:(0,v.jsx)("div",{className:"track-indicator",style:i||void 0})})]})}function ea(e){let{children:t,variant:a="default",bgColor:l,textColor:s}=e;return(0,v.jsx)("div",{style:{color:s,backgroundColor:l},className:"prop-ai-pill ".concat(a),children:t})}function el(e){let{name:t,options:a=[],sliceSize:l,disableMutlipleSelection:s=!1,selectablePillsClassName:n="",selectablePillsContainerClassName:i="",onChange:r,columns:c,onExpansionChange:o}=e,[d,m,u]=(0,w.U$)(t),[p,h]=x.useState(!1),j=m.touched&&m.error,g=x.useMemo(()=>{var e;let t={};return(null==d?void 0:null===(e=d.value)||void 0===e?void 0:e.length)&&(t=d.value.reduce((e,t)=>(e[t]=!0,e),{})),t},[d.value]),f=e=>{let t;t=g[e]?d.value.filter(t=>t!==e):s?[e]:[...d.value,e],r?r(t):u.setValue(t)},b=a.slice(0,p?void 0:l);return(0,v.jsxs)("div",{className:"prop-ai-multi-selectable-pills ".concat(n," ").concat(j?"has-error":""),children:[c?(0,v.jsx)("div",{className:"columns-container d-flex",children:c.map((e,t)=>0!==l||p?(0,v.jsxs)("div",{className:"column",children:[(0,v.jsx)("span",{className:"column-header d-flex mb-2",children:e.header}),(0,v.jsx)("div",{className:"pills-container flex flex-wrap gap-2",children:(0,v.jsx)(L.M,{mode:"popLayout",children:(0!==l||p?e.options:[]).map((e,t)=>{let{label:a,value:l,disabled:s}=e,n=!!g[l];return(0,v.jsx)(k.E.button,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.25,delay:.05*t},type:"button",className:"multi-selectable-pill ".concat(n?"active":""),onClick:()=>f(l),disabled:s,children:a},t)})})})]},t):null)}):(0,v.jsx)("div",{className:"pills-container ".concat(i),children:(0,v.jsx)(L.M,{mode:"popLayout",children:b.map((e,t)=>{let{label:a,value:s,disabled:n}=e,i=!!g[s];return(0,v.jsx)(k.E.button,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.25,delay:l?t%l*.05:.05*t},type:"button",className:"multi-selectable-pill ".concat(i?"active":""),onClick:()=>f(s),disabled:n,children:a},t)})})}),void 0!==l&&(a.length>l||c)&&(0,v.jsx)("button",{type:"button",className:"view-more-btn ".concat(p?"active":""),onClick:()=>{h(!p),o&&o(!p)},children:(0,v.jsx)("span",{children:"View More"})}),(0,v.jsx)("div",{className:"formfield-error",children:(0,v.jsx)(L.M,{children:!!j&&(0,v.jsx)(k.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:m.error})})})]})}a(22098),a(18728),(r=p||(p={})).default="default",r.primary="primary",r.primary2="primary2",r.primary3="primary3",r.success="success",r.warning="warning",r.danger="danger",a(23613);let es={[T.Ef.capRate]:!0,[T.Ef.rentalYield]:!0,[T.Ef.netCashflow]:!0},en={[T.qo.low]:p.primary,[T.qo.lowMedium]:p.primary,[T.qo.medium]:p.primary2,[T.qo.mediumHigh]:p.primary2,[T.qo.high]:p.primary3},ei={[T.qo.low]:"Low Risk",[T.qo.lowMedium]:"Low-Medium Risk",[T.qo.medium]:"Medium Risk",[T.qo.mediumHigh]:"Medium-High Risk",[T.qo.high]:"High Risk"},er=["Financial Priorities","Investment Strategies"],ec=er.filter(e=>"Investment Strategies"!==e),eo={investmentPurpose:T.Tr[0].value,investmentOptionsOptimizedFor:er[0],selectedFinancialInvestmentOptions:[],selectedStrategyInvestmentOption:null},ed=_.Ry().shape({investmentPurpose:_.Z_().nullable().required("Investment purpose is required"),selectedFinancialInvestmentOptions:_.IX().when("investmentOptionsOptimizedFor",{is:er[0],then:e=>e.min(1,"Please select at least one option"),otherwise:e=>e}),selectedStrategyInvestmentOption:_.Z_().nullable().when("investmentOptionsOptimizedFor",{is:er[1],then:e=>e.required("Investment strategy is required"),otherwise:e=>e})});var em=a(30166),eu=a(37893),ep=a(33145),eh=a(80368);a(18932);var ev=a(57685),ex=a.n(ev),ej=a(50309),eg=a.n(ej);let ef=e=>{let t="",a="";return e.label?(t=e.label,a=""):e.type===z.mQ.area?(t=ex()(eg()(e.areaName||"")),a=ex()(eg()(e.masterProjectName||""))):e.type===z.mQ.masterProject?(t=ex()(eg()(e.projectName||"")),a=ex()(eg()(e.masterProjectName||""))):e.type===z.mQ.project&&(t=ex()(eg()(e.projectName||"")),a=ex()(eg()(e.masterProjectName||""))),{location:t,subLocation:a}},eb=["label","subLabel"],eN={[z.mQ.area]:1,[z.mQ.masterProject]:2,[z.mQ.project]:3};function ey(e){let{name:t,placeholder:a,options:l=[],actionBtnLabel:s="Action",onActionClick:n,onLocationSelect:i,isMapMode:r}=e,c=x.createRef(),[o,d,m]=(0,w.U$)(t),[u,p]=x.useState(""),[h,j]=x.useState(!1),g=x.useMemo(()=>{var e;let t=[],a=[],s={};return Array.isArray(o.value)&&(null===(e=o.value)||void 0===e?void 0:e.length)>0&&(s=o.value.reduce((e,t)=>(e[t.value]=t,e),{})),Array.isArray(l)&&(null==l?void 0:l.length)>0&&(l.forEach(e=>{s[e.value]?t.push(e):a.push(e)}),u&&(t=(0,eh.Lu)(t,u,{keys:eb}),a=(0,eh.Lu)(a,u,{keys:eb})),a.sort((e,t)=>{let a=e.type,l=t.type;return(eN[a]||Number.MAX_SAFE_INTEGER)-(eN[l]||Number.MAX_SAFE_INTEGER)})),{selected:t,unselected:a}},[l,u,o.value]),f=e=>{if(r)i&&(i(e),j(!1));else{var t;let{value:a}=e;Array.isArray(o.value)&&(null===(t=o.value)||void 0===t?void 0:t.length)>0?-1===o.value.findIndex(e=>e.value===a)&&m.setValue([...o.value,e]):m.setValue([e])}},b=!!(d.touched&&d.error);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"formfield-root location-picker-with-action",children:[(0,v.jsx)(ep.default,{src:"/icons/mingcute_search-line.svg",width:24,height:24,alt:"",className:"start-icon"}),(0,v.jsx)("input",{ref:c,type:"text",name:t,placeholder:a,className:"location-picker-search-input",onFocus:()=>j(!0),size:1,value:u,onChange:e=>{let{value:t}=e.target;p(t)}}),u&&(0,v.jsx)("div",{className:"search-clear-button pe-3",style:{zIndex:"1000"},children:(0,v.jsx)(S.J,{icon:"/icons/close-white.svg",backgroundColor:"#005ee3",size:18,alt:"x",onClick:()=>{p(""),c.current&&c.current.focus()}})}),(0,v.jsx)("div",{className:"action-btn-wrapper",children:(0,v.jsx)("button",{type:"button",className:"action-btn",onClick:e=>{e.stopPropagation(),n&&n()},children:s})}),h&&(0,v.jsx)("div",{className:"location-picker-outside-listener",onClick:()=>j(!1)}),(0,v.jsx)(L.M,{children:h&&(0,v.jsx)(k.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"location-picker-options-container",children:l.length>0?(0,v.jsx)(x.Fragment,{children:g.unselected.map((e,t)=>{let{location:a,subLocation:l}=ef(e);return(0,v.jsx)("div",{className:"location-picker-option selectable",onClick:()=>f(e),children:(0,v.jsxs)("div",{className:"d-block",children:[(0,v.jsxs)("span",{children:[a,l&&(0,v.jsxs)("span",{className:"text-muted",children:[", ",l]})]}),(0,v.jsx)("div",{className:"text-muted",children:e.type===z.mQ.area?"Area":e.type===z.mQ.masterProject?"Master Project":e.type===z.mQ.project?"Project":e.type})]})},"unselected-".concat(t))})}):(0,v.jsx)("div",{className:"no-options-placeholder",children:" No Options"})})})]}),(0,v.jsx)("div",{className:"formfield-error",children:(0,v.jsx)(L.M,{children:b&&(0,v.jsx)(k.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:d.error})})})]})}ey.SelectedValuesContainer=e=>{let{name:t}=e,[a,l,s]=(0,w.U$)(t),n=Array.isArray(a.value)?a.value:[],i=x.useRef(null);x.useEffect(()=>{if(i.current){let e=i.current;e.scrollLeft=e.scrollWidth}},[n]);let r=e=>{let t=n.slice();t.splice(e,1),s.setValue(t)};return(0,v.jsx)("div",{className:"location-picker-selected-values",ref:i,onMouseDown:e=>{let t=i.current;if(!t)return;let a=e.pageX-t.offsetLeft,l=t.scrollLeft,s=e=>{let s=e.pageX-t.offsetLeft;t.scrollLeft=l-(s-a)*5},n=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",n)},children:n.map((e,t)=>{let a="";return a=e.type===z.mQ.project?e.projectName||e.label||e.projectNameLabel||"":e.type===z.mQ.masterProject?e.masterProjectName||e.label||e.masterProjectLabel||"":e.type===z.mQ.area?e.areaName||e.label||e.areaNameLabel||"":e.project_name_label||"",(0,v.jsxs)("div",{className:"location-picker-selected-value",children:[(0,I.Ui)(a),(0,v.jsx)(S.J,{icon:"/icons/close-white.svg",backgroundColor:"#005ee3",size:17.5,alt:"x",onClick:()=>r(t)})]},"selected-".concat(t))})})};var eP=a(60097);a(85501);var e_=a(71096),ew=a.n(e_),eS=a(74869),eC=a(3552);a(50715);let eL=e=>{if(!e)return"N/A";try{let t=ew()(e);return t.isValid()?t.format("DD MMM YYYY"):"N/A"}catch(e){return"N/A"}};function ek(e){var t,a,l,s;let{selectedArea:n,filters:i,isFullscreen:r}=e,[c,o]=x.useState(0),[d,m]=x.useState(!0),u=0===c,p=(null==i?void 0:i.service_charges_sqft)||0,h=(null==i?void 0:i.service_charges_sqft_dubai_average)||0,j=h>0?p/h:0,g=0===j?0:(j-1)*100,f=0===p?"N/A":(0,I.ZO)(p,{oneDecimal:!0}),b=0===g?"N/A":"".concat((0,I.ZO)(g,{oneDecimal:!0,addPercentage:!0})),N=z.NP.insufficient===(null==i?void 0:i.data_confidence_sales),y=z.NP.insufficient===(null==i?void 0:i.data_confidence_rent),P=z.NP.insufficient===(null==i?void 0:i.data_confidence_yield);return(0,v.jsxs)("div",{className:"container-fluid",children:[(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:700,children:"Key Metrics"})}),(0,v.jsxs)("div",{className:"row g-3",children:[(0,v.jsx)("div",{className:r?"col-4":"col-6",children:(0,v.jsxs)("div",{className:"metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Unique Properties"}),(0,v.jsx)("div",{className:"metric-value",children:(0,I.ZO)(null==i?void 0:i.unique_properties,{noDecimal:!0})||"N/A"})]})}),(0,v.jsx)("div",{className:r?"col-4":"col-6",children:(0,v.jsxs)("div",{className:"metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Total Listings"}),(0,v.jsx)("div",{className:"metric-value",children:(0,I.ZO)(null==i?void 0:i.number_listings,{noDecimal:!0})||"N/A"})]})}),(0,v.jsx)("div",{className:r?"col-4":"col-6",children:(0,v.jsxs)("div",{className:"metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Listings Below Market Value"}),(0,v.jsx)("div",{className:"metric-value",children:(0,I.ZO)(null==i?void 0:i.below_fmv_listings,{noDecimal:!0})||"N/A"})]})}),(0,v.jsx)("div",{className:"col-6",children:(0,v.jsxs)("div",{className:"metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Off-Market Properties"}),(0,v.jsx)("div",{className:"metric-value",children:(0,I.ZO)(null==i?void 0:i.offmarket_properties,{noDecimal:!0})||"N/A"})]})}),(0,v.jsx)("div",{className:r?"col-6":"col-12",children:(0,v.jsxs)("div",{className:"metric-container flex-row",children:[(0,v.jsx)("div",{className:"w-100",children:(0,v.jsxs)("div",{className:"d-flex flex-column justify-content-between h-100",children:[(0,v.jsx)("div",{className:"metric-label",children:"Asking Price Range"}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"metric-label sm mb-1",children:"Median"}),(0,v.jsx)("div",{className:"metric-value",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.median_asking_price_p6m,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.median_asking_price_p12m,{noDecimal:!0})]})||"N/A"})]})]})}),(0,v.jsx)("div",{className:"w-100",children:(0,v.jsxs)("div",{className:"d-flex flex-column justify-content-between h-100",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-end metric-label sm",children:"Min."}),(0,v.jsx)("div",{className:"text-end metric-label",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.asking_price_p6m_min,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.asking_price_p12m_min,{noDecimal:!0})]})||"N/A"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-end metric-label sm",children:"Max."}),(0,v.jsx)("div",{className:"text-end metric-label",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.asking_price_p6m_max,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.asking_price_p12m_max,{noDecimal:!0})]})||"N/A"})]})]})})]})}),(0,v.jsx)("div",{className:"divider"}),(0,v.jsx)("div",{className:"col-12",children:(0,v.jsx)(eS.Z,{tabs:["Last 6 Months","Last 12 Months"],className:"detailed-metric-time-selection-tabs",onChangeTab:o,activeTabIdx:c})}),(0,v.jsx)("div",{className:r?"col-4":"col-6",children:(0,v.jsxs)("div",{className:"metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Total Sales"}),(0,v.jsx)("div",{className:"metric-value",children:u?(0,I.ZO)(null==i?void 0:i.total_sales_p6m,{noDecimal:!0}):(0,I.ZO)(null==i?void 0:i.total_sales_p12m,{noDecimal:!0})||"N/A"})]})}),(0,v.jsx)("div",{className:r?"col-4":"col-6",children:(0,v.jsxs)("div",{className:"metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Total Rent Contracts"}),(0,v.jsx)("div",{className:"metric-value",children:u?(0,I.ZO)(null==i?void 0:i.total_rent_contracts_p6m,{noDecimal:!0}):(0,I.ZO)(null==i?void 0:i.total_rent_contracts_p12m,{noDecimal:!0})||"N/A"})]})}),(0,v.jsx)("div",{className:r?"col-4":"col-6",children:(0,v.jsxs)("div",{className:"metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Price Change, YoY"}),(0,v.jsx)("div",{className:!i||(null==i?void 0:i.price_change_yoy)===null||isNaN(null==i?void 0:i.price_change_yoy)||N?"metric-value":(null==i?void 0:i.price_change_yoy)<0?"metric-value text-danger":"metric-value text-success",children:N?(0,v.jsx)(ea,{children:"Insufficient Data"}):(0,v.jsxs)(v.Fragment,{children:[(null==i?void 0:i.price_change_yoy)>0?"+":""," ",(0,I.ZO)(null==i?void 0:i.price_change_yoy,{addPercentage:!0,oneDecimal:!0})]})})]})}),(0,v.jsx)("div",{className:r?"col-4":"col-6",children:(0,v.jsxs)("div",{className:"metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Rent Change, YoY"}),(0,v.jsx)("div",{className:!i||(null==i?void 0:i.rent_change_yoy)===null||isNaN(null==i?void 0:i.rent_change_yoy)||y?"metric-value":(null==i?void 0:i.rent_change_yoy)<0?"metric-value text-danger":"metric-value text-success",children:y?(0,v.jsx)(ea,{children:"Insufficient Data"}):(0,v.jsxs)(v.Fragment,{children:[(null==i?void 0:i.rent_change_yoy)>0?"+":""," ",(0,I.ZO)(null==i?void 0:i.rent_change_yoy,{addPercentage:!0,oneDecimal:!0})]})})]})}),(0,v.jsx)("div",{className:r?"col-4":"col-12",children:(0,v.jsxs)("div",{className:"metric-container flex-row",children:[(0,v.jsx)("div",{className:"w-100",children:(0,v.jsxs)("div",{className:"d-flex flex-column justify-content-between h-100",children:[(0,v.jsx)("div",{className:"metric-label",children:"Sales Price Range"}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"metric-label sm mb-1",children:"Median"}),(0,v.jsx)("div",{className:"metric-value",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.sales_price_median_p6m,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.sales_price_median_p12m,{noDecimal:!0})]})||"N/A"})]})]})}),(0,v.jsx)("div",{className:"w-100",children:(0,v.jsxs)("div",{className:"d-flex flex-column justify-content-between h-100",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-end metric-label sm",children:"Min."}),(0,v.jsx)("div",{className:"text-end metric-label",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.sales_price_p6m_min,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.sales_price_p12m_min,{noDecimal:!0})]})||"N/A"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-end metric-label sm",children:"Max"}),(0,v.jsx)("div",{className:"text-end metric-label",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.sales_price_p6m_max,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.sales_price_p12m_max,{noDecimal:!0})]})||"N/A"})]})]})})]})}),(0,v.jsx)("div",{className:r?"col-4":"col-12",children:(0,v.jsxs)("div",{className:"metric-container flex-row",children:[(0,v.jsx)("div",{className:"w-100",children:(0,v.jsxs)("div",{className:"d-flex flex-column justify-content-between h-100",children:[(0,v.jsx)("div",{className:"metric-label",children:"Price per Sqft"}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"metric-label sm mb-1",children:"Median"}),(0,v.jsx)("div",{className:"metric-value",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.price_per_sqft_p6m,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.price_per_sqft_p12m,{noDecimal:!0})]})||"N/A"})]})]})}),(0,v.jsx)("div",{className:"w-100",children:(0,v.jsxs)("div",{className:"d-flex flex-column justify-content-between h-100",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-end metric-label sm",children:"Min."}),(0,v.jsx)("div",{className:"text-end metric-label",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.price_per_sqft_p6m_min,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.price_per_sqft_p12m_min,{noDecimal:!0})]})||"N/A"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-end metric-label sm",children:"Max"}),(0,v.jsx)("div",{className:"text-end metric-label",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.price_per_sqft_p6m_max,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.price_per_sqft_p12m_max,{noDecimal:!0})]})||"N/A"})]})]})})]})}),(0,v.jsx)("div",{className:r?"col-4":"col-12",children:(0,v.jsxs)("div",{className:"metric-container flex-row",children:[(0,v.jsx)("div",{className:"w-100",children:(0,v.jsxs)("div",{className:"d-flex flex-column justify-content-between h-100",children:[(0,v.jsx)("div",{className:"metric-label",children:"Annual Rent"}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"metric-label sm mb-1",children:"Median"}),(0,v.jsx)("div",{className:"metric-value",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.annual_rent_median_p6m,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.annual_rent_median_p12m,{noDecimal:!0})]})||"N/A"})]})]})}),(0,v.jsx)("div",{className:"w-100",children:(0,v.jsxs)("div",{className:"d-flex flex-column justify-content-between h-100",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-end metric-label sm",children:"New"}),(0,v.jsx)("div",{className:"text-end metric-label",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.annual_rent_p6m_new,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.annual_rent_p12m_new,{noDecimal:!0})]})||"N/A"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-end metric-label sm",children:"Renew"}),(0,v.jsx)("div",{className:"text-end metric-label",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.annual_rent_p6m_renew,{noDecimal:!0})," "]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==i?void 0:i.annual_rent_p12m_renew,{noDecimal:!0})]})||"N/A"})]})]})})]})}),(0,v.jsx)("div",{className:r?"col-4":"col-12",children:(0,v.jsxs)("div",{className:"metric-container flex-row",children:[(0,v.jsx)("div",{className:"w-100",children:(0,v.jsxs)("div",{className:"d-flex flex-column justify-content-between h-100",children:[(0,v.jsx)("div",{className:"metric-label",children:"Gross Rental Yield"}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"metric-label sm mb-1",children:"Median"}),(0,v.jsx)("div",{className:"metric-value",children:P?(0,v.jsx)(ea,{children:"Insufficient Data"}):(0,v.jsx)(v.Fragment,{children:u?(0,I.ZO)(null==i?void 0:i.rental_yield_p6m,{addPercentage:!0,oneDecimal:!0,multiplyBy100:!0}):(0,I.ZO)(null==i?void 0:i.rental_yield_p12m,{addPercentage:!0,oneDecimal:!0,multiplyBy100:!0})||"N/A"})})]})]})}),(0,v.jsx)("div",{className:"w-100",children:(0,v.jsxs)("div",{className:"d-flex flex-column justify-content-between h-100",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-end metric-label sm",children:"Min."}),(0,v.jsx)("div",{className:"text-end",children:u?(0,I.ZO)(null==i?void 0:i.rental_yield_p6m_min,{addPercentage:!0,oneDecimal:!0,multiplyBy100:!0}):(0,I.ZO)(null==i?void 0:i.rental_yield_p12m_min,{addPercentage:!0,oneDecimal:!0,multiplyBy100:!0})||"N/A"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-end metric-label sm",children:"Max"}),(0,v.jsx)("div",{className:"text-end",children:u?(0,I.ZO)(null==i?void 0:i.rental_yield_p6m_max,{addPercentage:!0,oneDecimal:!0,multiplyBy100:!0}):(0,I.ZO)(null==i?void 0:i.rental_yield_p12m_max,{addPercentage:!0,oneDecimal:!0,multiplyBy100:!0})||"N/A"})]})]})})]})}),(0,v.jsx)("div",{className:r?"col-4":"col-12",children:(0,v.jsxs)("div",{className:"metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Service Charges"}),(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"metric-value",children:f}),(0,v.jsx)("div",{className:"metric-value sm",children:p>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{}),"/Sqft"]}):" "})]}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:0===g?"metric-value":g>0?"metric-value text-danger":"metric-value text-success",children:[g>0?"+":""," ",b]}),(0,v.jsx)("div",{className:"metric-label sm",children:"Dubai Average"})]})]})]})})]}),(0,v.jsx)("div",{className:"divider my-3"}),d&&(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)("div",{className:"mb-2",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:700,children:"Sales Transactions"})}),(0,v.jsx)("div",{className:"row g-3",children:(0,v.jsx)("div",{className:"col-12",children:void 0===i?(0,v.jsx)("div",{className:"no-transactions-message mb-2",children:"Loading recent sales transactions..."}):(null==i?void 0:null===(t=i.recent_sales_transactions)||void 0===t?void 0:t.length)>0?(0,v.jsxs)(eC.Z,{children:[(0,v.jsxs)(eC.Z.Row,{isHeader:!0,children:[(0,v.jsx)(eC.Z.Cell,{children:"Project"}),(0,v.jsx)(eC.Z.Cell,{children:"Building"}),(0,v.jsx)(eC.Z.Cell,{children:"Date"}),(0,v.jsx)(eC.Z.Cell,{children:"Specs"}),(0,v.jsx)(eC.Z.Cell,{children:"Area"}),(0,v.jsx)(eC.Z.Cell,{children:"Price per Sqft"})]}),null==i?void 0:null===(a=i.recent_sales_transactions)||void 0===a?void 0:a.map((e,t)=>{let{"project_name_prop-ai":a,"master_project_prop-ai":l,building_name_en:s}=e;return(0,v.jsxs)(eC.Z.Row,{children:[(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellString,{value:a&&"N/A"!==a?a:"N/A",subtitle:l&&"N/A"!==l?l:"",capitalizeValue:!0,capitalizeSubtitle:!0})}),(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellString,{value:s&&"N/A"!==s&&"None"!==s?s:"",capitalizeValue:!0,capitalizeSubtitle:!0})}),(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellDate,{value:eL(null==e?void 0:e.instance_date)})}),(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellString,{value:(()=>{let t=e["Property Type"],a=e["Number of Bedrooms"],l=e["Development Status"];if("All"===t&&"All"===a&&"All"===l)return"All";let s=[];return"All"!==t&&s.push(t),"All"!==a&&(0===a||"0"===a?s.push(" Studio"):"N/A"===a?s.push(" "):s.push("".concat(a,"BR"))),s.join(" ")||"All"})(),subtitle:"All"!==e["Development Status"]?e["Development Status"]:" "})}),(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellString,{value:(0,I.ZO)((null==e?void 0:e.procedure_area)*E.qo,{oneDecimal:!0}),subtitle:"Sqft"})}),(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellString,{value:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)((null==e?void 0:e.meter_sale_price)/E.qo,{noDecimal:!0})]}),subtitle:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(null==e?void 0:e.actual_worth,{noDecimal:!0})]})})})]},t)})]}):(0,v.jsx)("div",{className:"no-transactions-message mb-2",children:"No recent sales transactions yet..."})})}),(0,v.jsx)("div",{className:"mt-3 mb-2",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:700,children:"Rent Transactions"})}),(0,v.jsx)("div",{className:"row g-3",children:(0,v.jsx)("div",{className:"col-12",children:void 0===i?(0,v.jsx)("div",{className:"no-transactions-message mb-2",children:"Loading recent rent transactions..."}):(null==i?void 0:null===(l=i.recent_rent_contracts)||void 0===l?void 0:l.length)>0?(0,v.jsxs)(eC.Z,{children:[(0,v.jsxs)(eC.Z.Row,{isHeader:!0,children:[(0,v.jsx)(eC.Z.Cell,{children:"Project"}),(0,v.jsx)(eC.Z.Cell,{children:"Contract"}),(0,v.jsx)(eC.Z.Cell,{children:"Start Date"}),(0,v.jsx)(eC.Z.Cell,{children:"End Date"}),(0,v.jsx)(eC.Z.Cell,{children:"Specs"}),(0,v.jsx)(eC.Z.Cell,{children:"Area"}),(0,v.jsx)(eC.Z.Cell,{children:"Rent per Sqft"})]}),null==i?void 0:null===(s=i.recent_rent_contracts)||void 0===s?void 0:s.map((e,t)=>{let{"project_name_prop-ai":a,"master_project_prop-ai":l,building_name_en:s}=e;return(0,v.jsxs)(eC.Z.Row,{children:[(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellString,{value:a&&"N/A"!==a&&"None"!==a?a:"N/A",subtitle:l&&"N/A"!==l&&"None"!==a?l:"",capitalizeValue:!0,capitalizeSubtitle:!0})}),(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellString,{value:e.contract_reg_type_en,capitalizeValue:!0,capitalizeSubtitle:!0})}),(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellDate,{value:eL(null==e?void 0:e.contract_start_date)})}),(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellDate,{value:eL(null==e?void 0:e.contract_end_date)})}),(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellString,{value:(()=>{let t=e["Property Type"],a=e["Number of Bedrooms"],l=e["Development Status"];if("All"===t&&"All"===a&&"All"===l)return"All";let s=[];return"All"!==t&&s.push(t),"All"!==a&&(0===a||"0"===a?s.push(" Studio"):"N/A"===a?s.push(" "):s.push("".concat(a,"BR"))),s.join(" ")||"All"})(),subtitle:"All"!==e["Development Status"]?e["Development Status"]:" "})}),(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellString,{value:(0,I.ZO)(e.actual_area*E.qo,{oneDecimal:!0}),subtitle:"Sqft"})}),(0,v.jsx)(eC.Z.Cell,{children:(0,v.jsx)(eC.Z.CellString,{value:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)((e["Annual Rent Per SQM"]||e.annual_rent_per_SQM)/E.qo,{noDecimal:!0})]}),subtitle:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,I.ZO)(e.annual_amount,{noDecimal:!0})]})})})]},t)})]}):(0,v.jsx)("div",{className:"no-transactions-message mb-2",children:"No recent rent transactions yet..."})})})]}),(0,v.jsx)("button",{type:"button",className:"view-transactions-btn ".concat(d?"active":""),onClick:()=>m(e=>!e),children:"View Transactions"})]})}var eA=a(36979),eT=a(14084),eD=a(76705);function eZ(e){let{data:t={datasets:[],labels:[]},getFormattedYTick:a,onRenderTooltipFooter:l,onRenderTooltipLabel:s}=e;return(0,v.jsx)(eD.$Q,{data:t,options:{aspectRatio:28.6/17.2,plugins:{legend:{display:!1},title:{display:!1},tooltip:{backgroundColor:"#fff",titleColor:"#5D5D60",titleFont:{weight:400},bodyColor:"#000",bodyFont:{weight:500},footerColor:"#000",borderWidth:1,borderColor:"#ddd",callbacks:{label:s,footer:l}}},scales:{x:{grid:{color:"#eee"},border:{color:"#000"},ticks:{color:"#000",autoSkip:!1,font:{size:12}}},y:{grid:{color:"#ccc"},border:{color:"#000"},ticks:{maxTicksLimit:5,color:"#000",font:{size:14},callback:a},position:"left"}},elements:{point:{radius:5}}},height:"100%",width:"100%"})}function eF(e){let{title:t="",data:a={datasets:[],labels:[]},getFormattedYTick:l,onRenderTooltipFooter:s,onRenderTooltipLabel:n}=e;return a.datasets.every(e=>!e.data.filter(Boolean).length)?(0,v.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:(0,v.jsx)("span",{className:"fw-bold",children:"No data available"})}):(0,v.jsx)(eD.x1,{data:a,options:{maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{position:"top",align:"center",display:!!t,text:t,color:"#000",font:{size:16},padding:{bottom:10,top:10}},tooltip:{backgroundColor:"#fff",titleColor:"#5D5D60",titleFont:{weight:400},bodyColor:"#000",bodyFont:{weight:500},footerColor:"#000",borderWidth:1,borderColor:"#ddd",callbacks:{label:n,footer:s},footerFont:{weight:600,family:"DirhamRegular"},footerAlign:"left",footerSpacing:2,displayColors:!0}},scales:{x:{grid:{color:"#eee"},border:{color:"#000"},ticks:{color:"#000",font:{size:14}}},y:{grid:{color:"#ccc"},border:{color:"#000"},ticks:{maxTicksLimit:5,color:"#000",font:{size:14},callback:l},position:"left"}},elements:{point:{radius:5}}},height:"100%",width:"100%"})}a(51953),eT.kL.register(eT.od,eT.ZL,eT.jn,eT.Dx,eT.u,eT.De),eZ.Legend=function(e){let{justify:t="end",align:a="center",children:l}=e;return(0,v.jsx)("div",{className:"l2-metric-bar-chart-legend justify-content-".concat(t," align-items-").concat(a),children:l})},eZ.LegendItem=function(e){let{color:t,label:a,type:l="line"}=e;return(0,v.jsxs)("div",{className:"l2-metric-bar-chart-legend-item ".concat(l),children:[(0,v.jsx)("div",{style:{backgroundColor:t},className:"item-indicator"}),a]})},a(93600),eT.kL.register(eT.od,eT.jn,eT.Dx,eT.u,eT.De),eF.Legend=function(e){let{justify:t="end",align:a="center",children:l}=e;return(0,v.jsx)("div",{className:"l2-metric-line-chart-legend justify-content-".concat(t," align-items-").concat(a),children:l})},eF.LegendItem=function(e){let{color:t,label:a}=e;return(0,v.jsxs)("div",{className:"l2-metric-line-chart-legend-item",children:[(0,v.jsx)("div",{style:{backgroundColor:t},className:"item-indicator"}),a]})};let eM=[{label:"Last 6 Months",value:6},{label:"Last 12 Months",value:12}],eI=[{label:"Median Price",value:"median"},{label:"Median Price per Sqft",value:"median_per_sqft"}],eE=[{label:"All",value:"all"},{label:"New",value:"new"},{label:"Renew",value:"renew"}];function eO(e){let{selectedArea:t,trendsData:a,isFullscreen:l}=e,[s,n]=x.useState(eM[0]),[i,r]=x.useState(eI[0]),[c,o]=x.useState(eE[0]),d=null==a?void 0:a.median_asking_price_timeseries,m=null==a?void 0:a.median_sales_price_timeseries,u=null==a?void 0:a.median_asking_price_per_sqft_timeseries,p=null==a?void 0:a.median_price_per_sqft_timeseries,h=null==a?void 0:a.median_annual_rent_timeseries,j=null==a?void 0:a.median_annual_rent_new_timeseries,g=null==a?void 0:a.median_annual_rent_renew_timeseries,f=null==a?void 0:a.median_asking_rent_timeseries,b=null==a?void 0:a.total_sales_timeseries,N=null==a?void 0:a.number_unique_sales_listings_timeseries,y=null==a?void 0:a.number_unique_sales_listings_p6m_past_month,P=null==a?void 0:a.number_unique_sales_listings_p12m_past_month,_=null==a?void 0:a.total_sales_p6m_past_month,w=null==a?void 0:a.total_sales_p12m_past_month,L=null==a?void 0:a.total_rent_contracts_timeseries,k=null==a?void 0:a.number_unique_rent_listings_timeseries,A=null==a?void 0:a.number_unique_rent_listings_p6m_past_month,T=null==a?void 0:a.number_unique_rent_listings_p12m_past_month,D=null==a?void 0:a.total_rent_contracts_p6m_past_month,Z=null==a?void 0:a.total_rent_contracts_p12m_past_month,F=null==a?void 0:a.total_sales_offplan_timeseries,M=null==a?void 0:a.total_sales_ready_timeseries,O=null==a?void 0:a.total_rent_contracts_new_timeseries,R=null==a?void 0:a.total_rent_contracts_renew_timeseries,W=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],q=e=>{if(!e)return[];let t=e.filter(e=>null!==e.value).sort((e,t)=>e.year!==t.year?e.year-t.year:e.month-t.month),a=new Date,l=a.getMonth()+1,n=a.getFullYear(),i=t.filter(e=>!(e.year===n&&e.month===l));return 6===s.value?i.slice(-6):i.slice(-12)},z=(e,t)=>[...e].sort((e,t)=>e.year!==t.year?e.year-t.year:e.month-t.month).map(e=>[t[e.month-1],e.year.toString()]),B=function(e,t){for(var a=arguments.length,l=Array(a>2?a-2:0),s=2;s<a;s++)l[s-2]=arguments[s];if(t&&t.length>0)return z(t,e);for(let t of l)if(t&&t.length>0)return z(t,e);return[]},H=q("median_per_sqft"===i.value?u:d),Y=q("median_per_sqft"===i.value?p:m),U=q(h),Q=q(j),J=q(g),K=q(f),G=q(b),$=q(N),X=q(L),ee=q(k),et=(()=>{switch(c.value){case"new":return Q;case"renew":return J;default:return U}})(),ea=B(W,H,Y),el=B(W,U,j,g,K),es=B(W,G,$),en=B(W,X,ee),ei=e=>{if(!e||0===e.length)return null;let t=e.filter(e=>null!==e.value).map(e=>Number(e.value));return t.length>0?t.reduce((e,t)=>e+t,0)/t.length:null},er=e=>{if(!e||0===e.length)return null;let t=e.filter(e=>null!==e.value).map(e=>Number(e.value));return t.length>0?Math.max(...t):null},ec=e=>{if(!e||0===e.length)return null;let t=e.filter(e=>null!==e.value).map(e=>Number(e.value));return t.length>0?Math.min(...t):null},eo=()=>ei(H),ed=()=>er(H),em=()=>ec(H),eu=()=>ei(Y),ep=()=>er(Y),eh=()=>ec(Y),ev=()=>ei(K),ex=()=>er(K),ej=()=>ec(K),eg=()=>ei(et),ef=()=>er(et),eb=()=>ec(et),eN=e=>{var t;if(!e||0===e.length)return"month";let a=e.filter(e=>null!==e.value).length;return(null===(t=[{limit:72,value:"year"},{limit:36,value:"half-year"},{limit:12,value:"quarter"},{limit:0,value:"month"}].find(e=>a>e.limit))||void 0===t?void 0:t.value)||"month"},ey=(e,t)=>{if(!e)return[];let a=[...e].sort((e,t)=>e.year!==t.year?t.year-e.year:t.month-e.month),l=[],s=null;for(let e of a){let a,n;if(null!==e.value){if("quarter"===t){let t=Math.ceil(e.month/3);a="".concat(e.year,"-Q").concat(t),n=["Q".concat(t),e.year.toString()]}else if("half-year"===t){let t=e.month<=6?1:2;a="".concat(e.year,"-H").concat(t),n=["H".concat(t),e.year.toString()]}else if("year"===t)a="".concat(e.year),n=[e.year.toString()];else{let t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a="".concat(e.year,"-").concat(e.month),n=[t[e.month-1],e.year.toString()]}s&&s.key===a||(s&&l.push(s),s={key:a,label:n,value:0}),s.value+=e.value||0}}return s&&l.push(s),l.reverse()},eP=(e,t,a,l)=>{let s=eN((null==e?void 0:e.length)>(null==t?void 0:t.length)?e:t),n=ey(e,s),i=ey(t,s),r=n.map(e=>e.label);return{datasets:[{data:n.map(e=>e.value),backgroundColor:a,type:"bar",stack:"combined",barPercentage:.35},{data:i.map(e=>e.value),backgroundColor:l,type:"bar",stack:"combined",barPercentage:.35}],labels:r}},e_=eP(M||[],F||[],"#49AA25","#005EE3"),ew=eP(R||[],O||[],"#0048C3","#27AEEF");return(0,v.jsxs)("div",{className:"container-fluid",children:[(0,v.jsx)("div",{className:"row mt-2",children:(0,v.jsx)(eA.ZP,{options:eM,value:s,onChange:e=>{e&&n(e)},className:"trends-time-period-select px-1",classNamePrefix:"trends-time-period-select",components:{IndicatorSeparator:()=>null,DropdownIndicator:()=>(0,v.jsx)(S.J,{icon:"/icons/chevron-black-down.svg",alt:"v",size:24})}})}),(0,v.jsxs)("div",{className:l?"row":"",children:[(0,v.jsxs)("div",{className:l?"col-6":"",children:[(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:700,children:"Price Trend"})}),l&&(0,v.jsx)("div",{className:"row mb-3",children:(0,v.jsx)(C.ZP,{variant:C.sT.body3,children:"Annual Price Amount"})}),(0,v.jsx)("div",{className:"row mt-2",children:(0,v.jsx)(eA.ZP,{options:eI,value:i,onChange:e=>{e&&r(e)},className:"trends-time-period-select px-1",classNamePrefix:"trends-time-period-select",components:{IndicatorSeparator:()=>null,DropdownIndicator:()=>(0,v.jsx)(S.J,{icon:"/icons/chevron-black-down.svg",alt:"v",size:24})}})}),(0,v.jsxs)("div",{className:"row mt-3",children:[(0,v.jsx)("div",{className:"col-6",children:(0,v.jsxs)("div",{className:"trend-metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Asking Price"}),(0,v.jsx)("div",{className:"metric-value text-success",children:null!==eo()?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,E.gs)(Number(eo()),!0)]}):"N/A"}),(0,v.jsxs)("div",{className:"text-end metric-sublabel d-flex",children:["From"," ",null!==em()?(0,v.jsxs)(v.Fragment,{children:["\xa0",(0,v.jsx)(V.W,{}),"\xa0",(0,E.gs)(Number(em()),!0)]}):"N/A"," ","to"," ",null!==ed()?(0,v.jsxs)(v.Fragment,{children:["\xa0",(0,v.jsx)(V.W,{}),"\xa0",(0,E.gs)(Number(ed()),!0)]}):"N/A"]})]})}),(0,v.jsx)("div",{className:"col-6",children:(0,v.jsxs)("div",{className:"trend-metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Sales Price"}),(0,v.jsx)("div",{className:"metric-value text-success",children:null!==eu()?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,E.gs)(Number(eu()),!0)]}):"N/A"}),(0,v.jsxs)("div",{className:"text-end metric-sublabel d-flex",children:["From"," ",null!==eh()?(0,v.jsxs)(v.Fragment,{children:["\xa0",(0,v.jsx)(V.W,{}),"\xa0",(0,E.gs)(Number(eh()),!0)]}):"N/A"," ","to"," ",null!==ep()?(0,v.jsxs)(v.Fragment,{children:["\xa0",(0,v.jsx)(V.W,{}),"\xa0",(0,E.gs)(Number(ep()),!0)]}):"N/A"]})]})})]}),(0,v.jsx)("div",{className:"row ".concat(l?"mt-3":""),children:(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)("div",{className:"metric-line-chart-container",children:(0,v.jsx)(eF,{data:{datasets:[{data:null==H?void 0:H.map(e=>e.value),borderColor:"#005EE3",backgroundColor:"#005EE3",pointBorderColor:"#fff",pointBorderWidth:2},{data:null==Y?void 0:Y.map(e=>e.value),borderColor:"#87BC45",backgroundColor:"#87BC45",pointBorderColor:"#fff",pointBorderWidth:2}],labels:ea},getFormattedYTick:e=>(0,E.gs)(Number(e),!0),onRenderTooltipLabel:e=>0===e.datasetIndex?"Asking Price":"Sales Price",onRenderTooltipFooter:e=>{var t;let a=null==e?void 0:null===(t=e[0])||void 0===t?void 0:t.raw;if("number"==typeof a){let e=(0,E.RE)(a,!1,"AED",!1,{maximumFractionDigits:0,minimumFractionDigits:0});return"".concat(e)}return""}})}),(0,v.jsxs)(eF.Legend,{children:[(0,v.jsx)(eF.LegendItem,{label:"Asking Price (Listings)",color:"#005EE3"}),(0,v.jsx)(eF.LegendItem,{label:"Sales Price (DLD)",color:"#87BC45"})]})]})}),(0,v.jsx)("div",{className:"divider ".concat(l?"d-none":"")})]}),(0,v.jsxs)("div",{className:l?"col-6":"",children:[(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:700,children:"Rent Trend"})}),(0,v.jsx)("div",{className:"row mb-3",children:(0,v.jsx)(C.ZP,{variant:C.sT.body3,children:"Annual Rental Amount"})}),(0,v.jsx)("div",{className:"row mt-2",children:(0,v.jsx)(eA.ZP,{options:eE,value:c,onChange:e=>{e&&o(e)},className:"trends-time-period-select px-1",classNamePrefix:"trends-time-period-select",components:{IndicatorSeparator:()=>null,DropdownIndicator:()=>(0,v.jsx)(S.J,{icon:"/icons/chevron-black-down.svg",alt:"v",size:24})}})}),(0,v.jsxs)("div",{className:"row mt-3 mb-3",children:[(0,v.jsx)("div",{className:"col-6",children:(0,v.jsxs)("div",{className:"trend-metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Rent Listings"}),(0,v.jsx)("div",{className:"metric-value text-success",children:null!==ev()?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,E.gs)(Number(ev()),!0)]}):"N/A"}),(0,v.jsxs)("div",{className:"text-end metric-sublabel d-flex",children:["From"," ",null!==ej()?(0,v.jsxs)(v.Fragment,{children:["\xa0",(0,v.jsx)(V.W,{}),"\xa0",(0,E.gs)(Number(ej()),!0)]}):"N/A"," ","to"," ",null!==ex()?(0,v.jsxs)(v.Fragment,{children:["\xa0",(0,v.jsx)(V.W,{}),"\xa0",(0,E.gs)(Number(ex()),!0)]}):"N/A"]})]})}),(0,v.jsx)("div",{className:"col-6",children:(0,v.jsxs)("div",{className:"trend-metric-container",children:[(0,v.jsx)("div",{className:"metric-label",children:"Rent Contracts"}),(0,v.jsx)("div",{className:"metric-value text-success",children:null!==eg()?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.W,{})," ",(0,E.gs)(Number(eg()),!0)]}):"N/A"}),(0,v.jsxs)("div",{className:"text-end metric-sublabel d-flex",children:["From"," ",null!==eb()?(0,v.jsxs)(v.Fragment,{children:["\xa0",(0,v.jsx)(V.W,{}),"\xa0",(0,E.gs)(Number(eb()),!0)]}):"N/A"," ","to"," ",null!==ef()?(0,v.jsxs)(v.Fragment,{children:["\xa0",(0,v.jsx)(V.W,{}),"\xa0",(0,E.gs)(Number(ef()),!0)]}):"N/A"]})]})})]}),(0,v.jsx)("div",{className:"row",children:(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)("div",{className:"metric-line-chart-container",children:(0,v.jsx)(eF,{data:{datasets:[{data:null==et?void 0:et.map(e=>e.value),borderColor:"#87BC45",backgroundColor:"#87BC45",pointBorderColor:"#fff",pointBorderWidth:2},{data:null==K?void 0:K.map(e=>e.value),borderColor:"#005EE3",backgroundColor:"#005EE3",pointBorderColor:"#fff",pointBorderWidth:2}],labels:el},getFormattedYTick:e=>(0,E.gs)(Number(e),!0),onRenderTooltipLabel:e=>0===e.datasetIndex?"Median Rent":"Asking Rent",onRenderTooltipFooter:e=>{var t;let a=null==e?void 0:null===(t=e[0])||void 0===t?void 0:t.raw;if("number"==typeof a){let e=(0,E.RE)(a,!1,"AED",!1,{maximumFractionDigits:0,minimumFractionDigits:0});return"".concat(e)}return""}})}),(0,v.jsxs)(eF.Legend,{children:[(0,v.jsx)(eF.LegendItem,{label:"Asking Rent (Listings)",color:"#005EE3"}),(0,v.jsx)(eF.LegendItem,{label:"Avg. Annual Rent (DLD)",color:"#87BC45 "})]})]})})]}),(0,v.jsx)("div",{className:"divider"})]}),(0,v.jsxs)("div",{className:l?"row":"",children:[(0,v.jsxs)("div",{className:l?"col-6":"",children:[(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:700,children:"Sales Listings and Transactions Trend"})}),(0,v.jsxs)("div",{className:"row mt-3 mb-3",children:[(0,v.jsx)("div",{className:"col-6",children:(0,v.jsxs)("div",{className:"trend-metric-container",children:[(0,v.jsxs)("div",{className:"metric-label",children:["Unique Listings"," ",6===s.value?"(P6M)":"(P12M)"]}),(0,v.jsx)("div",{className:"metric-value",children:(0,I.ZO)(6===s.value?y:P,{noDecimal:!0})||"N/A"})]})}),(0,v.jsx)("div",{className:"col-6",children:(0,v.jsxs)("div",{className:"trend-metric-container",children:[(0,v.jsxs)("div",{className:"metric-label",children:["Total Sales"," ",6===s.value?"(P6M)":"(P12M)"]}),(0,v.jsx)("div",{className:"metric-value",children:(0,I.ZO)(6===s.value?_:w,{noDecimal:!0})||"N/A"})]})})]}),(0,v.jsx)("div",{className:"row",children:(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)(eZ,{data:{datasets:[{data:null==G?void 0:G.map(e=>e.value),borderColor:"#49AA25",backgroundColor:"#49AA25",pointBorderColor:"#fff",pointBorderWidth:2,type:"line"},{data:null==$?void 0:$.map(e=>e.value),borderColor:"#B2D2FF",backgroundColor:"#B2D2FF",type:"bar"}],labels:es},getFormattedYTick:e=>(0,I.ZO)(Number(e),{noDecimal:!0}),onRenderTooltipLabel:e=>{let t=0===e.datasetIndex?"Total Sales":"Total Listings",a="number"==typeof(null==e?void 0:e.raw)?e.raw.toLocaleString():"N/A";return" ".concat(t,": ").concat(a)}}),(0,v.jsxs)(eZ.Legend,{children:[(0,v.jsx)(eZ.LegendItem,{label:"Total Sales",color:"#49AA25"}),(0,v.jsx)(eZ.LegendItem,{label:"Total Listings",color:"#B2D2FF",type:"bar"})]})]})}),(0,v.jsx)("div",{className:"divider ".concat(l?"d-none":"")})]}),(0,v.jsxs)("div",{className:l?"col-6":"",children:[(0,v.jsx)("div",{className:"my-3 ".concat(l?" ":""),children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:700,children:"Rent Listings and Contracts Trend"})}),(0,v.jsxs)("div",{className:"row mt-3 mb-3",children:[(0,v.jsx)("div",{className:"col-6 ".concat(""),children:(0,v.jsxs)("div",{className:"trend-metric-container",children:[(0,v.jsxs)("div",{className:"metric-label",children:["Unique Listings"," ",6===s.value?"(P6M)":"(P12M)"]}),(0,v.jsx)("div",{className:"metric-value",children:(0,I.ZO)(6===s.value?A:T,{noDecimal:!0})||"N/A"})]})}),(0,v.jsx)("div",{className:"col-6 ".concat(""),children:(0,v.jsxs)("div",{className:"trend-metric-container",children:[(0,v.jsxs)("div",{className:"metric-label",children:["Total Contracts"," ",6===s.value?"(P6M)":"(P12M)"]}),(0,v.jsx)("div",{className:"metric-value",children:(0,I.ZO)(6===s.value?D:Z,{noDecimal:!0})||"N/A"})]})})]}),(0,v.jsx)("div",{className:"row ".concat(l?" ":""),children:(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)(eZ,{data:{datasets:[{data:null==X?void 0:X.map(e=>e.value),borderColor:"#49AA25",backgroundColor:"#49AA25",pointBorderColor:"#fff",pointBorderWidth:2,type:"line"},{data:null==ee?void 0:ee.map(e=>e.value),borderColor:"#B2D2FF",backgroundColor:"#B2D2FF",type:"bar"}],labels:en},getFormattedYTick:e=>(0,I.ZO)(Number(e),{noDecimal:!0}),onRenderTooltipLabel:e=>{let t=0===e.datasetIndex?"Total Rent Contracts":"Total Rent Listings",a="number"==typeof(null==e?void 0:e.raw)?e.raw.toLocaleString():"N/A";return" ".concat(t,": ").concat(a)}}),(0,v.jsxs)(eZ.Legend,{children:[(0,v.jsx)(eZ.LegendItem,{label:"Total Rent Contracts",color:"#49AA25"}),(0,v.jsx)(eZ.LegendItem,{label:"Total Rent Listings",color:"#B2D2FF",type:"bar"})]})]})})]})]}),(0,v.jsx)("div",{className:"divider"}),(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:700,children:"Transaction History"})}),(0,v.jsxs)("div",{className:l?"row":"",children:[(0,v.jsxs)("div",{className:l?"col-6":"",children:[(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:700,children:"Sales History"})}),(0,v.jsx)("div",{className:"row",children:(0,v.jsxs)("div",{className:"col-12",children:[(0,v.jsx)(eZ,{data:e_,onRenderTooltipLabel:e=>{let t=e_.datasets[1].data[e.dataIndex],a=e_.datasets[0].data[e.dataIndex],l="",s=0===e.datasetIndex?"Ready":"Off-Plan";"number"==typeof(null==e?void 0:e.raw)&&(l=(0,E.RE)(e.raw,!0,void 0,!1,{maximumFractionDigits:0,minimumFractionDigits:0}));let n=(0,E.RE)(t+a,!0,void 0,!1,{maximumFractionDigits:0,minimumFractionDigits:0});return["".concat(s,": ").concat(l),"Total: ".concat(n)]}}),(0,v.jsxs)(eZ.Legend,{children:[(0,v.jsx)(eZ.LegendItem,{label:"Ready",color:"#49AA25",type:"bar"}),(0,v.jsx)(eZ.LegendItem,{label:"Off-Plan",color:"#005EE3",type:"bar"})]})]})}),(0,v.jsx)("div",{className:"divider ".concat(l?"d-none":"")})]}),(0,v.jsxs)("div",{className:l?"col-6":"",children:[(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:700,children:"Rent History"})}),(0,v.jsx)("div",{className:"row",children:(0,v.jsxs)("div",{className:"col-12",children:[(0,v.jsx)(eZ,{data:ew,onRenderTooltipLabel:e=>{let t=ew.datasets[1].data[e.dataIndex],a=ew.datasets[0].data[e.dataIndex],l="",s=0===e.datasetIndex?"Renew Contracts":"New Contracts";"number"==typeof(null==e?void 0:e.raw)&&(l=(0,E.RE)(e.raw,!0,void 0,!1,{maximumFractionDigits:0,minimumFractionDigits:0}));let n=(0,E.RE)(t+a,!0,void 0,!1,{maximumFractionDigits:0,minimumFractionDigits:0});return["".concat(s,": ").concat(l),"Total: ".concat(n)]}}),(0,v.jsxs)(eZ.Legend,{children:[(0,v.jsx)(eZ.LegendItem,{label:"Renew Contracts",color:"#005EE3",type:"bar"}),(0,v.jsx)(eZ.LegendItem,{label:"New contracts",color:"#27AEEF",type:"bar"})]})]})})]})]})]})}var eR=a(46678);let eW=e=>"FINISHED"===e?"/icons/ready-to-move.svg":["ACTIVE","PENDING","NOT_STARTED"].includes(e||"")?"/icons/off-plan.svg":"/icons/dev-status.svg",eq=e=>e["Property Type"]&&"all"!==e["Property Type"].toString().toLowerCase()?[e["Property Type"]]:e.no_of_units&&e.no_of_units>0?["Apartment"]:e.no_of_villas&&e.no_of_villas>0?["Villa"]:[],ez=(e,t,a,l,s)=>{if(!a)return e;if(t){var n;return"".concat(a,"_Image_").concat((null!==(n=null!=l?l:s)&&void 0!==n?n:0)+1)}};var eB=a(10279),eH=a(6406);a(97425),a(49608);var eY=x.memo(e=>{var t,a;let{url:l,name:s,onClose:n,images:i,isFullscreen:r,projectName:c}=e,[o,d]=x.useState(!0),[m,u]=x.useState({}),p=null===(t=s.split(".").pop())||void 0===t?void 0:t.toLowerCase(),[h,j]=x.useState(0),g=i||[],f=Math.max(0,g.findIndex(e=>e.url===l)),b=e=>{u(t=>({...t,[e]:!1}))};return x.useEffect(()=>{[h-1,h,h+1].filter(e=>e>=0&&e<i.length).forEach(e=>{if(!i[e].url)return;let t=new Image;t.src=i[e].url,t.onload=()=>b(e)})},[h,i]),(0,v.jsx)("div",{className:"document-viewer-overlay ".concat(r?"is-fullscreen":""),children:(0,v.jsxs)("div",{className:"document-viewer-container",children:[(0,v.jsxs)("div",{className:"document-viewer-header",children:[(0,v.jsx)(C.ZP,{variant:C.sT.h5,children:"pdf"===p?ez(s,!1,c):ez((null===(a=g[h])||void 0===a?void 0:a.name)||s,!0,c,void 0,h)}),(0,v.jsx)("button",{onClick:n,className:"close-button",children:(0,v.jsx)(S.J,{icon:"/icons/close.svg",size:20})})]}),(0,v.jsxs)("div",{className:"document-viewer-content",children:[o&&(0,v.jsx)("div",{className:"loading-spinner",children:(0,v.jsx)(eB.default,{animation:"border",role:"status","aria-hidden":"true"})}),(0,v.jsx)(eH.Z,{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,arrows:!0,initialSlide:f>=0?f:0,beforeChange:(e,t)=>{u(e=>({...e,[t]:!0}))},afterChange:e=>j(e),className:"image-slider",children:i.map((e,t)=>(0,v.jsxs)("div",{className:"slider-image-container",children:[!1!==m[t]&&(0,v.jsx)("div",{className:"loading-spinner",children:(0,v.jsx)(eB.default,{animation:"border",role:"status","aria-hidden":"true"})}),(0,v.jsx)("img",{src:e.url,alt:e.name,onLoad:()=>b(t),style:{display:!1===m[t]?"block":"none"},className:"slider-image"})]},t))})]})]})})}),eU=a(46496);a(78846);let eV={preferredLocations:[],selectedMasterCommunityOptions:[]};var eQ=x.memo(e=>{let{isMobile:t,onView:a,isSingleProject:l,assetImages:s,projectName:n,isFullscreen:i,projectData:r,onProjectNameClick:c}=e,[o,d]=x.useState(0),[m,u]=x.useState(null),p=s.filter(e=>!e.name.toLowerCase().includes("_cover")),h=(null==r?void 0:r.development_status)==="FINISHED"?"Ready":"Off-Plan",j=(e,t)=>{u({url:e,name:t})},g=eW(null==r?void 0:r.development_status),f=x.useMemo(()=>eq(r),[r]);return(0,v.jsxs)("div",{className:"document-section",children:[0===p.length&&(0,v.jsx)("div",{className:"default-image-container",children:(0,v.jsx)(eR.Z,{url:"https://propai.s3.ap-south-1.amazonaws.com/property-images/property-1.jpg"})}),r&&(0,v.jsxs)("div",{className:"project-details d-flex justify-content-between px-2 py-1",children:[(0,v.jsxs)("div",{className:"details-header",onClick:()=>{null==c||c(null==r?void 0:r["project_name_prop-ai"])},style:{cursor:"pointer"},children:[(0,v.jsxs)(C.ZP,{variant:C.sT.h5,weight:700,className:"location-header d-flex align-items-center gap-2",children:[(0,v.jsx)(S.J,{icon:g,size:25,alt:h}),null==r?void 0:r.project_name_label]}),(0,v.jsx)("div",{className:"property-types",children:f.map((e,t)=>(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(C.ZP,{variant:C.sT.bodySmall,weight:400,className:"property-type",children:e}),t<f.length-1&&(0,v.jsx)(C.ZP,{variant:C.sT.bodySmall,weight:400,className:"separator",children:"\xa0|\xa0"})]},e))})]}),(0,v.jsxs)("div",{className:"metrics-item mt-2",children:[(0,v.jsx)("div",{className:"label",children:"Developer"}),(null==r?void 0:r.developer_group)==="EMAAR"?(0,v.jsx)("img",{src:"/images/emaar-logo.svg",alt:"EMAAR logo",className:"details-logo"}):(0,v.jsx)("div",{className:"developer-name",children:null==r?void 0:r.developer_group})]})]}),p.length>0?(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"image-slider-container",children:[(0,v.jsx)(eH.Z,{dots:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!1,arrows:!0,afterChange:e=>d(e),className:"image-slider",children:s.map((e,t)=>(0,v.jsx)("div",{className:"slider-image-container",children:(0,v.jsx)("img",{src:e.url,alt:e.name,onClick:()=>a(e.url,e.name),className:"slider-image"})},t))}),(0,v.jsxs)("div",{className:"image-overlay",children:[(0,v.jsx)("div",{className:"indicator bg-primary",children:h}),s.length>0&&(0,v.jsx)("button",{className:"fullscreen",onClick:()=>j(s[o].url,s[o].name)})]})]})}):(0,v.jsx)("div",{className:"document-error-message",children:"Images are not available"}),m&&(0,v.jsx)(eY,{url:m.url,name:m.name,onClose:()=>{u(null)},images:s,isFullscreen:i,projectName:null==r?void 0:r.project_name_label})]})});function eJ(e){let{projectData:t,isSingleProject:a=!1,assetImages:l,isFullscreen:s,selectedSort:n,onProjectNameClick:i,isLoading:r=!1}=e,{values:c,setFieldValue:o}=(0,w.u6)(),d=(0,eU.s)(),[m,u]=x.useState(null),[p,h]=x.useState(0),j=eW(null==t?void 0:t.development_status),g=(null==t?void 0:t.development_status)==="FINISHED"?"Ready":"Off-Plan",f=(e,t)=>{u({url:e,name:t})},b=null==l?void 0:l.find(e=>"string"==typeof e.name&&e.name.includes("_cover")),N=(null==l?void 0:l.filter(e=>!("string"==typeof e.name&&e.name.includes("_cover"))))||[],y=b?[b,...N]:l||[],P="https://propai.s3.ap-south-1.amazonaws.com/property-images/property-1.jpg",_={dots:!1,infinite:!0,speed:500,arrows:y.length>1,slidesToShow:1,slidesToScroll:1,afterChange:e=>{h(e)}},L=y[p]||{url:P,name:"property_image"},k=x.useMemo(()=>eq(t),[t]),A={rent_per_sqft_p6m:{noDecimal:!0,unit:"AED"},price_per_sqft_p6m:{noDecimal:!0,unit:"AED"},sales_price_median_p6m:{noDecimal:!0,unit:"AED"},price_change_yoy:{oneDecimal:!0,addPercentage:!0,unit:""},rental_yield_p6m:{oneDecimal:!0,addPercentage:!0,multiplyBy100:!0,unit:""},service_charges_sqft:{oneDecimal:!0,unit:"AED"},number_listings:{noDecimal:!0,unit:""},total_rent_contracts_p6m:{noDecimal:!0,unit:""},total_rent_contracts_p12m:{noDecimal:!0,unit:""},total_sales_p6m:{noDecimal:!0,unit:""},total_sales_p12m:{noDecimal:!0,unit:""},annual_rent_median_p12m:{noDecimal:!0,unit:"AED"}},T=(()=>{var e;let a=void 0!==t[e=n.value.trim()]?t[e]:void 0!==t["".concat(e,"_p6m")]?t["".concat(e,"_p6m")]:void 0!==t["".concat(e,"_p12m")]?t["".concat(e,"_p12m")]:null,l=A[n.value.trim()]||A.price_per_sqft_p6m;return{value:(0,I.ZO)(a,l),unit:"AED"===l.unit?(0,v.jsx)(V.W,{}):l.unit}})(),D=(c.preferredLocations||[]).some(e=>e["project_name_prop-ai"]===t["project_name_prop-ai"]),Z=()=>(0,v.jsx)("div",{className:"loading-indicator",children:(0,v.jsx)("div",{className:"loading-pulse"})});return(0,v.jsxs)("div",{className:"project-documents-card ".concat(s?"fullscreen-mode":""),children:[!a&&(0,v.jsxs)("div",{className:"card-main-content",children:[(0,v.jsxs)("div",{className:"image-container",children:[y.length>0?(0,v.jsx)(eH.Z,{..._,children:y.map(e=>(0,v.jsx)("div",{className:"slider-image-container",children:(0,v.jsx)(eR.Z,{url:e.url||P})},e.url))}):(0,v.jsx)(eR.Z,{url:P}),(0,v.jsxs)("div",{className:"image-overlay",children:[(0,v.jsx)("div",{className:"indicator bg-primary",children:g}),y.length>0&&(0,v.jsx)("button",{className:"fullscreen",type:"button",onClick:()=>f(L.url,L.name)})]})]}),(0,v.jsxs)("div",{className:"details-container",children:[(0,v.jsx)("div",{className:"details-header",onClick:()=>{null==i||i(null==t?void 0:t["project_name_prop-ai"])},style:{cursor:"pointer"},children:(0,v.jsxs)(C.ZP,{variant:C.sT.body3,weight:700,className:"location-header d-flex align-items-center gap-2",children:[(0,v.jsx)(S.J,{icon:j,size:25,alt:g}),null==t?void 0:t.project_name_label]})}),(0,v.jsx)("div",{className:"property-types",children:k.map((e,t)=>(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(C.ZP,{variant:C.sT.bodyExtraSmall,weight:400,className:"property-type",children:e}),t<k.length-1&&(0,v.jsx)(C.ZP,{variant:C.sT.bodyExtraSmall,weight:400,className:"separator",children:"\xa0|\xa0"})]},e))}),(0,v.jsxs)("div",{className:"metrics-content mb-2  ".concat(d?"mobile-view":""," ").concat(s?"fullscreen-view":""),children:[(0,v.jsxs)("div",{className:"metrics-item mt-2",children:[(0,v.jsx)("div",{className:"label",children:(0,v.jsx)(C.ZP,{variant:C.sT.bodySmall,weight:700,className:"location-header d-flex align-items-center gap-2",children:"Developer"})}),r?(0,v.jsx)(Z,{}):(null==t?void 0:t.developer_group)==="EMAAR"?(0,v.jsx)("img",{src:"/images/emaar-logo.svg",alt:"EMAAR logo",className:"details-logo"}):(0,v.jsx)("div",{className:"developer-name",children:(0,v.jsx)(C.ZP,{variant:C.sT.bodyExtraSmall,weight:400,className:"location-header d-flex align-items-center gap-2",children:null==t?void 0:t.developer_group})})]}),n.value.trim()&&(0,v.jsxs)("div",{className:"metrics-item mt-2",children:[(0,v.jsx)("div",{className:"label",children:n.label}),r?(0,v.jsx)(Z,{}):(0,v.jsxs)("div",{className:"value",children:[T.unit&&(0,v.jsx)("div",{className:"unit",children:T.unit}),"\xa0",(0,v.jsx)(C.ZP,{variant:C.sT.bodySmall,weight:700,className:"location-header d-flex align-items-center gap-2",children:T.value})]})]})]}),(0,v.jsx)("div",{className:"documents-card-footer",children:(0,v.jsx)("div",{onClick:()=>{let e=c.preferredLocations||[],a=t["prop-ai_location_key_project"];e.some(e=>e["prop-ai_location_key_project"]===a)?o("preferredLocations",e.filter(e=>e["prop-ai_location_key_project"]!==a)):o("preferredLocations",[...e,t])},style:{cursor:"pointer"},children:(0,v.jsx)(C.ZP,{variant:D?C.sT.bodyExtraSmall:C.sT.bodySmall,weight:700,color:D?C.HL.error:C.HL.primary,children:D?"Remove from Watchlist":"Add to Watchlist"})})})]})]}),a&&(0,v.jsx)("div",{className:"documents-expanded-content ".concat(s?"is-fullscreen":""," ").concat(a?"single-project":""),children:(0,v.jsx)(eQ,{isMobile:d,onView:f,isSingleProject:a,assetImages:l,projectName:null==t?void 0:t.project_name_label,isFullscreen:s,projectData:t,onProjectNameClick:i})}),m&&(0,v.jsx)(eY,{url:m.url,name:m.name,onClose:()=>{u(null)},images:l,isFullscreen:s,projectName:null==t?void 0:t.project_name_label})]})}({...eV});var eK=a(4500),eG=a(6398);function e$(e){let{options:t,selectedOptions:a,onChange:l,placeholder:s="Search...",getOptionLabel:n=e=>e.label,className:i}=e,[r,c]=x.useState(!1),[o,d]=x.useState(""),m=x.useRef(null),u=x.useMemo(()=>o?(0,eh.Lu)(t,o,{keys:["label","value"]}):t,[t,o]),p=e=>{l(a.some(t=>t.value===e.value)?a.filter(t=>t.value!==e.value):[...a,e])};x.useEffect(()=>{function e(e){m.current&&!m.current.contains(e.target)&&c(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let h=Math.min(50*u.length,300);return(0,v.jsxs)("div",{className:"map-multi-checkbox-selector ".concat(i),ref:m,children:[(0,v.jsxs)("div",{className:"search-container",onClick:()=>c(!0),children:[(0,v.jsx)(S.J,{icon:"/icons/search.svg",size:18}),(0,v.jsx)("input",{type:"text",placeholder:s,value:o,onChange:e=>{d(e.target.value),c(!0)},onFocus:()=>{c(!0)},onClick:()=>c(!0)})]}),r&&(0,v.jsx)("div",{className:"options-list",style:{height:h},children:(0,v.jsx)(eG.ZP,{children:e=>{let{width:t}=e;return(0,v.jsx)(eK.t7,{height:h,width:t,itemCount:u.length,itemSize:50,children:e=>{let{index:t,style:l}=e,s=u[t],i=a.some(e=>e.value===s.value);return(0,v.jsxs)("div",{style:l,className:"option-item",onClick:()=>{p(s)},children:[(0,v.jsx)("input",{type:"checkbox",checked:i,readOnly:!0}),(0,v.jsx)("span",{children:n(s)})]})}})}})})]})}a(55226);var eX=a(31896);function e0(e){let{selectedDevelopers:t,onClear:a}=e,l=e=>{a(e||[])};return(0,v.jsx)("div",{className:"selected-developers-card",children:(0,v.jsx)("div",{className:"developers-list",children:t.length>0&&t.map((e,a)=>(0,v.jsxs)("div",{className:"developer-tag",children:[e.label,(0,v.jsx)(S.J,{icon:"/icons/close-white.svg",backgroundColor:"#005ee3",size:14,alt:"Remove",onClick:()=>{let e=[...t];e.splice(a,1),l(e)}})]},a))})})}a(48472);var e1=a(33544),e2=a(88322),e6=a(98401);let e5=e=>e1.c.DropdownIndicator&&(0,v.jsx)(e1.c.DropdownIndicator,{...e,children:(0,v.jsx)(S.J,{icon:"/icons/chevron-down-grey.svg",alt:"",size:20})});function e3(e){let{name:t,label:a,options:l,onChange:s,onInputChange:n,menuPlacement:i,customFieldError:r,fallbackValue:c=null,isClearable:o=!1,isDisabled:d=!1,icon:m="",optimizedMenuItemSize:u=40,...p}=e,[h,x,j]=(0,w.U$)(t),g=x.touched&&x.error||r,f=(null==l?void 0:l.find(e=>{let{value:t}=e;return t===h.value}))||c,b=0===h.value||h.value;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"formfield-root".concat(g?" formfield-invalid":"").concat(b?" has-value":"").concat(m?" has-start-icon":""),children:[a&&(0,v.jsx)("label",{className:"formfield-label",htmlFor:t,children:a}),m&&(0,v.jsx)(e2.Z,{src:m,width:32,height:32,alt:"",className:"pe-1"}),(0,v.jsx)(eA.ZP,{className:"formfield-select",classNamePrefix:"formfield-select",placeholder:"",components:{IndicatorSeparator:()=>null,MenuList:(null==l?void 0:l.length)>1e3?e=>(0,e6.Z)({...e,itemSize:u}):e1.c.MenuList,DropdownIndicator:e5},...p,value:f,options:l,onChange:(e,t)=>{j.setValue((null==e?void 0:e.value)||c),s&&s(null==e?void 0:e.value,t)},onInputChange:(e,t)=>{n&&n(e,t)},onBlur:()=>{j.setTouched(!0)},isOptionDisabled:e=>!!(null==e?void 0:e.disabled),isClearable:o,isDisabled:d})]}),(0,v.jsx)("div",{className:"formfield-error",style:{display:"none"},children:(0,v.jsx)(L.M,{children:g&&(0,v.jsx)(k.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:x.error||r})})})]})}var e4=a(7310),e7=a.n(e4),e9=a(1890);let e8=[{value:"price_per_sqft_p6m",label:"Price per Sqft"},{value:"sales_price_median_p6m",label:"Sale Price"},{value:"total_sales_p6m",label:"Sales Transactions (P6M)"},{value:"total_sales_p12m",label:"Sales Transactions (P12M)"},{value:"price_change_yoy",label:"Price Change (YoY)"},{value:"rent_per_sqft_p6m",label:"Rent per Sqft"},{value:"annual_rent_median_p12m",label:"Annual Rent"},{value:"total_rent_contracts_p6m",label:"Rent Contracts (P6M)"},{value:"total_rent_contracts_p12m",label:"Rent Contracts (P12M)"},{value:"rental_yield_p6m",label:"Rental Yield (Past 6 Months)"},{value:"number_listings",label:"No. of Listings"},{value:"service_charges_sqft",label:"Service Charge"}],te={type:"All",developer:[],status:"All",beds:"All",project:[]},tt={label:"All",value:"All"},ta=[tt,{label:"Ready",value:"Ready"},{label:"Off-Plan",value:"Off-Plan"}],tl=[tt,{label:"Apartment",value:"Apartment"},{label:"Villa",value:"Villa"}],ts=[tt,{label:"Studio",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"},{label:"7+",value:"7+"},{label:"Penthouse",value:"99"}];function tn(e){let{selectedArea:t,isFullscreen:a,onProjectNameClick:l,onStateChange:s}=e,n=(0,j.useSearchParams)(),i=(0,e9._I)(n),[r]=(0,eP.ml)(),[c]=(0,eP.PN)(),{data:o,isLoading:d}=(0,eP.S4)({}),[m,u]=(0,x.useState)(!1),p=(0,eU.s)(),[h,g]=(0,x.useState)([]),[f,b]=(0,x.useState)(null),[y,P]=(0,x.useState)(!1),[_,w]=(0,x.useState)(!1),[L,k]=(0,x.useState)(!1),A=(0,x.useRef)(null),T=(0,x.useRef)(te),[D,Z]=(0,x.useState)([]),[F,M]=(0,x.useState)("desc"),[I,E]=(0,x.useState)(e8[0]),[O,R]=(0,x.useState)([]),[W,q]=(0,x.useState)([]),[z,B]=(0,x.useState)(()=>({type:i.filterType||te.type,status:i.filterStatus||te.status,beds:i.filterBeds||te.beds,developer:i.filterDeveloper?i.filterDeveloper.split(","):te.developer,project:i.filterProject?i.filterProject.split(","):te.project}));(0,x.useRef)(z).current=z,(0,x.useEffect)(()=>{if(!(null==o?void 0:o.data)||!t)return;let e=o.data,a=new Set,l=[];t.type===eX.m.area?l=e.filter(e=>e.areaName===t.areaName):t.type===eX.m.masterProject&&(l=e.filter(e=>e.masterProjectPropAi===t.masterProjectName)),l.forEach(e=>{e.developerName&&a.add(e.developerName)});let s=l.map(e=>({label:e.projectName,value:e.projectName,originalData:e})),n=Array.from(a).map(e=>({label:e,value:e}));R(s),q([]),Z(n),H(1,!0)},[o,t]);let H=(0,x.useCallback)(e7()(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(t)try{if(1===e?(P(!0),w(!1)):k(!0),t.type===eX.m.project){let e={"area_name_prop-ai":t.areaName,"master_project_prop-ai":t.masterProjectPropAi,"project_name_prop-ai":t.projectName,project_name_label:t.label||t.projectName,developer_group:t.developerGroup,development_status:t.developmentStatus};try{let[a]=await Promise.all([r({body:{areaNamePropAi:t.areaName,masterProjectPropAi:t.masterProjectPropAi,projectNamePropAi:t.projectName}}).unwrap()]),l={...e,images:(null==a?void 0:a.images)||[],imagesLoading:!1};g([l]),b({current_page:1,page_size:1,total_count:1,total_pages:1,has_next:!1,has_prev:!1})}catch(e){console.error("Error fetching project assets:",e),g([])}}else{let l=Y(),s="asc"===F?1:-1,n=await c({key:t.propAiLocationKey,locationType:"area"===t.type?"areas":"master_projects",body:{filters:l,sort_by:I.value,sort_order:s,page:e}}).unwrap(),i=n.data.filter(e=>"reviewed"===e.data_status),o=await Promise.all(i.map(async e=>{try{let[t]=await Promise.all([r({body:{areaNamePropAi:e["area_name_prop-ai"],masterProjectPropAi:e["master_project_prop-ai"],projectNamePropAi:e["project_name_prop-ai"]}}).unwrap()]);return{...e,images:(null==t?void 0:t.images)||[],imagesLoading:!1}}catch(t){return console.error("Error fetching assets for project:",e["project_name_prop-ai"],t),{...e,images:[],imagesLoading:!1,hasDocuments:!1}}}));a?(g(o),w(!0)):g(e=>[...e,...o]),b(n.pagination)}}catch(e){console.error("Error fetching projects:",e),w(!0)}finally{P(!1),k(!1)}},300),[t,I,F]),Y=(0,x.useCallback)(()=>{let e={"Property Type":"All"===T.current.type?"All":T.current.type,data_status:"reviewed"};return"All"===T.current.beds?e["Number of Bedrooms"]="All":"7+"===T.current.beds?e["Number of Bedrooms"]={$gt:7,$lt:99}:e["Number of Bedrooms"]=Number(T.current.beds),T.current.developer&&T.current.developer.length>0&&(e.developer_name={$in:T.current.developer}),T.current.project&&T.current.project.length>0&&(e["project_name_prop-ai"]={$in:T.current.project}),T.current.status&&"All"!==T.current.status?e.development_status="Ready"===T.current.status?"FINISHED":{$ne:"FINISHED"}:e["Development Status"]="All",e},[]),U=(0,x.useCallback)((e,t)=>{let a={...T.current,[e]:t};T.current=a,B(a),H(1,!0),null==s||s({activeTab:"Projects",filters:{type:a.type,status:a.status,developer:a.developer,project:a.project}})},[H,s]),V=(0,x.useCallback)(e=>{U("developer",e.map(e=>e.value))},[U]),Q=(0,x.useCallback)(e=>{q(e),U("project",e.map(e=>e.value))},[U]),J=(0,x.useCallback)(e=>{let t=e||[];q(t),U("project",t.map(e=>e.value))},[U]);(0,x.useEffect)(()=>{H(1,!0)},[t,H]),(0,x.useEffect)(()=>{let e=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&(null==f?void 0:f.has_next)&&!L&&_&&H(f.current_page+1,!1)},{root:document.querySelector(".hide-scrollbar"),threshold:.1}),t=A.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[f,L,_,H]);let K=(0,x.useCallback)(()=>{M(e=>"asc"===e?"desc":"asc")},[]),G=(0,x.useCallback)(()=>{u(e=>!e)},[]);return(0,v.jsxs)("div",{className:"container-fluid h-full",children:[((null==t?void 0:t.type)===eX.m.area||(null==t?void 0:t.type)===eX.m.masterProject)&&(0,v.jsx)("div",{className:"row",children:(0,v.jsxs)("div",{className:"filter-inputs-container documents-input-container",children:[(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col",children:d?(0,v.jsx)("div",{className:"text-center",children:(0,v.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,v.jsx)("span",{className:"visually-hidden",children:"Loading projects..."})})}):(0,v.jsx)(e$,{options:O,selectedOptions:W,onChange:Q,placeholder:"Select projects...",getOptionLabel:e=>e.label,className:"projects-dropdown"})})}),(0,v.jsx)("div",{className:"row",children:W.length>0&&(0,v.jsx)(e0,{selectedDevelopers:W,onClear:J})})]})}),((null==t?void 0:t.type)===eX.m.area||(null==t?void 0:t.type)===eX.m.masterProject)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"filter-container d-flex justify-content-between mt-3",children:[(0,v.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,v.jsx)(S.J,{icon:"/icons/ic_twotone-sort.svg",size:p?17:20}),(0,v.jsx)(C.ZP,{variant:C.sT.body,weight:700,className:"property-type",children:"Sort by:"})]}),(0,v.jsxs)("div",{className:"sort-dropdown  d-flex align-items-center",children:[(0,v.jsx)(S.J,{icon:"asc"===F?"/icons/ep_sort-descending.svg":"/icons/ep_sort-ascending.svg",alt:"asc"===F?"Ascending":"Descending",onClick:K,size:p?17:20}),(0,v.jsx)(eA.ZP,{className:"sort-select",classNamePrefix:"sort-select",options:e8,value:I,onChange:e=>{e&&(E(e),M("desc"))},components:{IndicatorSeparator:()=>null},isSearchable:!1,styles:{control:e=>({...e,border:"none",boxShadow:"none",cursor:"pointer",minWidth:"200px","&:hover":{border:"none"}}),singleValue:e=>({...e,fontWeight:"bold",fontSize:p?"0.975rem":"1rem"}),menu:e=>({...e,minWidth:"200px"}),option:e=>({...e,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:p?"0.975rem":"1rem"})}})]})]}),(0,v.jsx)("div",{className:"d-flex justify-content-end",children:(0,v.jsxs)("div",{className:"advanced-filter-btn ".concat(m?"advanced-filter-close":""," ms-auto"),onClick:G,children:[(0,v.jsx)("span",{className:"title",children:"Advanced Filters"}),(0,v.jsx)("div",{className:"icon"})]})}),m&&(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"filter-inputs-container",children:(0,v.jsxs)(N.l0,{initialValues:z,onSubmit:()=>{},children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:a?"col-3 mb-2":"col-6 mb-2",children:(0,v.jsx)(e3,{name:"type",label:"Type",options:tl,value:z.type,onChange:e=>U("type",e)})}),(0,v.jsx)("div",{className:a?"col-3 mb-2":"col-6 mb-2",children:(0,v.jsx)(e3,{name:"status",label:"Status",options:ta,value:z.status,onChange:e=>U("status",e)})}),(0,v.jsx)("div",{className:a?"col-3 mb-2":"col-6 mb-2",children:(0,v.jsx)(e3,{name:"beds",label:"Bedrooms",options:ts,value:z.beds,onChange:e=>U("beds",e)})}),(0,v.jsx)("div",{className:a?"col-3 mb-2":"col-6 mb-2",children:(0,v.jsx)(e$,{options:D,selectedOptions:D.filter(e=>(T.current.developer||[]).includes(e.value)),onChange:V,placeholder:"Select developers...",getOptionLabel:e=>e.label,className:"projects-developer-dropdown"})})]}),(0,v.jsx)("div",{className:"row",children:(T.current.developer||[]).length>0&&(0,v.jsx)(e0,{selectedDevelopers:(T.current.developer||[]).map(e=>{var t;return{value:e,label:(null===(t=D.find(t=>t.value===e))||void 0===t?void 0:t.label)||e}}),onClear:e=>{V(e||[])}})})]})})}),(0,v.jsx)("div",{className:"divider my-3"})]}),(0,v.jsx)("div",{style:{overflowY:"auto",overflowX:"hidden",scrollbarWidth:"none",msOverflowStyle:"none",maxHeight:a?"calc(100vh - 10vh)":"70vh",height:a?"100vh":"auto",position:"relative"},className:"hide-scrollbar",children:(0,v.jsx)("div",{className:"row mt-3",children:!_&&y?(0,v.jsx)("div",{className:"text-center d-flex justify-content-center align-items-center",style:{minHeight:"100px"},children:(0,v.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,v.jsx)("span",{className:"visually-hidden",children:"Loading projects..."})})}):_&&0===h.length?(0,v.jsx)("div",{className:"text-center d-flex justify-content-center align-items-center",style:{minHeight:"100px"},children:"No projects found with the current filters"}):(0,v.jsxs)("div",{className:"row",style:{minHeight:"250px"},children:[h.map(e=>(0,v.jsx)("div",{className:1===h.length&&a?"col-12 pb-3 h-full":a?"col-md-12 pb-3 h-full":"col-12 pb-3 h-full",children:(0,v.jsx)(eJ,{projectData:e,isSingleProject:1===h.length,assetImages:e.images||[],isFullscreen:a,selectedSort:I,onProjectNameClick:l})},e["project_name_prop-ai"])),(0,v.jsx)("div",{ref:A,style:{height:"20px"}}),L&&(0,v.jsx)("div",{className:"col-12 text-center my-3",children:"Loading more projects..."})]})})})]})}let ti=(e,t)=>{let a={"Development Status":t,"Number of Bedrooms":t,"Property Type":t};return e&&(e.status&&(a["Development Status"]=e.status),Number.isNaN(Number(e.beds))||(a["Number of Bedrooms"]=parseInt(e.beds)),e.propertyType&&(a["Property Type"]=e.propertyType)),{filters:a}},tr=(e,t)=>{let a={};return e&&(e.status&&e.status!==t&&(a["Development Status"]=e.status),e.beds!==t&&(a["Number of Bedrooms"]=parseInt(e.beds)),e.propertyType&&e.propertyType!==t&&(a["Property Type"]=e.propertyType)),{filters:a}},tc={label:"All",value:"All"},to={[z.mQ.area]:"areas",[z.mQ.masterProject]:"master_projects",[z.mQ.project]:"projects"},td={propertyType:tc.value,beds:tc.value,status:tc.value},tm=["Key Metrics","Trends","Projects"],tu=e=>e&&"All"!==e?e:"All";function tp(e){let{selectedArea:t,isFullscreen:a,onProjectNameClick:l,onStateChange:s}=e,n=(0,j.useSearchParams)(),i=(0,e9._I)(n),[r,c]=x.useState(()=>{let e=i.detailedTab;return e?tm.indexOf(e):0}),o=x.useRef(null),d=x.useRef(!0),m=x.useRef(!0),[u,p]=x.useState(()=>({propertyType:i.filterType||td.propertyType,beds:tu(i.filterBeds),status:i.filterStatus||td.status})),[h,{isLoading:g,data:f}]=(0,eP.UH)(),[b,{data:y,isLoading:P}]=(0,eP.Qu)(),[_,w]=x.useState([tc]),[S,C]=x.useState([tc]),[L,k]=x.useState([tc]),A=x.useMemo(()=>{if(!g&&f){let e=Array.isArray(f["Number of Bedrooms"])?f["Number of Bedrooms"].map(String):[],t=Array.isArray(f["Property Type"])?f["Property Type"]:[],a=Array.isArray(f["Development Status"])?f["Development Status"]:[],l=e.includes(u.beds)||"All"===u.beds,s=t.includes(u.propertyType)||"All"===u.propertyType,n=a.includes(u.status)||"All"===u.status;return!(l&&s&&n)}return!1},[u,g,f]),[T,D]=x.useState({propertyType:"All",beds:"All",status:"All"});x.useEffect(()=>{(A||(null==t?void 0:t.propAiLocationKey)||r<=1)&&(i.filterType||i.filterBeds||i.filterStatus)&&(Z(td),F(td,!0),!1===A&&E(td))},[A,i.filterType,i.filterBeds,i.filterStatus,null==t?void 0:t.propAiLocationKey,r]),x.useEffect(()=>{if(d.current){d.current=!1;return}let e={activeTab:tm[r],filters:"Projects"===tm[r]?T:{propertyType:u.propertyType,beds:u.beds,status:u.status}};null==s||s(e)},[r,T,u.propertyType,u.beds,u.status]);let Z=x.useCallback(e=>{p(e),o.current&&o.current.setValues(e)},[]),F=x.useCallback(async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var l;let{propAiLocationKey:s,type:n}=t,i=tr(e,tc.value),r=await h({key:s,locationType:null!==(l=to[n])&&void 0!==l?l:to[z.mQ.project],body:i});if(a){let e=[tc],t=[tc],a=[tc],l=r.data;l&&((null==l?void 0:l["Number of Bedrooms"])&&l["Number of Bedrooms"].slice().sort((e,t)=>Number(e)-Number(t)).forEach(t=>{let a=String(t);e.push({label:"0"===a?"Studio":"99"===a?"Penthouse":a,value:a})}),(null==l?void 0:l["Development Status"])&&l["Development Status"].slice().sort().forEach(e=>{"All"!==e&&a.push({label:(0,I._E)(e),value:e})}),(null==l?void 0:l["Property Type"])&&l["Property Type"].slice().sort().forEach(e=>{"All"!==e&&t.push({label:e,value:e})})),k(t),C(a),w(e)}}},[t,h]),M=x.useCallback((e,t)=>{p(a=>{let l={...a,[e]:"beds"===e?tu(t):t};return o.current&&o.current.setValues(l),F(l),l})},[F]),E=x.useCallback(async e=>{if(t){let{propAiLocationKey:a,type:l}=t,s=to[l],n=ti(e,tc.value);await b({key:a,locationType:s,body:n})}},[t,b]),O=x.useCallback(async()=>{if(o.current&&!A){let e=o.current.values;await E(e)}},[E,A]);x.useEffect(()=>{(null==t?void 0:t.propAiLocationKey)&&(m.current?(F(u,!0).then(()=>{if(i.filterType||i.filterBeds||i.filterStatus){let e={propertyType:i.filterType||td.propertyType,beds:tu(i.filterBeds),status:i.filterStatus||td.status};Z(e),E(e)}else E(u)}),m.current=!1):(Z(td),F(td,!0),E(td)))},[null==t?void 0:t.propAiLocationKey,Z,F,E]);let R=x.useCallback(e=>{JSON.stringify(e.filters)!==JSON.stringify(T)&&D(e.filters)},[T]),W=r<=1,q=tm[r];return(0,v.jsxs)("div",{className:"detailed-map-location-metrics",children:[(0,v.jsx)("div",{className:"my-3",children:(0,v.jsx)(et,{tabs:tm,activeTabIdx:r,setActiveTabIdx:c,fullWidthTabs:!0})}),r<=1&&(0,v.jsxs)("div",{className:"filter-inputs-container ".concat(a?"fullscreen":""),children:[(0,v.jsx)(N.l0,{initialValues:u,onSubmit:()=>{},innerRef:o,enableReinitialize:!0,children:(0,v.jsx)("div",{className:"container-fluid ".concat(a?"fullscreen-row":""),children:(0,v.jsxs)("div",{className:"row g-2 ".concat(a?"align-items-baseline":" "),children:[(0,v.jsx)("div",{className:a?"col":"col-6",children:(0,v.jsx)(N.Ph,{name:"propertyType",label:"Type",options:L,value:u.propertyType,onChange:e=>M("propertyType",e)})}),(0,v.jsx)("div",{className:a?"col":"col-6",children:(0,v.jsx)(N.Ph,{name:"beds",label:"Beds",options:_,value:u.beds,onChange:e=>M("beds",e)})}),(0,v.jsx)("div",{className:a?"col":"col-6 mt-0",children:(0,v.jsx)(N.Ph,{name:"status",label:"Status",options:S,value:u.status,onChange:e=>M("status",e)})}),(0,v.jsx)("div",{className:a?"col":"col-6 mt-0",children:(0,v.jsxs)("button",{type:"button",className:"btn btn-primary mt-2 w-100",disabled:P||g||A,style:{padding:"0.75rem"},onClick:()=>O(),children:[g||P?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("span",{className:"spinner-border spinner-border-sm me-2"})}):"Update",g?"Loading Filters...":(0,v.jsx)(v.Fragment,{children:P?"Loading Metrics...":null})]})})]})})}),A&&(0,v.jsx)("div",{className:"filter-inputs-error",children:"Sorry we didn't find matching listings. Try changing the filters."})]}),W&&(0,v.jsxs)("div",{className:"data-loading-indicator ".concat(P?"visible":""),children:[(0,v.jsx)("div",{className:"spinner"}),(0,v.jsx)("div",{className:"text-content",children:"Loading Metrics..."})]}),"Key Metrics"===q&&(0,v.jsx)(ek,{selectedArea:t,filters:y,isFullscreen:a}),"Trends"===q&&(0,v.jsx)(eO,{selectedArea:t,trendsData:y,isFullscreen:a}),"Projects"===q&&(0,v.jsx)(tn,{selectedArea:t,onProjectNameClick:l,isFullscreen:a,onStateChange:R})]})}function th(e){let{selectedArea:t}=e,a=(0,eU.s)(),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e)return"-";if(a&&(t.isCurrency||t.noDecimal||t.oneDecimal)){let a=t.oneDecimal?1:t.noDecimal?0:1,l=(0,E.gs)(e,!0,a);return t.addPercentage?"".concat(l,"%"):l}return(0,I.ZO)(e,t)},s=(e,t)=>a?t:e,n=z.NP.insufficient===(null==t?void 0:t.dataConfidenceSales),i=z.NP.insufficient===(null==t?void 0:t.dataConfidenceYield);return(0,v.jsxs)("div",{className:"summarized-map-location-metrics",children:[(0,v.jsxs)("div",{className:"row g-0 mt-md-3",children:[(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,className:"metrics-header",children:s("Property Listings",(0,v.jsxs)(v.Fragment,{children:[" ","Property",(0,v.jsx)("br",{}),"Listings"," "]}))}),(0,v.jsx)("div",{className:"pt-1",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:600,className:"metrics-property",children:!!t&&(a?l(t.numberOfListings,{oneDecimal:!0}):(0,I.ZO)(t.numberOfListings,{noDecimal:!0}))})})]}),(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,className:"metrics-header",children:s("Below Fair Market Value",(0,v.jsxs)(v.Fragment,{children:[" ","Below",(0,v.jsx)("br",{}),"Fair Market Value"," "]}))}),(0,v.jsx)("div",{className:"pt-1",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:600,className:"metrics-property",children:!!t&&(a?l(t.belowFmvListings,{oneDecimal:!0}):(0,I.ZO)(t.belowFmvListings,{noDecimal:!0}))})})]})]}),(0,v.jsxs)("div",{className:"row g-0 mt-3",children:[(0,v.jsxs)("div",{className:"col",children:[(0,v.jsxs)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,className:"metrics-header",children:["Average",(0,v.jsx)("br",{}),"Rental Yield"]}),(0,v.jsx)("div",{className:"pt-1",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:600,className:"metrics-property",children:!!t&&(0,v.jsx)(v.Fragment,{children:i?(0,v.jsx)(ea,{children:"Insufficient Data"}):(0,I.ZO)(t.rentalYield,{addPercentage:!0,oneDecimal:!0,keepTrailingZero:!0})})})})]}),(0,v.jsxs)("div",{className:"col",children:[(0,v.jsxs)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,className:"metrics-header",children:["Price Change",(0,v.jsx)("br",{}),"12 Months"]}),(0,v.jsx)("div",{className:"pt-1",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:600,className:!t||null===t.priceChangeYoy||isNaN(t.priceChangeYoy)||n?"metrics-property":t.priceChangeYoy<0?"metrics-property text-danger":"metrics-property text-success",children:!!t&&(0,v.jsx)(v.Fragment,{children:n?(0,v.jsx)(ea,{children:"Insufficient Data"}):(0,I.ZO)(t.priceChangeYoy,{addPercentage:!0,oneDecimal:!0})})})})]})]}),(0,v.jsxs)("div",{className:"row g-0 mt-3",children:[(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,className:"metrics-header",children:s(" Median Price",(0,v.jsxs)(v.Fragment,{children:[" ","Median",(0,v.jsx)("br",{}),"Price"," "]}))}),(0,v.jsx)("div",{className:"pt-1",children:(0,v.jsxs)(C.ZP,{variant:C.sT.body2,weight:600,className:"metrics-property",children:[(0,v.jsx)(V.W,{})," ",!!t&&(a?l(t.salesPriceMedianP6m,{oneDecimal:!0}):(0,I.ZO)(t.salesPriceMedianP6m,{noDecimal:!0}))]})})]}),(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,className:"metrics-header",children:s("Sales Transactions 12 Months",(0,v.jsxs)(v.Fragment,{children:[" ","Sales",(0,v.jsx)("br",{}),"12 Months"," "]}))}),(0,v.jsx)("div",{className:"pt-1",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:600,className:"metrics-property",children:!!t&&(a?l(t.totalSalesP12m,{oneDecimal:!0}):(0,I.ZO)(t.totalSalesP12m,{noDecimal:!0}))})})]})]})]})}var tv=a(33775),tx=a(54414);function tj(e){let t,a,{selectedArea:l,onClose:s,onExpansionChange:n,dubaiDropdownLocations:i,isLoading:r,onLocationSelect:c,onHierarchyClick:o,masterProjectLocationsData:d,areaLocationsData:m,onFullScreenChange:u,activeLayer:p,selectedMetric:h,isExpanded:j,onProjectNameClick:g}=e,{values:f,setFieldValue:b}=(0,w.u6)(),[N,y]=x.useState(!1),[P,_]=x.useState(!1),[L,k]=x.useState(!1),[A,T]=x.useState(""),[D,Z]=x.useState("idle"),[F,M]=x.useState({activeTab:"Key Metrics",filters:{}}),I=(0,eU.s)();if((null==l?void 0:l.type)===z.mQ.project){t=l.projectName;let e=d.find(e=>e.masterProjectName===l.masterProjectPropAi),s=null==e?void 0:e.masterProjectName,n=m.find(e=>e.areaName===l.areaName);a=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{onClick:()=>{n&&o(n)},style:{cursor:n?"pointer":"default"},children:l.areaName})," / ",(0,v.jsx)("span",{onClick:()=>{e&&o(e)},style:{cursor:e?"pointer":"default"},children:s})," / ",(0,v.jsx)("span",{children:t})]})}else if((null==l?void 0:l.type)===z.mQ.masterProject){t=l.masterProjectName;let e=m.find(e=>e.areaName===l.areaName);a=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{onClick:()=>{e&&o(e)},style:{cursor:e?"pointer":"default"},children:l.areaName})," / ",(0,v.jsx)("span",{children:t})]})}else(null==l?void 0:l.type)===z.mQ.area?(t=l.areaName,a=(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("span",{children:t})})):(t="No name available",a="No name available");let E=(f.preferredLocations||[]).some(e=>l&&l.type===z.mQ.project?!!e.projectName&&!!l.projectName&&e.type===z.mQ.project&&e.projectName===l.projectName:l&&l.type===z.mQ.area?!!e.areaName&&!!l.areaName&&e.type===z.mQ.area&&e.areaName===l.areaName:l&&l.type===z.mQ.masterProject?!!e.masterProjectName&&!!l.masterProjectName&&e.type===z.mQ.masterProject&&l.masterProjectName===e.masterProjectName:void 0),O=()=>{if(!l||!p||!h)return"";let e={orderPreference:"locationFirst",activeLayer:p,expanded:j,metric:h};if(j){if(e.detailedTab=F.activeTab,"Projects"===F.activeTab){let{type:t,status:a,developer:l}=F.filters;t&&(e.filterType=t),a&&(e.filterStatus=a),l&&Array.isArray(l)&&l.length>0&&(e.filterDeveloper=l.join(","))}else{let{propertyType:t,beds:a,status:l}=F.filters;t&&(e.filterType=t),a&&(e.filterBeds=a.toString()),l&&(e.filterStatus=l)}}if(l.type===z.mQ.project){e.type="project",e.project=l.projectName;let t=d.find(e=>e.masterProjectName===l.masterProjectPropAi);t&&(e.masterProject=t.masterProjectName),e.area=l.areaName}else l.type===z.mQ.masterProject?(e.type="masterProject",e.masterProject=l.masterProjectName,e.area=l.areaName):l.type===z.mQ.area&&(e.type="area",e.area=l.areaName);let t=new URLSearchParams((0,e9.jy)(e)).toString(),a=(0,tx.SV)();return"".concat(a,"/survey?").concat(t)},R=async()=>{try{await navigator.clipboard.writeText(A),Z("copied"),setTimeout(()=>Z("idle"),2e3)}catch(e){Z("error"),console.error("Failed to copy text: ",e)}},W=async()=>{let e=A||O();try{navigator.share?await navigator.share({title:"Check out this location",text:"View metrics for ".concat(t),url:e}):k(!0)}catch(e){console.error("Error sharing:",e)}};return(0,v.jsxs)("div",{className:"map-location-metrics-card ".concat(j?"expanded":""," ").concat(P?"fullscreen":""),children:[(0,v.jsxs)("div",{className:"location-details-card-header",children:[!P&&(0,v.jsx)("button",{type:"button",className:"expand",onClick:()=>{n(!j)}}),(0,v.jsxs)("div",{className:"header-right-buttons",children:[j&&!I&&(0,v.jsx)("button",{type:"button",className:"fullscreen",onClick:()=>{let e=!P;_(e),u(e)}}),(0,v.jsxs)("div",{className:"share-container d-flex",children:[(0,v.jsx)("button",{type:"button",className:"share",onClick:()=>{let e=O();e&&(T(e),k(!0),Z("idle"))}}),L&&(0,v.jsxs)("div",{className:"share-tooltip",children:[(0,v.jsx)("button",{className:"close-tooltip",onClick:()=>{k(!1)},children:(0,v.jsx)(S.J,{icon:"/icons/close.svg",size:14,alt:"Close"})}),(0,v.jsxs)("div",{className:"share-url-container",children:[(0,v.jsx)("input",{type:"text",value:A,readOnly:!0,className:"share-url-input",onClick:e=>e.currentTarget.select()}),(0,v.jsx)("button",{type:"button",className:"copy-button ".concat("copied"===D?"copied":""),onClick:R,disabled:"copied"===D,children:"copied"===D?"Copied!":"Copy"}),"function"==typeof navigator.share&&(0,v.jsx)("button",{type:"button",className:"native-share-button",onClick:W,children:"Share"})]})]})]}),(0,v.jsx)("button",{type:"button",className:"close",onClick:s})]})]}),(0,v.jsxs)("div",{className:"row g-0 d-flex align-items-start mb-2 mb-md-0 position-relative",children:[(0,v.jsxs)("div",{className:"col flex-grow-1",children:[(0,v.jsxs)(C.ZP,{variant:C.sT.body3,weight:700,className:"location-header d-flex align-items-center gap-2",children:[(null==l?void 0:l.type)===z.mQ.project&&(0,v.jsx)(S.J,{icon:l.developmentStatus===tv.Zn.offPlan?"/icons/off-plan.svg":"/icons/ready-to-move.svg",size:25,alt:l.developmentStatus===tv.Zn.offPlan?"Off Plan":"Ready to Move"}),t]}),(0,v.jsxs)("div",{className:"d-block",children:[(0,v.jsxs)("div",{className:"location-subheader-container",children:[(0,v.jsx)(C.ZP,{variant:C.sT.bodyExtraSmall,color:C.HL.greyDark,className:"location-subheader align-items-start",children:a}),(0,v.jsx)("button",{type:"button",className:"chevron-down-button ".concat(N?"rotate-up":""),onClick:()=>{y(!N)},children:(0,v.jsx)(S.J,{icon:"/icons/chevron-down.svg",size:18,alt:"Toggle search bar"})})]}),N&&(0,v.jsx)("div",{className:"search-bar-container",children:(0,v.jsx)(ey,{name:"preferredLocations",options:r?[{value:"",label:"Loading...",disabled:!0}]:i,placeholder:"Search preferred locations",actionBtnLabel:"Search",onLocationSelect:c,isMapMode:!0})})]})]}),(0,v.jsx)("div",{className:"col-auto",children:!E&&(0,v.jsxs)("button",{type:"button",className:"add-btn ms-auto",onClick:()=>{b("preferredLocations",[...f.preferredLocations||[],l])},children:[(0,v.jsx)(S.J,{icon:"/icons/ic_round-add.svg",size:18,alt:"+"}),(0,v.jsx)("span",{children:"Add"})]})})]}),j?(0,v.jsx)(tp,{selectedArea:l,isFullscreen:P,onProjectNameClick:g,onStateChange:e=>{M(e)}}):(0,v.jsx)(th,{selectedArea:l})]})}a(29936);let tg=[{label:"Median Price Per Sqft (Past 6 Months)",min:0,max:100,key:"pricePerSqftP6m"},{label:"Median Price (Past 6 Months)",min:0,max:100,key:"salesPriceMedianP6m"},{label:"Price Change (Year-over-Year)",min:0,max:100,key:"priceChangeYoy"},{label:"",min:0,max:0,key:"separator1",type:"separator"},{label:"Rental Yield (Past 6 Months)",min:0,max:100,key:"rentalYield"},{label:"Rent Change (Year-over-Year)",min:0,max:100,key:"rentChangeYoy"},{label:"Service Charge (Annual per sqft)",min:0,max:100,key:"serviceChargesSqft"},{label:"",min:0,max:0,key:"separator2",type:"separator"},{label:"Number of Listings",min:0,max:100,key:"numberOfListings"},{label:"Asking Price vs Fair Market Value",min:0,max:100,key:"fmvSpread"},{label:"",min:0,max:0,key:"separator3",type:"separator"},{label:"Sales Transactions (Past 12 Months)",min:0,max:100,key:"totalSalesP12m"},{label:"Rent Contracts (Past 12 Months)",min:0,max:100,key:"totalRentContractsP12m"}];function tf(e){let{onMetricChange:t,selectedMetric:a,activeLayer:l,microCommunityMinMax:s,projectsMinMax:n,areaMinMax:i,getResolvedColorForPercentage:r,onMinClick:c,onMaxClick:o,onRangeChange:d,areaRealMinMax:m,projectsRealMinMax:u,microCommunityRealMinMax:p}=e,[h,j]=(0,x.useState)(!1),[g,f]=(0,x.useState)([]),[b,N]=(0,x.useState)([0,100]),y=(0,x.useCallback)(e7()(e=>{d(e)},300),[d]);(0,x.useEffect)(()=>()=>{y.cancel()},[y]);let P=g.find(e=>e.key===a)||null;(0,x.useEffect)(()=>{if(P){let e=[P.min,P.max];N(e),d(e)}},[P]),(0,x.useEffect)(()=>{let e=null;if("areas"===l?e=i:"master-projects"===l?e=s:"projects"===l&&(e=n),e){let l=Object.keys(e).map(t=>({label:_(t),min:e[t].min||0,max:e[t].max||100,key:t}));f(l),!l.some(e=>e.key===a)&&l.length>0&&t(l[0].key)}},[l,i,s,n]);let _=e=>({pricePerSqftP6m:"Median Price Per Sqft (Past 6 Months)",salesPriceMedianP6m:"Median Price (Past 6 Months)",priceChangeYoy:"Price Change (Year-over-Year)",rentalYield:"Rental Yield (Past 6 Months)",rentChangeYoy:"Rent Change (Year-over-Year)",serviceChargesSqft:"Service Charge (Annual per sqft)",numberOfListings:"Number of Listings",fmvSpread:"Asking Price vs Fair Market Value",totalSalesP12m:"Sales Transactions (Past 12 Months)",totalRentContractsP12m:"Rent Contracts (Past 12 Months)"})[e]||e,w=()=>P?"areas"===l&&(null==m?void 0:m[a])?m[a]:"master-projects"===l&&(null==p?void 0:p[a])?p[a]:"projects"===l&&(null==u?void 0:u[a])?u[a]:{min:P.min,max:P.max}:{min:0,max:100},S=e=>{if(!P)return 0;let{min:t,max:a,key:l}=P,{min:s,max:n}=w();if(!(l===tv.WI.pricePerSqftP6m||l===tv.WI.salesPriceMedianP6m||l===tv.WI.totalRentContractsP12m||l===tv.WI.totalSalesP12m||l===tv.WI.rentChangeYoy||l===tv.WI.numberOfListings))return t+e/100*(a-t);let i=s>t,r=n<a;return i&&e<15?t+e/15*(s-t):!i&&e<15?t+e/15*(s-t):r&&e>85?n+(e-85)/15*(a-n):!r&&e>85?n+(e-85)/15*(a-n):s+(e-15)/70*(n-s)},C=e=>{if(!P)return 0;let{min:t,max:a,key:l}=P,{min:s,max:n}=w();if(!(l===tv.WI.pricePerSqftP6m||l===tv.WI.salesPriceMedianP6m||l===tv.WI.totalRentContractsP12m||l===tv.WI.totalSalesP12m||l===tv.WI.rentChangeYoy||l===tv.WI.numberOfListings))return(e-t)/(a-t)*100;let i=s>t,r=n<a;return!i&&e<=s?(e-t)/(s-t)*15:i&&e<s?(e-t)/(s-t)*15:!r&&e>=n?85+(e-n)/(a-n)*15:r&&e>n?85+(e-n)/(a-n)*15:15+(e-s)/(n-s)*70},L=(e,t)=>{let a={[tv.WI.pricePerSqftP6m]:{noDecimal:!0},[tv.WI.salesPriceMedianP6m]:{noDecimal:!0},[tv.WI.priceChangeYoy]:{addPercentage:!0},[tv.WI.rentalYield]:{addPercentage:!0},[tv.WI.rentChangeYoy]:{addPercentage:!0},[tv.WI.serviceChargesSqft]:{oneDecimal:!0},[tv.WI.numberOfListings]:{noDecimal:!0},[tv.WI.fmvSpread]:{addPercentage:!0},[tv.WI.totalSalesP12m]:{noDecimal:!0},[tv.WI.totalRentContractsP12m]:{noDecimal:!0}};return(0,I.ZO)(e,a[t]||{})},k=e=>e===tv.WI.serviceChargesSqft||e===tv.WI.salesPriceMedianP6m||e===tv.WI.pricePerSqftP6m?"AED":e===tv.WI.numberOfListings||e===tv.WI.totalSalesP12m||e===tv.WI.totalRentContractsP12m?"":" ",A=r?r(0):"#e91e63",T=r?r(50):"#d0dc38",D=r?r(100):"#60ba62",Z="linear-gradient(90deg, ".concat(A," 0%, ").concat(T," 50%, ").concat(D," 100%)"),F=[C(b[0]),C(b[1])];return(0,v.jsx)("div",{className:"selected-metric-dropdown-card col-md-12 col-lg-12 col-xl-12 p-3",children:(0,v.jsxs)("div",{className:"dropdownMenu position-relative ".concat(h?"is-expanded":""),children:[(0,v.jsxs)("div",{className:"header d-flex align-items-center gap-2",onClick:()=>j(!h),children:[(0,v.jsx)("span",{className:"fw-bold text-center text-md-start w-100",children:P?P.label:"Select Metric"}),(0,v.jsx)("span",{className:"icon"})]}),(0,v.jsx)("div",{className:"menuList-container ".concat("projects"===l?"projects-menu":""),children:h&&(0,v.jsx)("ul",{className:"menuList list-unstyled",children:tg.map(e=>"separator"===e.type?(0,v.jsx)("li",{className:"separator",children:(0,v.jsx)("hr",{className:"separator-line"})},e.key):(0,v.jsx)("li",{className:"menuItem py-2",onClick:()=>{j(!1),t(e.key)},children:e.label},e.key))})}),(0,v.jsx)("div",{className:"slider-container mt-2 pb-1",children:(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsx)("span",{onClick:c,className:"boundry-value-text d-flex align-items-center",children:P&&"AED"===k(P.key)?(0,v.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[(0,v.jsx)(V.W,{}),L(b[0],P.key)]}):(0,v.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[P?L(b[0],P.key):"N/A",P&&k(P.key)]})}),(0,v.jsx)("div",{className:"flex-grow-1 mx-4 d-flex align-items-center",children:(0,v.jsx)(M.Z,{range:!0,min:0,max:100,value:F,onChange:e=>{if(!Array.isArray(e)||!P)return;let[t,a]=e,l=[S(t),S(a)];N(l),y(l)},styles:{handle:{borderColor:"#fff",backgroundColor:"#e9ecef",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},track:{background:Z},rail:{backgroundColor:"#e9ecef"}}})}),(0,v.jsx)("span",{onClick:o,className:"boundry-value-text d-flex align-items-center",children:P&&"AED"===k(P.key)?(0,v.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[(0,v.jsx)(V.W,{}),L(b[1],P.key)]}):(0,v.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[P?L(b[1],P.key):"N/A",P&&k(P.key)]})})]})})]})})}function tb(e){let{onMasterProjectClick:t,clickedArea:a,masterProjectLocationsData:l,isExpanded:s,onMenuHideChange:n}=e,i=(0,x.useRef)(null),[r,c]=x.useState(!1),o=(()=>{if(r)return[];if((null==a?void 0:a.type)===z.mQ.microCommmunity){if(!(null==a?void 0:a.masterProjects))return[];try{if(Array.isArray(a.masterProjects))return a.masterProjects;if("string"==typeof a.masterProjects)return JSON.parse(a.masterProjects);return[a.masterProjects]}catch(e){console.error("Error parsing master projects:",e)}}else if((null==a?void 0:a.type)===z.mQ.area)return(null==a?void 0:a.areaName)?l.filter(e=>e.areaName===a.areaName):[];return[]})(),d=o.length>0&&!r;return 0!==o.length&&d?(0,v.jsxs)("div",{className:"master-projects-menu rounded p-2 ".concat(s?"expanded":""),children:[(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsx)(C.ZP,{variant:C.sT.body2,weight:700,className:"master-projects-menu-header",children:"Master Projects"}),(0,v.jsx)("button",{type:"button",className:"close-button",onClick:()=>{c(!0),n(!0)},"aria-label":"Close master projects menu",children:"\xd7"})]}),(0,v.jsxs)("div",{className:"master-projects-menu-list-container d-flex align-items-center px-1 py-2",children:[(0,v.jsx)("button",{type:"button",className:"leftArrow",onClick:()=>{i.current&&(i.current.scrollLeft-=100)}}),(0,v.jsx)("div",{className:" master-projects-menu-list d-flex overflow-auto scroll-smooth",ref:i,children:o.map((e,a)=>(0,v.jsx)("div",{className:"master-projects-menu-item",onClick:()=>t(e),children:e.masterProjectName},a))}),(0,v.jsx)("button",{type:"button",className:"rightArrow",onClick:()=>{i.current&&(i.current.scrollLeft+=100)}})]})]}):null}a(27625);let tN=[{pct:0,color:{r:233,g:30,b:99}},{pct:50,color:{r:208,g:220,b:56}},{pct:100,color:{r:96,g:186,b:98}}],ty=[{pct:0,color:{r:96,g:186,b:98}},{pct:50,color:{r:208,g:220,b:56}},{pct:100,color:{r:233,g:30,b:99}}],tP=[{pct:0,color:{r:233,g:30,b:99}},{pct:25,color:{r:255,g:165,b:0}},{pct:50,color:{r:208,g:220,b:56}},{pct:75,color:{r:144,g:238,b:144}},{pct:100,color:{r:96,g:186,b:98}}],t_=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tP,l=1;for(;l<a.length-1&&!(e<a[l].pct);l++);let s=a[l-1],n=a[l],i=e&&Number(e)>0?Number(e):0;i>100&&(i=100);let r=n.pct-s.pct,c=(e-s.pct)/r,o=1-c,d={r:Math.floor(s.color.r*o+n.color.r*c),g:Math.floor(s.color.g*o+n.color.g*c),b:Math.floor(s.color.b*o+n.color.b*c)};return"rgb("+[d.r,d.g,d.b].join(",")+")"};a(35813);var tw=e=>{let{options:t,placeholder:a,onChange:l}=e,[s,n]=(0,x.useState)(!1),[i,r]=(0,x.useState)(""),c=e=>{r(e),l(e),n(!1)};return(0,v.jsxs)("div",{className:"map-dropdown ".concat(s?"is-expanded":""),children:[(0,v.jsxs)("div",{className:"dropdown-header",onClick:()=>{n(e=>!e)},children:[(0,v.jsx)("span",{children:(()=>{if("all"===i||!i)return a;let e=t.find(e=>e.value===i);return(null==e?void 0:e.label)||a})()}),(0,v.jsx)("span",{className:"icon"})]}),s&&(0,v.jsx)("ul",{className:"dropdown-menu",children:t.map(e=>(0,v.jsx)("li",{className:"dropdown-item",onClick:()=>c(e.value),children:e.label},e.value))})]})};function tS(e){let{mapRef:t,className:a}=e;return(0,v.jsxs)("div",{className:"zoom-controls d-flex flex-column gap-1 ".concat(a||""),children:[(0,v.jsx)("button",{type:"button",className:"zoom-button",onClick:()=>{var e;null===(e=t.current)||void 0===e||e.zoomIn()},"aria-label":"Zoom in",children:(0,v.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:(0,v.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",strokeWidth:"2.5",strokeLinecap:"round"})})}),(0,v.jsx)("div",{className:"divider h-px bg-gray-300"}),(0,v.jsx)("button",{type:"button",className:"zoom-button",onClick:()=>{var e;null===(e=t.current)||void 0===e||e.zoomOut()},"aria-label":"Zoom out",children:(0,v.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:(0,v.jsx)("path",{d:"M19 13H5v-2h14v2z",strokeWidth:"2.5",strokeLinecap:"round"})})})]})}a(93959);let tC=["areas","master-projects","projects"],tL=["pricePerSqftP6m","salesPriceMedianP6m","fmvSpread","serviceChargesSqft"],tk=(0,em.default)(()=>Promise.all([a.e(4411),a.e(902),a.e(2660),a.e(3170)]).then(a.bind(a,83170)),{loadableGenerated:{webpack:()=>[83170]},ssr:!1,loading:()=>(0,v.jsx)(eu.Z,{loadingText:"Applying layers..."})});function tA(e){let t,{setIsMapModeActive:a,submitBtnLabel:l="Continue",dubaiDropdownLocations:s,isLoading:n}=e,i=(0,eU.s)(),{values:r}=(0,w.u6)(),c=(0,j.useSearchParams)(),o=(0,e9._I)(c),d=c.get("orderPreference"),m=c.get("lat"),u=c.get("lng"),p=c.get("type"),{data:h,isLoading:g}=(0,eP.wh)({}),{data:f,isLoading:b}=(0,eP.S4)({}),{data:y,isLoading:P}=(0,eP.rc)({}),{data:_,isLoading:S}=(0,eP.fr)({}),{data:C,isLoading:L}=(0,eP.fb)({}),k=x.useMemo(()=>(null==h?void 0:h.data)||[],[null==h?void 0:h.data]),A=x.useMemo(()=>(null==f?void 0:f.data)||[],[null==f?void 0:f.data]),T=x.useMemo(()=>(null==y?void 0:y.data)||[],[null==y?void 0:y.data]),D=(null==_?void 0:_.data)||[],F=(null==C?void 0:C.responseData)||[],M=null==h?void 0:h.minmax,E=null==f?void 0:f.minmax,O=null==y?void 0:y.minmax,R=null==h?void 0:h.minmaxValueWithoutOutliers,W=null==f?void 0:f.minmaxValueWithoutOutliers,q=null==y?void 0:y.minmaxValueWithoutOutliers,B=x.useRef(null),H=x.useMemo(()=>{if(!(null==k?void 0:k.length)||!(null==D?void 0:D.length))return null;let e=new Map;return D.forEach(t=>{var a;((null===(a=t.hexName2000m)||void 0===a?void 0:a.filter(Boolean).map(e=>null==e?void 0:e.trim().replace(/^ +/gm,"")))||[]).forEach(a=>{var l;a&&(e.has(a)||e.set(a,[]),null===(l=e.get(a))||void 0===l||l.push(t))})}),k.map(t=>({...t,masterProjects:t.hexName2000m&&e.get(t.hexName2000m.trim())||[]}))},[k,D]),[Y,U]=x.useState("areas"),[V,Q]=x.useState(null),[J,K]=x.useState(!1),[G,$]=x.useState(!1),[X,ee]=x.useState("pricePerSqftP6m"),[et,ea]=x.useState(null),[el,es]=x.useState([]),[en,ei]=x.useState(!1),[er,ec]=x.useState([]),[eo,ed]=x.useState(null),[em,ep]=x.useState(null),[eh,ev]=x.useState([]),[ex,ej]=x.useState([0,100]),[eg,ef]=x.useState("streets"),[eb,eN]=x.useState("streets"),[e_,ew]=x.useState(10),[eS,eC]=x.useState(!1),[eL,ek]=x.useState(!1),[eA,eT]=x.useState(!1),[eD,eZ]=x.useState(!1),eF=[{key:"propertyType",placeholder:"Type",baseOptions:[{value:"apartment",label:tv.uS.apartment},{value:"villa",label:tv.uS.villa}],selectedValue:eo,setter:ed},{key:"statusType",placeholder:"Status",baseOptions:[{value:tv.Zn.existing,label:"Ready to Move"},{value:tv.Zn.offPlan,label:"Off-Plan"}],selectedValue:em,setter:ep}],eM=(e,t)=>{let a=[...e];return t&&a.unshift({value:"all",label:"All"}),a},eI=e=>t=>{e("all"===t?null:t)},eE=(e,t)=>e.filter(e=>{let a=e[X];return a>=t[0]&&a<=t[1]}),eO=e=>{if(e.type===z.mQ.microCommmunity)try{return(Array.isArray(e.masterProjects)?e.masterProjects:"string"==typeof e.masterProjects?JSON.parse(e.masterProjects):[e.masterProjects]).length>0}catch(e){}else if(e.type===z.mQ.area)return D.some(t=>t.areaName===e.areaName);return!1};x.useEffect(()=>{!(null==T?void 0:T.length)||!(null==D?void 0:D.length)||!(null==A?void 0:A.length)||eD||m&&u&&p&&(Q(null),ea(null),eZ(!0),1)||function(){let{type:e,area:t,masterProject:a,project:l,activeLayer:s,expanded:n,metric:i}=o;if(e&&(t||a||l)){if(U(s||"areas"),K("true"===n),ee(i||"pricePerSqftP6m"),"area"===e&&t){let e=T.find(e=>e.areaName===t);if(e)return Q(e),$(!1),eZ(!0),!0}else if("masterProject"===e&&a){let e=D.find(e=>e.masterProjectName===a);if(e)return ea(e),$(!1),eZ(!0),!0}else if("project"===e&&l){let e=A.find(e=>e.projectName===l);if(e)return Q(e),eZ(!0),!0}return eZ(!0),!0}return!1}()||function(){if(!m&&!u&&!V){let e=T.filter(e=>!!e.areaName);if(0===e.length)return;let t=e.reduce((e,t)=>t.numberOfListings>e.numberOfListings?t:e);Q(t),$(eO(t)),eZ(!0)}}()},[o,m,u,p,T,D,A,eD,V]),x.useEffect(()=>{if(V&&V.masterProjects){if("object"==typeof V.masterProjects)es(V.masterProjects);else try{es(JSON.parse(V.masterProjects))}catch(e){console.error("Failed to parse masterProjects:",e),es([])}}else es([])},[V]);let eR=()=>{Q(null),K(!1),ek(!1),ea(null),eT(!1)},eW=e=>{i&&et&&G&&$(!1),K(e)},eq=e=>{ek(e)},ez=e=>{ea(e),$(!0),eC(!1)},eB=e=>{if(e.type===z.mQ.area){let t=T.find(t=>t.areaName===e.areaName);t&&(U("areas"),Q(t),ea(null),$(!0),eC(!1),eT(!1))}else if(e.type===z.mQ.masterProject){let t=D.find(t=>t.masterProjectName===e.masterProjectName);t&&(U("master-projects"),Q(null),ea(t),$(!0),eC(!1),eT(!1))}else if(e.type===z.mQ.project){let t=A.find(t=>t.projectName===e.projectName);t&&(U("projects"),Q(t),ea(null),eC(!1))}else Q(null),ea(null),eC(!1)},eH=x.useCallback(()=>{let e=[];switch(Y){case"areas":e=T;break;case"master-projects":e=H||[];break;case"projects":e=A;break;default:return}ec(eE(e,ex))},[Y,X,ex]);x.useEffect(()=>{((null==T?void 0:T.length)||(null==A?void 0:A.length)||(null==H?void 0:H.length))&&eH()},[T,A,H,eH]);let eY=x.useCallback(e=>{ej(e),eH()},[eH]),eV=(e,t)=>{let a=t||X,l=tL.includes(a)?ty:tN;return t_(e,a,l)},eQ=x.useCallback(()=>{if(!er.length)return;let e=Math.min(...er.map(e=>e[X])),t=er.find(t=>t[X]===e);t&&(Q(t),ea(null))},[er,X]),eJ=x.useCallback(()=>{if(!er.length)return;let e=Math.max(...er.map(e=>e[X])),t=er.find(t=>t[X]===e);t&&(Q(t),ea(null))},[er,X]),eK=e=>{e.type===z.mQ.area?(U("areas"),Q(e),ea(null),eC(!1)):e.type===z.mQ.masterProject&&(U("master-projects"),Q(null),ea(e),eC(!0))};x.useEffect(()=>{ei(!1)},[]);let eG=x.useMemo(()=>A.reduce((e,t)=>(e[t.projectName]=t,e),{}),[A]),eX=e=>{let t=eG[e];t&&(U("projects"),Q(t),ea(null),eT(!1))};return(0,v.jsx)(x.Fragment,{children:(0,v.jsx)(Z,{isMapLocationCardExpanded:J,children:(0,v.jsx)("div",{className:"map-location-picker-wrapper",children:(0,v.jsxs)("div",{className:"map-location-picker-content",children:[(0,v.jsxs)("div",{className:"picker-map-section",children:[P||g||S||b||L?(0,v.jsx)(eu.Z,{loadingText:"Loading location data for Map..."}):(0,v.jsx)(tk,{mapRef:B,activeLayer:Y,setActiveLayer:U,onAreaClick:e=>{V&&V.propAiLocationKey===e.propAiLocationKey?Q(null):(Q(e),$(eO(e))),ea(null),eT(!1)},selectedMetric:X,selectedMasterProject:et,areaLocationsData:"areas"===Y?er:T,projectLocationsData:(t="projects"===Y?er:A)?t.filter(e=>{let t=!eo||"all"===eo||"apartment"===eo&&e.noOfUnits>0||"villa"===eo&&e.noOfVillas>0,a=!em||"all"===em||em===tv.Zn.existing&&"FINISHED"===e.developmentStatus||em===tv.Zn.offPlan&&["ACTIVE","PENDING","NOT_STARTED"].includes(e.developmentStatus),l=0===eh.length||eh.some(t=>(null==e?void 0:e.developerGroup)&&t.value&&e.developerGroup===t.value);return t&&a&&l}):[],communityDataWithMasterProjects:"master-projects"===Y?er:H,selectedLocation:et||V,isLayerButtonClicked:en,resolveColorForMetricAndValue:(e,t)=>{if(Number.isNaN(t)||null==t)return null;let a=null;if("areas"===Y?a=q:"master-projects"===Y?a=R:"projects"===Y&&(a=W),a){let l=Math.min(a[e].min||0,a[e].max||1),s=Math.max(a[e].min||0,a[e].max||1);return t<l&&(t=l),t>s&&(t=s),eV((t-l)/(s-l)*100,e)}return"rgb(255, 255, 255)"},mapStyle:eg,layerZoom:"3d"===eg?16:void 0,lat:m,lng:u,locationType:p}),(0,v.jsxs)("div",{className:"location-dropdown-wrapper ".concat(J?"expanded":""," ").concat(r.preferredLocations.length>0?"with-preferred-list":""),children:[(0,v.jsx)(ey,{name:"preferredLocations",options:n?[]:s,placeholder:"Search preferred locations",onActionClick:()=>a(!1),actionBtnLabel:d===tv.HP.locationFirst?"Continue":"Continue Survey",onLocationSelect:eB,isMapMode:!0}),r.preferredLocations.length>0&&(0,v.jsx)("div",{className:"preferredLocationsList",children:(0,v.jsx)(ey.SelectedValuesContainer,{name:"preferredLocations"})})]})]}),(0,v.jsxs)("div",{className:"picker-footer-section",children:[(0,v.jsx)("div",{className:"overlay ".concat(J?"expanded":""," ").concat(eL?"fullscreen":"")}),(0,v.jsxs)("div",{className:"picker-footer-extra-controls ".concat(V||et?"has-third-control":""),children:[(0,v.jsx)("div",{className:"extra-control-container",children:(0,v.jsxs)("div",{className:"d-flex justify-content-between align-items-start gap-3 w-100",children:[(0,v.jsxs)("div",{className:"zoom-control-container ".concat("projects"===Y?"projects-active":""),children:[(0,v.jsxs)("div",{className:"map-style-toggle position-relative overflow-hidden ".concat("3d"===eg?"active":""),onClick:()=>{if(!B.current)return;let e=B.current.getMap();"3d"===eg?(e.flyTo({zoom:e_,duration:1e4}),ef(eb)):(ew(e.getZoom()),e.flyTo({zoom:16,duration:1e4}),ef("3d"),U("projects"))},children:[(0,v.jsx)("img",{src:"/images/3D-building.jpg",alt:"3d"===eg?"Switch to 2D view":"Switch to 3D view",className:"w-full h-full object-cover"}),(0,v.jsxs)("div",{className:"overlay-3d-container",children:[(0,v.jsx)("div",{className:"text-white text-lg font-bold ".concat("3d"===eg?"d-none":""),children:"3D"}),(0,v.jsx)("div",{className:"text-white text-lg font-bold fs-4 ".concat("3d"===eg?"":"d-none"),children:"x"})]})]}),(0,v.jsx)("div",{className:"map-style-toggle",onClick:()=>{let e="satellite"===("3d"===eg?eb:eg)?"streets":"satellite";ef(e),"3d"!==eg&&eN(e)},children:(0,v.jsx)("img",{src:("3d"===eg?eb:eg)==="satellite"?"/images/map-layer.svg":"/images/satellite-layer.svg",alt:("3d"===eg?eb:eg)==="satellite"?"Switch to street view":"Switch to satellite view",className:"w-full h-full object-contain"})}),(0,v.jsx)(tS,{mapRef:B})]}),(0,v.jsxs)("div",{className:"flex-grow-1",children:[eh.length>0&&(0,v.jsx)(e0,{selectedDevelopers:eh,onClear:e=>ev(e||[])}),(0,v.jsx)(tf,{onMetricChange:e=>{ee(e),eH()},selectedMetric:X,activeLayer:Y,microCommunityMinMax:M,projectsMinMax:E,areaMinMax:O,getResolvedColorForPercentage:eV,onMinClick:eQ,onMaxClick:eJ,onRangeChange:eY,microCommunityRealMinMax:R,projectsRealMinMax:W,areaRealMinMax:q}),"projects"===Y&&(0,v.jsxs)("div",{className:"dropdown-row",children:[eF.map(e=>(0,v.jsx)(tw,{options:eM(e.baseOptions,!!e.selectedValue),placeholder:e.placeholder,value:e.selectedValue||"",onChange:eI(e.setter)},e.key)),(0,v.jsx)(e$,{options:Array.from(new Map(F.filter(e=>e.developerName).map(e=>[e.developerName,e])).values()).sort((e,t)=>e.developerName.localeCompare(t.developerName)).map(e=>({value:e.developerName,label:(0,I.Ui)(e.developerName)})),selectedOptions:eh,onChange:ev,placeholder:"Select developers...",getOptionLabel:e=>e.label})]})]})]})}),(0,v.jsx)("div",{className:"extra-control-container",children:(0,v.jsx)("div",{className:"location-level-selector mx-auto ".concat(J?"expanded":" "),children:tC.map(e=>{let t=Y===e;return(0,v.jsx)("button",{type:"button",className:"location-level ".concat(e," ").concat(t?"active":""),onClick:()=>{U(e),ei(!0),ea(null)}},e)})})}),(0,v.jsxs)("div",{className:"extra-control-container d-flex flex-column gap-2",children:[(null==V?void 0:V.type)==="microCommmunity"&&(0,v.jsxs)(v.Fragment,{children:[1===el.length&&(0,v.jsx)("div",{className:"location-details-card-wrapper ms-auto ".concat(J?"expanded":" "," ").concat(eL?"fullscreen":""),children:(0,v.jsx)(tj,{selectedArea:el[0],onClose:eR,onExpansionChange:eW,dubaiDropdownLocations:s,isLoading:n,onLocationSelect:eB,onHierarchyClick:eK,masterProjectLocationsData:D,areaLocationsData:T,onFullScreenChange:eq,activeLayer:Y,selectedMetric:X,isExpanded:J,onProjectNameClick:eX})}),el.length>1&&!et&&(0,v.jsx)(tb,{clickedArea:V,onMasterProjectClick:ez,masterProjectLocationsData:D,isExpanded:J,onMenuHideChange:eT},null==V?void 0:V.propAiLocationKey),el.length>1&&et&&!V&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"location-details-card-wrapper ".concat(G?"masterproject-type":""," ").concat(J?"expanded":" "," ").concat(eL?"fullscreen":""," ").concat(eA?"menu-hidden":""),children:(0,v.jsx)(tj,{selectedArea:et,onClose:eR,onExpansionChange:eW,dubaiDropdownLocations:s,isLoading:n,onLocationSelect:eB,onHierarchyClick:eK,masterProjectLocationsData:D,areaLocationsData:T,onFullScreenChange:eq,activeLayer:Y,selectedMetric:X,isExpanded:J,onProjectNameClick:eX})}),(0,v.jsx)(tb,{clickedArea:V,onMasterProjectClick:ez,masterProjectLocationsData:D,isExpanded:J,onMenuHideChange:eT},null==V?void 0:V.propAiLocationKey)]})]}),et&&!V&&!el.length&&(0,v.jsx)("div",{className:"location-details-card-wrapper ".concat(J?"expanded":" "," ").concat(eL?"fullscreen":""),children:(0,v.jsx)(tj,{selectedArea:et,onClose:eR,onExpansionChange:eW,dubaiDropdownLocations:s,isLoading:n,onLocationSelect:eB,onHierarchyClick:eK,masterProjectLocationsData:D,areaLocationsData:T,onFullScreenChange:eq,onProjectNameClick:eX,activeLayer:Y,selectedMetric:X,isExpanded:J})}),(null==V?void 0:V.type)==="area"&&!et&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"location-details-card-wrapper area-type ms-auto ".concat(G?"masterproject-type":""," ").concat(J?"expanded":" ","  ").concat(eL?"fullscreen":""," ").concat(eA?"menu-hidden":""),children:(0,v.jsx)(tj,{selectedArea:V,onClose:eR,onExpansionChange:eW,dubaiDropdownLocations:s,isLoading:n,onLocationSelect:eB,onHierarchyClick:eK,masterProjectLocationsData:D,areaLocationsData:T,onFullScreenChange:eq,onProjectNameClick:eX,activeLayer:Y,selectedMetric:X,isExpanded:J})}),G&&(0,v.jsx)(tb,{clickedArea:V,onMasterProjectClick:ez,masterProjectLocationsData:D,onMenuHideChange:eT,isExpanded:J},null==V?void 0:V.propAiLocationKey)]}),(null==V?void 0:V.type)===z.mQ.project&&!et&&(0,v.jsx)("div",{className:"location-details-card-wrapper ms-auto ".concat(J?"expanded":" ","  ").concat(eL?"fullscreen":""),children:(0,v.jsx)(tj,{selectedArea:V,onClose:eR,onExpansionChange:eW,dubaiDropdownLocations:s,isLoading:n,onLocationSelect:eB,onHierarchyClick:eK,masterProjectLocationsData:D,areaLocationsData:T,onFullScreenChange:eq,onProjectNameClick:eX,activeLayer:Y,selectedMetric:X,isExpanded:J})}),et&&V&&(0,v.jsx)("div",{className:"location-details-card-wrapper ms-auto ".concat(J?"expanded":" ","  ").concat(eL?"fullscreen":""),children:(0,v.jsx)(tj,{selectedArea:et,onClose:()=>{eR(),ea(null)},onExpansionChange:eW,dubaiDropdownLocations:s,isLoading:n,onLocationSelect:eB,onHierarchyClick:eK,masterProjectLocationsData:D,areaLocationsData:T,onFullScreenChange:eq,onProjectNameClick:eX,activeLayer:Y,selectedMetric:X,isExpanded:J})}),(0,v.jsx)("div",{className:"picker-footer-button col-xs-12 col-sm-8 col-md-6 col-lg-5 col-xl-4",children:(0,v.jsx)(N.Mm,{children:l})})]})]})]})]})})})})}function tT(e){let{isMapModeActive:t,setIsMapModeActive:a,submitBtnLabel:l="Continue",dubaiDropdownLocations:s,isLoading:n}=e,{values:i,setFieldValue:r}=(0,w.u6)(),{topMasterCommunities:c,isTopMasterCommunitiesLoading:o,fetchTopMasterCommunitiesForSurveyData:d}=P(),m=i.preferredLocations||[],{data:u}=(0,eP.fr)({}),p=(null==u?void 0:u.data)||[],h=(0,x.useRef)([]);x.useEffect(()=>{c.length||d(i)},[]);let j=Array.isArray(c)&&c.length>0?c.map(e=>{let{"master_project_prop-ai":t}=e;return{label:ex()(eg()(t)),value:t}}):[];return(0,x.useEffect)(()=>{if(i.selectedMasterCommunityOptions&&p){let e=i.selectedMasterCommunityOptions,t=h.current,a=e.filter(e=>!t.includes(e)),l=t.filter(t=>!e.includes(t)),s=[...m];a.length>0&&(s=[...s,...p.filter(e=>a.includes(e.masterProjectName))]),l.length>0&&(s=s.filter(e=>e.type!==z.mQ.masterProject||!l.includes(e.masterProjectName))),r("preferredLocations",s),h.current=e}},[i.selectedMasterCommunityOptions]),(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(Z,{children:(0,v.jsxs)("div",{className:"container",children:[(0,v.jsx)("div",{className:"row mb-5 mb-md-4",children:(0,v.jsxs)("div",{className:"col-md-10 offset-md-1 text-center",children:[(0,v.jsx)("div",{className:"pb-2",children:(0,v.jsx)(C.ZP,{variant:C.sT.h2,children:"Preferred Locations"})}),(0,v.jsx)(C.ZP,{variant:C.sT.body2,color:C.HL.greyDark,children:"You can choose multiple locations"})]})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(ey,{name:"preferredLocations",options:n?[]:s,placeholder:"Search preferred locations ",onActionClick:()=>a(!0),actionBtnLabel:"Discover on Map",isMapMode:!1})})}),(0,v.jsx)("div",{className:"row mb-4",children:(0,v.jsx)("div",{className:"col-md-8 col-lg-6 mx-auto",children:(0,v.jsx)(ey.SelectedValuesContainer,{name:"preferredLocations"})})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-md-10 offset-md-1 text-center",children:(0,v.jsxs)("div",{className:"d-inline-flex align-items-center gap-2",children:[(0,v.jsx)(S.J,{icon:"/icons/directions-outline-black.svg",backgroundColor:"#262626",size:24}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,children:"Top Master Communities for your Search"})]})})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-md-8 col-lg-6 mx-auto py-4",children:o?(0,v.jsxs)("div",{className:"placeholder-glow d-flex gap-3 flex-wrap",children:[(0,v.jsx)("span",{className:"placeholder col-md-4 col-6 py-3 rounded"}),(0,v.jsx)("span",{className:"placeholder col-md-3 col-4 py-3 rounded"}),(0,v.jsx)("span",{className:"placeholder col-md-4 col-6 py-3 rounded"}),(0,v.jsx)("span",{className:"placeholder col-md-2 col-3 py-3 rounded"}),(0,v.jsx)("span",{className:"placeholder col-md-3 col-4 py-3 rounded"}),(0,v.jsx)("span",{className:"placeholder col-md-2 col-3 py-3 rounded"}),(0,v.jsx)("span",{className:"placeholder col-md-4 col-6 py-3 rounded"})]}):(0,v.jsx)(el,{name:"selectedMasterCommunityOptions",options:j,sliceSize:10})})})]})}),(0,v.jsx)(D,{children:(0,v.jsx)("div",{className:"container",children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(N.Mm,{children:l})})})})})]})}var tD=a(41842);a(40899);let tZ=["Simplify your real estate investment journey with AI","Unlimited access to live market data through our interactive map","Let our AI scan the market and find the best properties for you","Get instant, in-depth property evaluations for informed decisions"],tF=e=>e>0?"Continue with ".concat(e," locations"):"Continue";function tM(e){let{name:t,tabs:a,onChange:l}=e,[s,n,i]=(0,w.U$)(t),r=x.useMemo(()=>{let e={};return Array.isArray(s.value)&&(e=s.value.reduce((t,a,l)=>(e[a]=l,t),e)),e},[s.value.length]),c=e=>{let t=r[e];if(t>=0){let e=s.value.slice();e.splice(t,1),i.setValue(e),l&&l(e)}else i.setValue([...s.value,e]),l&&l([...s.value,e])},o=n.touched&&n.error;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"icon-tab-with-label ".concat(o?"error":""),children:a.map((e,t)=>{let{label:a,value:l,icon:s,tooltipContent:n,placement:i="top",disabled:o=!1}=e,d=r[l]>=0;return(0,v.jsx)("div",{className:"icon-tab-btn-wrapper ".concat(d?"active":""," ").concat(o?"disabled":""),children:(0,v.jsxs)(G.Z,{content:n,placement:i,children:[(0,v.jsx)("div",{className:"icon-tab-btn ".concat(d?"active":""),onClick:o?void 0:()=>c(l),children:s&&(0,v.jsx)("div",{className:"icon-tab-clickable",children:(0,v.jsx)("div",{style:{WebkitMask:"url(".concat(s,") center no-repeat"),WebkitMaskSize:"contain"},className:"icon"})})}),(0,v.jsx)("div",{className:"icon-tab-label ".concat(d?"active":""),children:a})]})},t)})}),(0,v.jsx)("div",{className:"formfield-error",children:(0,v.jsx)(L.M,{children:o&&(0,v.jsx)(k.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n.error})})})]})}function tI(e){let{name:t,options:a=[],btnClassName:l="",btnWrapperClassName:s="",variant:n="default",onChange:i}=e,[r,c,o]=(0,w.U$)(t),d=e=>{o.setTouched(!0);let t=Array.isArray(r.value)?r.value:[],a=t.includes(e)?t.filter(t=>t!==e):[...t,e];o.setValue(a),i&&i(a)},m=c.touched&&c.error;return(0,v.jsxs)("div",{className:"multi-selectable-buttons ".concat(m?"has-error":""," ").concat(n," ").concat(s),children:[(0,v.jsx)(L.M,{mode:"popLayout",children:a.map((e,t)=>{let{label:a,value:s}=e,n=Array.isArray(r.value)?r.value.includes(s):s===r.value;return(0,v.jsx)(k.E.button,{type:"button",initial:{opacity:0},animate:{opacity:1},transition:{duration:.25,delay:.05*t},className:"multi-selectable-button ".concat(n?"is-active":""," ").concat(l),onClick:()=>d(s),children:a},"".concat(t,"_").concat(s))})}),(0,v.jsx)("div",{className:"formfield-error",children:(0,v.jsx)(L.M,{children:m&&(0,v.jsx)(k.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:c.error})})})]})}a(21939),a(14923),(c=h||(h={})).default="default",c.thin="thin",a(61213);let tE=e=>[{icon:"/icons/bx_home.svg",label:"Ready",value:T.oz.existing,tooltipContent:e?"Off-Plan Strategy Selected":null,disabled:e},{icon:"/icons/carbon_floorplan.svg",label:"Off-Plan",value:T.oz.offPlan,tooltipContent:e?null:"Ready Strategy Selected",disabled:!e}],tO=[{icon:"/icons/apartment_outline_black.svg",label:"Apartment",value:T.uS.apartment},{icon:"/icons/villa_outline_black.svg",label:"Villa",value:T.uS.villa},{icon:"/icons/townhouse_outline_black.svg",label:"Townhouse",value:T.uS.townhouse},{icon:"/icons/hotel_apartment_outline_black.svg",label:"Hotel Apartment",value:T.uS.hotelApartment}],tR=[{label:"Furnished",value:"furnished"},{label:"Unfurnished",value:"unfurnished"},{label:"High Floor",value:"high-floor"},{label:"Low Floor",value:"low-floor"},{label:"Water View",value:"water-view"},{label:"Landmark View",value:"landmark-view"},{label:"Nature View",value:"nature-view"},{label:"Metro Access",value:"metro-access"}];var tW=a(27648),tq=a(31052),tz=a(83249);let tB=tq.Jm.map(e=>{let{value:t}=e;return{label:(0,v.jsx)(F.W,{countryName:t}),value:t}}),tH=_.Ry({first_name:_.Z_().nullable().when("authAction",{is:tv.sS.register,then:e=>e.required("First name is required")}),last_name:_.Z_().nullable().when("authAction",{is:tv.sS.register,then:e=>e.required("Last name is required")}),mobile:_.Z_().nullable().min(10,"Invalid mobile number").test({test:e=>!(e&&e.includes(E.iJ))||new RegExp(E.gp).test(e),message:"Invalid UAE mobile number"}).when("authAction",{is:tv.sS.register,then:e=>e.required("Mobile number is required")}),email:_.Z_().nullable().email("Invalid format").required("Email is required"),buying_timeline:_.Z_().nullable().required("Time period is required"),citizenship:_.Z_().nullable().when("authAction",{is:tv.sS.register,then:e=>e.required("Citizenship is required")}),residence:_.Z_().nullable().required("Country of residence is required"),termsAccepted:_.Xg().when("authAction",{is:tv.sS.register,then:e=>e.oneOf([!0],"Agree with the Terms and Conditions to proceed")})}),tY={first_name:"",last_name:"",email:"",mobile:"",buying_timeline:tz[1].value,property_owner:T.cT.isOwn,authAction:tv.sS.register,sourcePage:z.jY.onboardingJourneyV2,citizenship:null,residence:"UAE",termsAccepted:!1};function tU(){let{values:e,setFieldValue:t}=(0,w.u6)();return(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(Z,{children:(0,v.jsxs)("div",{className:"container",children:[(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-md-10 offset-md-1 text-center",children:(0,v.jsx)("div",{className:"pb-2",children:(0,v.jsx)(C.ZP,{variant:C.sT.h2,children:"Create your Prop-AI account"})})})}),(0,v.jsx)("div",{className:"row mb-sm-7",children:(0,v.jsxs)("div",{className:"col-md-10 col-lg-8 col-xl-6 col-xxl-5 mx-auto",children:[(0,v.jsxs)("div",{className:"row mb-3",children:[(0,v.jsx)("div",{className:"col-6",children:(0,v.jsx)(N.nv,{name:"first_name",label:"First Name *"})}),(0,v.jsx)("div",{className:"col-6",children:(0,v.jsx)(N.nv,{name:"last_name",label:"Last Name *"})})]}),(0,v.jsx)("div",{className:" mb-3",children:(0,v.jsx)("div",{className:"col-12",children:(0,v.jsx)(N.nv,{name:"email",label:"Email *"})})}),(0,v.jsx)("div",{className:" mb-3",children:(0,v.jsx)("div",{className:"col-12",children:(0,v.jsx)(N.g8,{name:"mobile",label:"Mobile *"})})}),(0,v.jsx)("div",{className:" mb-3",children:(0,v.jsx)("div",{className:"col-12",children:(0,v.jsx)(N.Ph,{name:"citizenship",options:tB,label:"Citizenship *",isClearable:!0})})}),(0,v.jsx)("div",{className:" mb-3",children:(0,v.jsx)("div",{className:"col-12",children:(0,v.jsx)(N.Ph,{name:"residence",options:tB,label:"Country of residence *"})})}),(0,v.jsx)("div",{className:" mb-3",children:(0,v.jsx)("div",{className:"col-12",children:(0,v.jsx)(N.Ph,{options:tz,name:"buying_timeline",label:"When are you planning to buy? *"})})}),(0,v.jsx)("div",{className:" mb-3",children:(0,v.jsx)("div",{className:"col-12",children:(0,v.jsx)(N.Ph,{options:T.sF,name:"property_owner",label:"Do you already own real estate? *"})})}),(0,v.jsx)("div",{className:" mb-3",children:(0,v.jsx)("div",{className:"col-12",children:(0,v.jsx)("div",{className:"terms-and-conditions-hint-text",children:(0,v.jsx)(N.XZ,{name:"termsAccepted",label:(0,v.jsx)(x.Fragment,{children:(0,v.jsxs)("span",{className:"fs-6",children:["By clicking, I give Prop-AI permission to contact me and agree to the",(0,v.jsxs)(tW.default,{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-primary fw-semibold text-underline",children:["\xa0",(0,v.jsx)("u",{children:"Terms & Conditions"})]})]})})})})})}),(0,v.jsx)("div",{className:"pt-3 pb-4 mb-sm-5",children:(0,v.jsx)("div",{className:"row g-0",children:(0,v.jsx)("div",{className:"col-12 fs-6",children:(0,v.jsxs)("div",{className:"d-flex justify-content-center align-items-center gap-2",children:["Already have an account?",(0,v.jsx)("div",{role:"button",className:"fw-medium text-primary",onClick:()=>{t("authAction",tv.sS.login)},children:"Sign in"})]})})})})]})})]})}),(0,v.jsx)(D,{children:(0,v.jsx)("div",{className:"container",children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(N.Mm,{children:"Create Account"})})})})})]})}function tV(){let{setFieldValue:e}=(0,w.u6)();return(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(Z,{children:(0,v.jsxs)("div",{className:"container",children:[(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-md-10 offset-md-1 text-center",children:(0,v.jsx)("div",{className:"pb-2",children:(0,v.jsx)(C.ZP,{variant:C.sT.h2,children:"Sign In to Prop-AI account"})})})}),(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-10 col-lg-8 col-xl-6 col-xxl-5 mx-auto ",children:(0,v.jsx)(N.nv,{name:"email",label:"Email *"})})}),(0,v.jsx)("div",{className:"pt-4",children:(0,v.jsx)("div",{className:"row g-0",children:(0,v.jsx)("div",{className:"col-12 pb-3 pb-md-4 fs-6",children:(0,v.jsxs)("div",{className:"d-flex justify-content-center align-items-center gap-2",children:["Don't have an account?",(0,v.jsx)("div",{role:"button",className:"fw-medium text-primary",onClick:()=>{e("authAction",tv.sS.register)},children:"Sign up"})]})})})})]})}),(0,v.jsx)(D,{children:(0,v.jsx)("div",{className:"container",children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(N.Mm,{children:"Sign-in"})})})})})]})}var tQ=a(24076),tJ=a(88056),tK=a(31034),tG=a(22201);let t$=_.Ry().shape({otp:_.Z_().length(6,"OTP is invalid").required("OTP is required")});var tX=a(27555),t0=a(78786),t1=a(67976),t2=a.n(t1),t6=a(20347),t5=a(11509);let t3=[{isLoaded:!1,loadingLabel:"Loading latest property listings",loadedLabel:"Loading <number> property listings"},{isLoaded:!1,loadingLabel:"Scoring relevant listings",loadedLabel:"Scoring <number> relevant listings",loadingFailedLabel:"Scored <number> relevant listings"},{isLoaded:!1,loadingLabel:"Removing fake and low scored properties",loadedLabel:"Removing <number> fake and low scored",loadingFailedLabel:"No relevant fake and low scored"},{isLoaded:!1,loadingLabel:"Shortlisting relevant properties",loadedLabel:"Shortlisting <number> properties",loadingFailedLabel:"Let's adjust the preferences to expand this search."},{isLoaded:!1,loadingLabel:"Preparing the top results",loadedLabel:"Preparing the top results",loadingFailedLabel:"Hang tight! You'll be redirected shortly."}],t4=e=>e.toLocaleString("en-US",{maximumFractionDigits:0,minimumFractionDigits:0}),t7=(e,t)=>{if(null==t)return e;let a=e.split("<number>");return(0,v.jsxs)("span",{children:[a[0],(0,v.jsx)(t6.Z,{from:0,to:t,className:"d-inline-block",decimals:0,durationSeconds:2,formatValue:t4}),a[1]]})},t9=e=>{let{isLoaded:t,useFailedLabel:a=!1,label:l,loadedLabel:s,loadedFailedLabel:n,valueToCountUpTo:i}=e,r=l;return t&&s&&(r=s),a&&n&&(r=n),r.includes("<number>")&&(r=t7(r,i)),(0,v.jsxs)("div",{className:"loading-stat",children:[(0,v.jsx)("div",{className:"icon ".concat(t?"":"loading"),children:t?(0,v.jsx)(ep.default,{src:"/icons/white-tick-circle-green.svg",alt:"",fill:!0},"loaded"):(0,v.jsx)(ep.default,{src:"/icons/loading.svg",alt:"",fill:!0},"loading")}),(0,v.jsx)("span",{className:"text-truncate",children:r})]})};function t8(e){let{isLoading:t=!1,maxTickCount:a=20,ticks:l=[],activeTickIdxList:s=[]}=e,{barHeights:n,activeTickIdxMap:i}=x.useMemo(()=>{let e=[],t={};if(Array.isArray(l)&&l.length>0){let t=Math.max(...l);l.forEach(a=>{if(0===a){e.push(.05/t*100);return}e.push(a/t*100)})}return Array.isArray(s)&&s.length>0&&(t=s.reduce((e,t)=>(e[t]=!0,e),t)),{barHeights:e,activeTickIdxMap:t}},[l.length,s.length]),r=l.length>0&&!t,c=t?a:l.length;return(0,v.jsx)("div",{className:"prop-ai-histogram-wrapper".concat(t?" is-loading":"").concat(r?" is-active":""),children:(0,v.jsx)("div",{className:"prop-ai-histogram",children:(0,v.jsx)(L.M,{children:Array.from({length:c}).map((e,a)=>{let l=t?void 0:"".concat(n[a],"%"),s=!!i[a];return(0,v.jsx)(k.E.div,{initial:{height:0},animate:{height:l},style:{animationDelay:"".concat(.2*a,"s")},className:"histogram-bar".concat(s?" is-active":"")},a)})})})})}a(51190),a(94822),a(40894);var ae=a(48421);a(64982);let at=e=>ex()(eg()(e)),aa=e=>{if(e){let{areaNamePropAi:t,projectNamePropAi:a,masterProjectPropAi:l,buildingName:s,propertyType:n}=e,i=t||"";l&&(i=l),a&&(i=a),!a&&s&&(i=s);let r=[at(i)];return n&&r.push(at(n)),r.join(" | ")}return null},al=e=>{let{project:t,onAddToWatchlist:a,isInWatchlist:l}=e,[s,n]=x.useState(0),i=t.properties[s],[r,c]=x.useState(!1),o=i.mapCoordinates,d={latitude:null==o?void 0:o.latitude,longitude:null==o?void 0:o.longitude,zoom:16},m=aa(i),u=(0,I.cD)(i.bedrooms,"BR")||null,p=(null==i?void 0:i.propertyType)||null;return(0,v.jsxs)("div",{className:"property-card",children:[(0,v.jsxs)("div",{className:"property-card-image flex-shrink-0 w-25",children:[r&&o?(0,v.jsxs)("div",{className:"property-map-container",children:[(0,v.jsxs)(ae.ZP,{style:{width:"100%",height:"100%",borderRadius:"inherit"},mapboxAccessToken:"pk.eyJ1IjoidGhpc2lzY3JpcyIsImEiOiJjbTQ3Z2t3a2EwNDQxMmpxeGtjZmxsZmQ3In0.pKKnCLXdnlyUIqXCYE7yLA",mapStyle:"mapbox://styles/mapbox/streets-v11",initialViewState:d,children:[(0,v.jsx)(ae.Jx,{longitude:o.longitude,latitude:o.latitude,anchor:"bottom"}),(0,v.jsx)(ae.Pv,{position:"bottom-left"})]}),(0,v.jsx)("button",{className:"close-map-button",onClick:()=>c(!1),children:(0,v.jsx)(S.J,{icon:"/icons/close.svg",size:20})})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(eH.Z,{dots:!1,infinite:!0,speed:500,arrows:!0,slidesToShow:1,slidesToScroll:1,beforeChange:(e,t)=>n(t),children:t.properties.map((e,t)=>{var a,l;return(0,v.jsx)("div",{className:"slider-image-container",children:(0,v.jsx)(eR.Z,{url:null===(l=e.photoUrls)||void 0===l?void 0:null===(a=l[0])||void 0===a?void 0:a.url,alt:"Property ".concat(t+1)})},t)})}),(0,v.jsxs)("div",{className:"overlay-buttons",children:[(e=>{let t=new Date(e);return(new Date().getTime()-t.getTime())/864e5<=30})(i.dateListed)&&(0,v.jsx)("button",{className:"launch-button",children:"New Launch"}),o&&(0,v.jsxs)("button",{className:"view-map-button d-flex align-items-center",onClick:()=>{(null==o?void 0:o.latitude)&&(null==o?void 0:o.longitude)?c(!0):console.error("Coordinates are not properly set for this property.")},type:"button",children:[(0,v.jsx)(S.J,{icon:"/icons/location-on.svg",backgroundColor:"#020202",size:18}),"View on Map"]})]})]}),(0,v.jsxs)("div",{className:"property-title-mobile-overlay",children:[(0,v.jsx)(C.ZP,{variant:C.sT.h5,className:"property-title fw-bold",children:m}),i.developerName&&(0,v.jsxs)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,className:"property-subtitle",children:["By ",at(i.developerName)]})]})]}),(0,v.jsxs)("div",{className:"property-card-details",children:[(0,v.jsxs)("div",{className:"card-header",children:[(0,v.jsxs)("div",{className:"property-details gap-1",children:[(0,v.jsx)(C.ZP,{variant:C.sT.h5,className:"property-title fw-bold",children:m}),i.developerName&&(0,v.jsxs)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,children:["By ",at(i.developerName)]})]}),(0,v.jsxs)("div",{className:"highlights-content d-flex mt-2 column gap-3 row-gap-1",children:[(0,v.jsxs)("div",{className:"highlights-item d-flex align-items-baseline gap-1",children:[(0,v.jsx)("div",{className:"p-1",children:(0,v.jsx)(S.J,{icon:"/icons/location-on.svg",backgroundColor:"#005EE3",size:18})}),(0,v.jsx)(C.ZP,{variant:C.sT.body,children:at(i.areaNamePropAi)})]}),(0,v.jsxs)("div",{className:"highlights-item d-flex align-items-baseline gap-1",children:[(0,v.jsx)("div",{className:"p-1",children:(0,v.jsx)(S.J,{icon:"/icons/building.svg",backgroundColor:"#005EE3",size:19})}),(0,v.jsx)(C.ZP,{variant:C.sT.body,children:p})]}),(0,v.jsxs)("div",{className:"highlights-item d-flex align-items-baseline gap-1",children:[(0,v.jsx)("div",{className:"p-1",children:(0,v.jsx)(S.J,{icon:"/icons/bedrooms.svg",backgroundColor:"#005EE3",size:18})}),(0,v.jsx)(C.ZP,{variant:C.sT.body,children:u})]}),(0,v.jsxs)("div",{className:"highlights-item d-flex align-items-baseline gap-1",children:[(0,v.jsx)("div",{className:"p-1",children:(0,v.jsx)(S.J,{icon:"/icons/triangular-ruler.svg",backgroundColor:"#005EE3",size:18})}),(0,v.jsx)(C.ZP,{variant:C.sT.body,children:(0,E.jM)(i.areaInSqm*E.qo,"sqft",0)})]})]})]}),(0,v.jsxs)("div",{className:"metrics-item text-end",children:[(0,v.jsx)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,children:"Starting Price"}),(0,v.jsxs)(C.ZP,{variant:C.sT.h5,className:"fw-bold",children:[(0,v.jsx)(V.Z,{value:null,currencyStr:"AED"}),(0,E.gs)(i.askingPrice)]})]}),(0,v.jsxs)("div",{className:"metrics-item mt-3",children:[(0,v.jsx)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,children:"Price per SQFT"}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,className:"fw-bold",children:(0,v.jsx)(V.Z,{value:i.pricePerSqft,currencyStr:"AED",decimals:0})})]}),(0,v.jsxs)("div",{className:"metrics-item mt-3",children:[(0,v.jsx)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,children:"Total Listings"}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,className:"fw-bold",children:t.property_count})]}),(0,v.jsx)("div",{className:"watchlist-button d-flex justify-content-between align-items-center mt-3 ".concat(l?"clicked":""),children:(0,v.jsx)(tQ.Z,{variant:"outline-primary",onClick:()=>{i.areaNamePropAi&&i.projectNamePropAi&&i.masterProjectPropAi&&a([i.areaNamePropAi,i.masterProjectPropAi,i.projectNamePropAi].join("_"))},className:"py-2 w-100",disabled:l,children:l?(0,v.jsxs)("div",{className:"d-flex justify-content-center align-items-center gap-2",children:[(0,v.jsx)(S.J,{icon:"/icons/checkmark.svg",backgroundColor:"#0060e5"}),(0,v.jsx)("div",{children:"Added"})]}):"Add to Watchlist"})})]})]})};a(36429);let as=[function(e){let{isCalculationComplete:t,isProgressMetricsAvailable:a,moveToTheNextSubsection:l}=e,s=(0,t5.b)(),{propertyScoringData:n}=(0,g.v9)(e=>e.watchlist),{totalScoredProperties:i,userPreferenceFiltered:r,totalFiltered:c}=n,[o,d]=x.useState(t3),m=x.useMemo(()=>{let e=o.slice(),a=o.slice(0,4).every(e=>{let{isLoaded:t}=e;return t});return e[4].isLoaded=a&&t,e},[o,t]),u=()=>{o.slice().forEach((e,t)=>{t2()(()=>{d(a=>{let l=a.slice();return l[t]={...e,isLoaded:!0},l})},2e3*(t+1))})};x.useEffect(()=>{i>0&&u()},[i]);let p=0===c,h=m.every(e=>{let{isLoaded:t}=e;return t});return x.useEffect(()=>{let e;return h&&p&&(e=setTimeout(()=>{l()},5e3)),()=>{clearTimeout(e)}},[h,p]),(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(Z,{children:(0,v.jsx)("div",{className:"loading-screen",children:(0,v.jsxs)("div",{className:"container",children:[(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-12",children:(0,v.jsx)("div",{className:"loading-animation-wrapper",children:(0,v.jsx)(ep.default,{src:"/animated/results-loading.gif",fill:!0,alt:"Loading...",style:{objectFit:"contain"}})})})}),(0,v.jsx)("div",{className:"row mt-4",children:(0,v.jsxs)("div",{className:"col-md-8 col-lg-7 col-xl-6 col-xxl-5 mx-auto",children:[(0,v.jsx)(t9,{isLoaded:m[0].isLoaded&&a.isTotalScoredPropertiesLoaded,label:m[0].loadingLabel,loadedLabel:m[0].loadedLabel,valueToCountUpTo:i}),(0,v.jsx)(t9,{isLoaded:m[1].isLoaded&&a.isUserPreferenceFilteredLoaded,useFailedLabel:m[1].isLoaded&&a.isUserPreferenceFilteredLoaded&&p,label:m[1].loadingLabel,loadedLabel:m[1].loadedLabel,loadedFailedLabel:m[1].loadingFailedLabel,valueToCountUpTo:r}),(0,v.jsx)(t9,{isLoaded:m[2].isLoaded&&a.isTotalFilteredLoaded,useFailedLabel:m[2].isLoaded&&a.isTotalFilteredLoaded&&p,label:m[2].loadingLabel,loadedLabel:m[2].loadedLabel,loadedFailedLabel:m[2].loadingFailedLabel,valueToCountUpTo:r-c}),(0,v.jsx)(t9,{isLoaded:m[3].isLoaded&&a.isTotalFilteredLoaded,useFailedLabel:m[3].isLoaded&&a.isTotalFilteredLoaded&&p,label:m[3].loadingLabel,loadedLabel:m[3].loadedLabel,loadedFailedLabel:m[3].loadingFailedLabel,valueToCountUpTo:c}),(0,v.jsx)(t9,{isLoaded:m[4].isLoaded&&a.isShortlistedCountLoaded,useFailedLabel:m[4].isLoaded&&a.isShortlistedCountLoaded&&p,label:m[4].loadingLabel,loadedLabel:m[4].loadedLabel,loadedFailedLabel:m[4].loadingFailedLabel})]})})]})})}),!p&&(0,v.jsx)(D,{children:(0,v.jsx)("div",{className:"container",children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(N.Mm,{disabled:!h,children:s?"Show properties":"Continue"})})})})})]})},e=>{let{distribution:t=[],isProgressMetricsAvailable:a,moveToMainSectionAndRerunScoringPreview:l,moveToTheNextSubsection:s}=e,{values:n,setFieldValue:i}=(0,w.u6)(),r=[],c=[];Array.isArray(t)&&t.length>0&&t.forEach(e=>{r.push(e.tick),c.push(e.count)});let o=Math.min(...r),d=Math.max(...r),m=20===r.length,u=r.reduce((e,t,a)=>(!(0===a||a===r.length-1)&&m&&(a+1)%5?e[t]=(0,v.jsx)("div",{}):e[t]=(0,E.gs)(t,!0),e),{}),p=0===t.length,h=n["investment-select"],j=n.investment,g=n.previousInvestment,f=j!==g,b=!a.isBudgetDistributionLoaded,N=t.findIndex(e=>e.tick===n.investment),y=x.useMemo(()=>{let e=[];return r.forEach((t,a)=>{t<=n.investment&&e.push(a)}),e},[n.investment]),P=t.reduce((e,t,a)=>a<=N&&t.count?e+t.count:e,0);return(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(Z,{children:(0,v.jsxs)("div",{className:"container",children:[(0,v.jsx)("div",{className:"row mb-5 text-center",children:(0,v.jsxs)("div",{className:"col-md-10 offset-md-1",children:[(0,v.jsx)(C.ZP,{variant:C.sT.h2,children:"No Properties Yet"}),(0,v.jsx)(C.ZP,{variant:C.sT.body2,color:C.HL.greyDark,className:"mt-2",children:"We didn't find a match. Adjust your budget or location to explore options."})]})}),(0,v.jsx)("div",{className:"row mb-5 text-center",children:(0,v.jsxs)("div",{className:"col-md-10 offset-md-1",children:[f?(0,v.jsx)(C.ZP,{variant:C.sT.body,children:"New Budget"}):(0,v.jsx)(C.ZP,{variant:C.sT.body,children:"Selected Budget"}),(0,v.jsx)(C.ZP,{variant:C.sT.h2,color:C.HL.greyDark,className:"mt-1",children:(0,v.jsx)(V.Z,{value:j,currencyStr:h,decimals:0})}),f&&(0,v.jsxs)(C.ZP,{variant:C.sT.bodySmall,color:C.HL.greyDark,className:"mt-1",children:[(0,v.jsx)("span",{children:"Previous Budget: "}),(0,v.jsx)(V.Z,{value:g,currencyStr:h,decimals:0})]})]})}),(0,v.jsx)("div",{className:"row mb-2 text-center",children:(0,v.jsxs)("div",{className:"col-md-10 offset-md-1 d-flex align-items-center justify-content-center gap-2",children:[(0,v.jsx)("img",{src:"/images/logo-blue.png",alt:"Logo",width:"35",height:"35"}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,children:"Prop-AI Suggestions"})]})}),(0,v.jsxs)("div",{className:"row mb-3 text-center",children:[!b&&!p&&(0,v.jsxs)("div",{className:"col-md-10 offset-md-1",children:[(0,v.jsxs)(C.ZP,{variant:C.sT.body,color:C.HL.greyDark,children:["We found properties in"," ",(0,v.jsx)(V.Z,{value:null,currencyStr:h})," ",(0,E.gs)(o,!0)," to"," ",(0,v.jsx)(V.Z,{value:null,currencyStr:h})," ",(0,E.gs)(d,!0)," range."]}),(0,v.jsx)("div",{className:"mt-3 mt-md-1",children:(0,v.jsx)(C.ZP,{variant:C.sT.body,weight:"700",color:C.HL.greyDark,children:"Would you like to adjust your budget?"})})]}),b&&(0,v.jsx)("div",{className:"col-md-10 offset-md-1",children:(0,v.jsx)(C.ZP,{variant:C.sT.body2,color:C.HL.greyDark,children:"Expanding search to fit your budget preferences..."})})]}),(0,v.jsx)("div",{className:"row mb-3",children:(0,v.jsx)("div",{className:"col-md-6 offset-md-3",children:!b&&p?(0,v.jsx)("div",{className:"text-center pb-4",children:(0,v.jsx)(C.ZP,{variant:C.sT.body,color:C.HL.greyDark,children:"We couldn't match properties for your preferences. Would you like to check other locations for the current budget?"})}):(0,v.jsx)(t8,{ticks:c,activeTickIdxList:y,isLoading:b,maxTickCount:20})})}),!p&&(0,v.jsx)("div",{className:"row mb-3",children:(0,v.jsxs)("div",{className:"col-md-6 offset-md-3",children:[(0,v.jsx)("div",{className:"adjust-budget-slider-wrapper",children:(0,v.jsx)(M.Z,{min:o,max:d,step:null,value:n.investment,onChange:e=>{!Array.isArray(e)&&e>0&&i("investment",e)},className:"adjust-budget-slider",marks:u,dotStyle:{display:"none"},activeDotStyle:{borderColor:"#007bff"},styles:{track:{backgroundColor:"#007bff",height:5},rail:{backgroundColor:"#e9ecef",height:5},handle:{borderColor:"#007bff",height:13,width:13,backgroundColor:"#007bff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}})}),(0,v.jsx)("div",{className:"text-center mt-5",children:!p&&(0,v.jsxs)(C.ZP,{variant:C.sT.h5,children:[P," ",1===P?"Property":"Properties"," ","Matched"]})})]})})]})}),(0,v.jsx)(D,{children:(0,v.jsxs)("div",{className:"container",children:[(0,v.jsx)("div",{className:"row"}),(0,v.jsxs)("div",{className:"row mt-2 justify-content-center",children:[(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4",children:(0,v.jsx)(tQ.Z,{type:"button",className:"px-4 py-3 w-100",onClick:l,disabled:!f,children:"Continue with New Budget"})}),(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mt-3 mt-md-0",children:(0,v.jsx)(tQ.Z,{className:"px-4 py-3 w-100 text-primary border border-primary bg-white",onClick:s,children:(0,v.jsx)("span",{className:"ms-2",children:"Keep Previous Budget & Find Properties"})})})]})]})})]})},e=>{let{fallbackProperties:t=[],moveToMainSectionAndRerunScoringPreview:a}=e,{dubaiDropdownLocations:l}=P(),{values:s,setFieldValue:n}=(0,w.u6)(),i=x.useMemo(()=>l.length>0?l.filter(e=>{let{type:t}=e;return t===z.mQ.project}):[],[l]),r=e=>{let t=i.find(t=>{let{propAiLocationKey:a}=t;return a===e});t&&(s.preferredLocations.some(e=>!!e.propAiLocationKey&&e.type===z.mQ.project&&e.propAiLocationKey===t.propAiLocationKey)||n("preferredLocations",[...s.preferredLocations,t]))},c=x.useMemo(()=>t.reduce((e,t)=>e+t.property_count,0),[t]),o=x.useMemo(()=>s.preferredLocations.filter(e=>e.type===z.mQ.project&&"Project"===e.typeLabel).length,[s.preferredLocations]);return(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(Z,{children:(0,v.jsxs)("div",{className:"container adjust-location-container",children:[(0,v.jsx)("div",{className:"row mb-5",children:(0,v.jsxs)("div",{className:"col-md-10 offset-md-1 text-center",children:[(0,v.jsx)("div",{className:"pb-2",children:(0,v.jsx)(C.ZP,{variant:C.sT.h2,children:"Properties Found"})}),(0,v.jsxs)(C.ZP,{variant:C.sT.body2,color:C.HL.greyDark,children:["We found ",c," properties across"," ",t.length," projects. Add them to your watchlist?"]})]})}),(0,v.jsxs)("div",{className:"property-list-container row col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 mb-1 mx-auto ",children:[(0,v.jsxs)("div",{className:"property-list-header d-flex justify-content-between",children:[(0,v.jsxs)("div",{className:"d-inline-flex gap-3",children:[(0,v.jsx)(S.J,{icon:"/icons/building.svg",backgroundColor:"#262626",size:24}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,children:"Projects"})]}),(0,v.jsxs)(C.ZP,{variant:C.sT.body2,color:C.HL.greyDark,children:[o," of 6 selected"]})]}),(0,v.jsx)("div",{className:"property-list-preffered-loctions my-4",children:s.preferredLocations.length>0&&(0,v.jsx)("div",{className:"preferredLocationsList",children:(0,v.jsx)(ey.SelectedValuesContainer,{name:"preferredLocations"})})}),(0,v.jsx)("div",{className:"property-cards-list-container col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 mb-1 mx-auto",children:t.map(e=>{let t=e.properties[0].projectNamePropAi||"",a=s.preferredLocations.some(e=>!!e.projectName&&e.type===z.mQ.project&&e.projectName===t);return(0,v.jsx)(al,{project:e,onAddToWatchlist:r,isInWatchlist:a},e._id)})})]})]})}),(0,v.jsx)(D,{children:(0,v.jsx)("div",{className:"container",children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(tQ.Z,{className:"px-4 py-3 w-100",onClick:a,children:(0,v.jsx)("span",{className:"ms-2",children:"Continue"})})})})})})]})}],an={[tv.UF.investmentStrategy]:function(){let{values:e,setFieldValue:t,setValues:a}=(0,w.u6)(),l=er.findIndex(t=>t===e.investmentOptionsOptimizedFor),s=(()=>{if(!e.investmentPurpose)return"Select Purpose to continue";if(e.investmentOptionsOptimizedFor===er[0]){let t="";if(e.selectedFinancialInvestmentOptions.length>0){let{selectedFinancialInvestmentOptions:a}=e,l=a.length>1?"ies":"y";t="Continue with ".concat(a.length," priorit").concat(l)}else t="Select priorities to continue";return t}return e.investmentOptionsOptimizedFor===er[1]?e.selectedStrategyInvestmentOption?"Continue with this strategy":"Select strategy to continue":"Continue"})(),n=e.investmentPurpose===T.R9.moveIn,i=x.useMemo(()=>n?T.ut.filter(e=>!es[e.value]):T.ut,[n]),r=t=>{let l={...e};l.selectedStrategyInvestmentOption=t;let s=t.includes("Off-Plan")?T.oz.offPlan:T.oz.existing;l.developmentStatus=[s],s===T.oz.offPlan&&(l.mortgage=0),a(l)},c=T.Bo.filter(e=>e.value.includes("Ready")),d=T.Bo.filter(e=>e.value.includes("Off-Plan"));return(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(Z,{children:(0,v.jsxs)("div",{className:"container",children:[(0,v.jsx)("div",{className:"row mb-5 mb-md-4",children:(0,v.jsxs)("div",{className:"col-md-10 offset-md-1 text-center",children:[(0,v.jsx)("div",{className:"pb-2",children:(0,v.jsx)(C.ZP,{variant:C.sT.h2,children:"Investment Strategy"})}),(0,v.jsx)(C.ZP,{variant:C.sT.body2,color:C.HL.greyDark,children:"Why are you looking to buy a property?"})]})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(A,{name:"investmentPurpose",options:T.Tr,onChange:a=>{T.R9.moveIn===a&&(e.investmentOptionsOptimizedFor!==er[0]&&(t("investmentOptionsOptimizedFor",er[0]),t("selectedStrategyInvestmentOption",null)),t("selectedFinancialInvestmentOptions",eo.selectedFinancialInvestmentOptions))}})})}),(0,v.jsx)("div",{className:"row mb-3",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto text-center",children:(0,v.jsxs)("div",{className:"d-inline-flex gap-3",children:[(0,v.jsx)(S.J,{icon:"/icons/growth.svg",backgroundColor:"#262626",size:24}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,children:"What do you want to optimize for"})]})})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(et,{tabs:n?ec:er,activeTabIdx:l,setActiveTabIdx:a=>{let l=er[a];er.includes(l)&&e.investmentOptionsOptimizedFor!==l&&t("investmentOptionsOptimizedFor",l)},fullWidthTabs:!0})})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsxs)("div",{className:"col-md-6 col-lg-5 col-xl-7 mx-auto py-4",children:[0===l&&(0,v.jsx)(x.Fragment,{children:(0,v.jsx)(el,{name:"selectedFinancialInvestmentOptions",options:i,sliceSize:6,onChange:e=>{let a=e.includes(T.Ef.shortTermAppriciation),l=e.includes(T.Ef.longTermAppriciation);a&&l&&(e=e[e.length-1]===T.Ef.shortTermAppriciation?e.filter(e=>e!==T.Ef.longTermAppriciation):e.filter(e=>e!==T.Ef.shortTermAppriciation)),t("selectedFinancialInvestmentOptions",e)}})},"financial-priority-options"),1===l&&(0,v.jsx)(x.Fragment,{children:(0,v.jsxs)("div",{className:"row",children:[(0,v.jsxs)("div",{className:"col-md-6",children:[(0,v.jsx)(C.ZP,{variant:C.sT.body,className:"mb-3 text-center",color:C.HL.greyDark,children:"Ready"}),(0,v.jsx)(A,{name:"selectedStrategyInvestmentOption",options:c.map(e=>({label:(0,v.jsxs)("div",{className:"d-flex gap-2 align-items-center justify-content-between",children:[(0,v.jsx)("span",{children:e.label}),(0,v.jsx)(ea,{variant:en[e.marketRisk],children:ei[e.marketRisk]})]}),value:e.value})),variant:o.thin,onChange:r})]}),(0,v.jsxs)("div",{className:"col-md-6",children:[(0,v.jsx)(C.ZP,{variant:C.sT.body,className:"mb-3 text-center",color:C.HL.greyDark,children:"Off-Plan"}),(0,v.jsx)(A,{name:"selectedStrategyInvestmentOption",options:d.map(e=>({label:(0,v.jsxs)("div",{className:"d-flex gap-2 align-items-center justify-content-between",children:[(0,v.jsx)("span",{children:e.label}),(0,v.jsx)(ea,{variant:en[e.marketRisk],children:ei[e.marketRisk]})]}),value:e.value})),variant:o.thin,onChange:r})]})]})},"investment-strategy-options")]})})]})}),(0,v.jsx)(D,{children:(0,v.jsx)("div",{className:"container",children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(N.Mm,{children:s})})})})})]})},[tv.UF.availableBudget]:function(){let{values:e,setFieldValue:t}=(0,w.u6)(),[a,l]=x.useState(!1),s=e["investment-select"],n=e.budgetPurpose===T.O5[0].value,i=e.mortgage,r=Number(e.investment||0),c=n?m.propertyPrice:m.investment,o=(0,I.Cb)(r,i,n?z.I4.propertyPrice:z.I4.investment),d=n?r:r+o,p=null==e?void 0:e.minimumAllowedBudgetForResidency,h=p&&"number"==typeof p&&d<p,j=Q(e);return(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(Z,{children:(0,v.jsxs)("div",{className:"container",children:[(0,v.jsx)("div",{className:"row mb-5 mb-md-4",children:(0,v.jsxs)("div",{className:"col-md-10 offset-md-1 text-center",children:[(0,v.jsx)("div",{className:"pb-2",children:(0,v.jsx)(C.ZP,{variant:C.sT.h2,children:"Available Budget"})}),(0,v.jsx)(C.ZP,{variant:C.sT.body2,color:C.HL.greyDark,children:"What is your budget and financing plans?"})]})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(A,{name:"budgetPurpose",options:T.O5})})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-md-10 offset-md-1 text-center",children:(0,v.jsxs)("div",{className:"d-inline-flex align-items-center gap-1",children:[(0,v.jsx)(S.J,{icon:"/icons/usd_cropped.svg",backgroundColor:"#262626",size:24}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,children:e.budgetPurpose===T.O5[0].value?"Total Investment":"Upfront Investment"})]})})}),(0,v.jsx)("div",{className:"row mb-3",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(N.wg,{name:"investment",inputProps:{min:1,max:1e10},selectOptions:$,resolvePrefix:(e,t)=>(0,v.jsx)(V.Z,{currencyStr:t,value:null}),decimalPoints:0,onInputChange:e=>{t("previousInvestment",e)}})})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-md-10 offset-md-1 text-center",children:(0,v.jsxs)("div",{className:"d-inline-flex align-items-center gap-1",children:[(0,v.jsx)(S.J,{icon:"/icons/usd_cropped.svg",backgroundColor:"#262626",size:24}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,children:"Financing"})]})})}),(0,v.jsx)("div",{className:"row mb-3",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(G.Z,{content:j?"Off-Plan Projects typically can't be financed with a mortgage":null,children:(0,v.jsx)(q,{calculationType:c,investment:r,name:"mortgage",decimals:0,disabled:j})})})}),(0,v.jsx)("div",{className:"row mb-5",children:(0,v.jsx)("div",{className:"col-md-8 col-lg-10 mx-auto",children:(0,v.jsx)(L.M,{children:i>0&&(0,v.jsx)(k.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,v.jsx)("div",{className:"d-flex flex-column align-items-center pb-2 pt-2",children:(0,v.jsxs)("div",{className:"d-flex flex-column align-items-center gap-3",style:{height:a?"170px":"auto"},children:[(0,v.jsx)(C.ZP,{variant:C.sT.bodyHeader,color:C.HL.body,children:"Do you need help with your mortgage?"}),(0,v.jsx)(U,{name:"isMortgagePreapproved",onOpenChange:l})]})})})})})}),(0,v.jsx)("div",{className:"row mb-5",children:(0,v.jsxs)("div",{className:"col-md-8 col-lg-10 mx-auto",children:[(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)(C.ZP,{variant:C.sT.body2,children:"Total Budget"}),(0,v.jsx)(C.ZP,{variant:C.sT.h1,className:"my-2",children:(0,v.jsx)(V.Z,{value:d,currencyStr:s,decimals:0})}),(0,v.jsx)("div",{className:"pt-1 pb-4",children:(0,v.jsx)(Y,{name:"selectedBudgetRange",investment:d,investmentCurrency:s})})]}),(0,v.jsx)(L.M,{children:h&&(0,v.jsx)(k.E.div,{initial:{opacity:0,marginTop:-25},animate:{opacity:1,marginTop:0},exit:{opacity:0,marginTop:-25},className:"py-3",children:(0,v.jsxs)(H,{variant:u.warning,children:[(0,v.jsx)("span",{children:"Please note that your investment budget is lower than the minimum amount of"}),(0,v.jsxs)("span",{children:["\xa0",(0,v.jsx)(B.Z,{type:B.k.currency,value:p,currencySymbol:s,showCurrencyWording:!0,className:"d-inline-block"}),"\xa0"]}),(0,v.jsx)("span",{children:"that is required for applying residency or passport"})]})})})]})})]})}),(0,v.jsx)(D,{children:(0,v.jsx)("div",{className:"container",children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(N.Mm,{children:"Continue"})})})})})]})},[tv.UF.preferredLocations]:function(){let{isMapActive:e,setIsMapActive:t,isMapDisabled:a,setIsMapDisabled:l,dubaiDropdownLocations:s,isDubaiDropdownLocationsLoading:n}=P(),{values:i}=(0,w.u6)();x.useEffect(()=>()=>t(!1),[]);let r=tF(i.preferredLocations.length);return(0,v.jsx)(x.Fragment,{children:e?(0,v.jsx)("div",{className:"overlay-enabled-map-wrapper",children:(0,v.jsx)(tD.Z,{content:tZ,delaySeconds:a?void 0:130,actions:[{title:"List View",onClick:()=>{t(!1),l(!0)},variant:"outline-light"}],containerClassName:"align-items-center",children:(0,v.jsx)(tA,{isMapModeActive:e,setIsMapModeActive:t,submitBtnLabel:r,dubaiDropdownLocations:s,isLoading:n})})}):(0,v.jsx)(tT,{isMapModeActive:e,setIsMapModeActive:t,submitBtnLabel:r,dubaiDropdownLocations:s,isLoading:n})})},[tv.UF.propertyPreferences]:function(){let{values:e,setFieldValue:t}=(0,w.u6)(),a=e.propertyType,l=a.length>0&&a.every(e=>e===T.uS.villa||e===T.uS.townhouse),s=J(e),n=tE(K(e));s||(n=n.map(e=>{let{tooltipContent:t,disabled:a,...l}=e;return{...l}}));let i=(()=>{let t=e.developmentStatus.length;return t+e.propertyType.length+e.bedroomPreference.length+e.additionalPropertyPreferencesOptions.length})(),r=i?"Continue with ".concat(i," preference").concat(i>1?"s":""):"Continue";return(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(Z,{children:(0,v.jsxs)("div",{className:" property-preferences-container container",children:[(0,v.jsx)("div",{className:"row mb-5",children:(0,v.jsxs)("div",{className:"col-md-10 offset-md-1 text-center",children:[(0,v.jsx)("div",{className:"pb-2",children:(0,v.jsx)(C.ZP,{variant:C.sT.h2,children:"Property Preferences"})}),(0,v.jsx)(C.ZP,{variant:C.sT.body2,color:C.HL.greyDark,children:"Tell us more about what you're looking for"})]})}),(0,v.jsx)("div",{className:"preference-header row mb-2",children:(0,v.jsx)("div",{className:"col-md-8 col-lg-7 col-xl-6 mx-auto text-center",children:(0,v.jsxs)("div",{className:"d-inline-flex gap-3",children:[(0,v.jsx)(S.J,{icon:"/icons/bx_home.svg",backgroundColor:"#262626",size:24}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,className:"full-header",children:"Do you have a preferred development status?"}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,className:"short-header",children:"Development Status"})]})})}),(0,v.jsx)("div",{className:"preference-content row mt-4 mb-5",children:(0,v.jsx)("div",{className:"col-md-8 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(tM,{name:"developmentStatus",tabs:n,onChange:e=>{1===e.length&&e[0]===T.oz.offPlan&&t("mortgage",0)}})})}),(0,v.jsx)("div",{className:"preference-header row",children:(0,v.jsx)("div",{className:"col-md-8 col-lg-7 col-xl-6 mx-auto text-center",children:(0,v.jsxs)("div",{className:"d-inline-flex gap-4",children:[(0,v.jsx)(S.J,{icon:"/icons/buildings-blue.svg",backgroundColor:"#262626",size:24}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,className:"full-header",children:"What type of property are you looking for?"}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,className:"short-header",children:"Property Type"})]})})}),(0,v.jsx)("div",{className:"preference-content row mt-4 mb-5",children:(0,v.jsx)("div",{className:"col-md-8 col-lg-5 col-xl-5 mx-auto",children:(0,v.jsx)(tM,{name:"propertyType",tabs:tO})})}),(0,v.jsx)("div",{className:"preference-header row",children:(0,v.jsx)("div",{className:"col-md-8 col-lg-7 col-xl-6 mx-auto text-center",children:(0,v.jsxs)("div",{className:"d-inline-flex gap-3",children:[(0,v.jsx)(S.J,{icon:"/icons/bed-blue.svg",backgroundColor:"#262626",size:24}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,className:"full-header",children:"How many bedrooms do you prefer?"}),(0,v.jsx)(C.ZP,{variant:C.sT.h5,className:"short-header",children:"Bedrooms"})]})})}),(0,v.jsx)("div",{className:"preference-content row my-4 mb-md-5",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(tI,{name:"bedroomPreference",options:T.cO})})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"col-md-8 col-lg-7 col-xl-6 mx-auto py-0",children:(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(el,{name:"additionalPropertyPreferencesOptions",columns:[{header:"Furnishing",options:tR.filter(e=>["furnished","unfurnished"].includes(e.value))},{header:"Floor",options:tR.filter(e=>["high-floor","low-floor"].includes(e.value)).map(e=>({...e,disabled:l}))},{header:"View",options:tR.filter(e=>["water-view","landmark-view","nature-view"].includes(e.value))},{header:"Other",options:tR.filter(e=>"metro-access"===e.value)}],sliceSize:0,selectablePillsClassName:"property-view-selectable"}),(0,v.jsx)("div",{className:"container mt-4",children:(0,v.jsx)("div",{className:"row justify-content-center",children:(0,v.jsxs)("div",{className:"col-12 text-center",children:[(0,v.jsx)(C.ZP,{variant:C.sT.h5,children:"Other Preferences"}),(0,v.jsx)(N.Kx,{name:"furtherPreferences",label:"Describe any preferences",inputProps:{style:{minHeight:"5.5rem"}}})]})})})]},"priority-view-options")})})]})}),(0,v.jsx)(D,{children:(0,v.jsx)("div",{className:"container",children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(N.Mm,{children:r})})})})})]})},[tv.UF.authenticate]:function(){let{values:e}=(0,w.u6)(),t=e.authAction===tv.sS.login,a=e.authAction===tv.sS.register;return(0,v.jsx)(x.Fragment,{children:(0,v.jsxs)(L.M,{children:[t&&(0,v.jsx)(tV,{}),a&&(0,v.jsx)(tU,{})]})})},[tv.UF.confirmOtp]:function(){let e=(0,eU.s)(),{values:t,setFieldValue:a}=(0,w.u6)(),[l,s]=x.useState(!0),[n]=(0,eP.Yu)(),i=async()=>{let e=await n({email:t.email});(null==e?void 0:e.error)||((0,tG.$j)({action:"SIGNIN",category:"ONBOARDING_SURVEY",label:"Re-send OTP"}),s(!0),a("otp",""))};return(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)(Z,{children:(0,v.jsxs)("div",{className:"container",children:[(0,v.jsx)("div",{className:"row mb-5",children:(0,v.jsxs)("div",{className:"col-md-10 offset-md-1 text-center",children:[(0,v.jsx)("div",{className:"pb-2",children:(0,v.jsx)(C.ZP,{variant:C.sT.h2,children:"Confirm your email"})}),(0,v.jsx)(C.ZP,{variant:C.sT.body2,color:C.HL.greyDark,children:"Check your email for 6-digit OTP code we sent you"})]})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)(tJ.Z,{name:"otp",size:e?4:5})}),(0,v.jsx)("div",{className:"row mb-2",children:(0,v.jsx)("div",{className:"pt-4 fs-6 d-flex",children:(0,v.jsx)("div",{className:"d-inline-block mx-auto",children:l?(0,v.jsxs)("div",{className:"text-center mt-4",children:["Resend OTP in:\xa0",(0,v.jsx)(tK.Z,{seconds:60,onEnd:()=>{s(!1)},className:"d-inline-block text-success fw-medium"})]}):(0,v.jsx)(tQ.Z,{type:"button",variant:"link",className:"text-primary mt-3 px-4",onClick:i,children:"Resend the code"})})})})]})}),(0,v.jsx)(D,{children:(0,v.jsx)("div",{className:"container",children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-6 col-lg-5 col-xl-4 mx-auto",children:(0,v.jsx)(N.Mm,{children:"Confirm"})})})})})]})},[tv.UF.scoreAndLoadProperties]:()=>{let e=(0,g.I0)(),{values:t}=(0,w.u6)(),[a,l]=x.useState(0),[s,n]=x.useState(null),[i,r]=x.useState(!1),[c,o]=x.useState({isTotalScoredPropertiesLoaded:!1,isUserPreferenceFilteredLoaded:!1,isTotalFilteredLoaded:!1,isShortlistedCountLoaded:!1,isBudgetDistributionLoaded:!1,isNewPropertiesLoaded:!1}),[d,m]=x.useState([]),[u,p]=x.useState([]),[h]=(0,eP.eF)(),j=async e=>{let a={connectionId:e,userData:{...t}},l=await h(a);(null==l?void 0:l.error)&&(console.error("Unable to initiate calculation using Socket ID."),console.error(l.error))},f=()=>{let t=(0,tX.io)("https://prod-websocket.prop-ai.com/",{path:"/socket/socket.io",transports:["websocket","polling"],withCredentials:!0,autoConnect:!1,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5});return t.on("newCon",e=>{e&&(n(e),j(e))}),t.on("results",()=>{r(!0)}),t.on("progressTotalScoredProperties",t=>{e(t0.y.setWatchlistPropertyScoringData({totalScoredProperties:t})),o(e=>({...e,isTotalScoredPropertiesLoaded:!0}))}),t.on("progressUserPreferenceFiltered",t=>{e(t0.y.setWatchlistPropertyScoringData({userPreferenceFiltered:t})),o(e=>({...e,isUserPreferenceFilteredLoaded:!0}))}),t.on("progressTotalFiltered",t=>{e(t0.y.setWatchlistPropertyScoringData({totalFiltered:t})),o(e=>({...e,isTotalFilteredLoaded:!0}))}),t.on("progressShortlistedCount",t=>{e(t0.y.setWatchlistPropertyScoringData({shortlistedCount:t})),o(e=>({...e,isShortlistedCountLoaded:!0}))}),t.on("alternativeBudgetDistributions",e=>{m(e.distribution),o(e=>({...e,isBudgetDistributionLoaded:!0}))}),t.on("alternativeMatchingProjects",e=>{p(e.matchingProjects),o(e=>({...e,isNewPropertiesLoaded:!0}))}),t.on("connect_error",e=>{console.error("Socket connection initiation error"),console.error(e)}),t.on("error",e=>{console.error("Socket error event:"),console.error(e)}),t};x.useEffect(()=>{let e=f();return e.connected||e.connect(),()=>{e.connected&&e.disconnect()}},[]);let b=as[a];return b?(0,v.jsx)(b,{isCalculationComplete:i,isProgressMetricsAvailable:c,distribution:d,fallbackProperties:u,moveToMainSectionAndRerunScoringPreview:()=>{e(t0.y.setWatchlistPropertyScoringData({totalScoredProperties:0,userPreferenceFiltered:0,totalFiltered:0,shortlistedCount:0})),r(!1),o({isTotalScoredPropertiesLoaded:!1,isUserPreferenceFilteredLoaded:!1,isTotalFilteredLoaded:!1,isShortlistedCountLoaded:!1,isBudgetDistributionLoaded:!1,isNewPropertiesLoaded:!1}),l(0),s&&j(s)},moveToTheNextSubsection:()=>{let e=a+1;as[e]&&l(e)}}):null}},ai={[tv.UF.investmentStrategy]:ed,[tv.UF.availableBudget]:ee,[tv.UF.authenticate]:tH,[tv.UF.confirmOtp]:t$},ar={...eo,...X,...eV,developmentStatus:[],propertyType:[],bedroomPreference:[],additionalPropertyPreferencesOptions:[],...tY,otp:""};function ac(e){let{activeStepIndex:t=null,selectedStepsCount:a=1,hasError:l=!1,onStepClick:s}=e,n=x.useMemo(()=>Array.from({length:a}).map((e,a)=>({key:a,isVisited:null!==t&&a<=t})),[a,t]);return(0,v.jsx)("div",{className:"stepped-progress-bar",children:n.map(e=>{let{key:t,isVisited:a}=e;return(0,v.jsx)("div",{className:"stepped-progress-bar__item ".concat(a?"visited":""," ").concat(l?"error":""),onClick:()=>{a&&s&&s(t)},style:{pointerEvents:a?"auto":"none",cursor:a?"pointer":"default"}},t)})})}function ao(e){let{activeStepKey:t,isMapModeActive:a}=e,{activeStepIndex:l,selectedSteps:s,isPreviousPermitted:n,surveyError:i,moveToPreviousStep:r,setActiveStepKey:c}=P(),o=t===tv.UF.preferredLocations&&a?"map-mode-styles":"";return(0,v.jsxs)(x.Fragment,{children:[(0,v.jsx)("div",{className:"survey-header-underlay ".concat(o)}),(0,v.jsxs)("div",{className:"survey-header-wrapper ".concat(o),children:[(0,v.jsxs)("div",{className:"survey-header",children:[(0,v.jsx)("div",{className:"header-content",children:n&&(0,v.jsx)("button",{type:"button",className:"back-btn",onClick:r,children:"Back"})}),(0,v.jsx)("div",{className:"header-brand-container",children:(0,v.jsx)(tW.default,{href:"/",children:(0,v.jsx)(ep.default,{src:a?"/images/logo-vectors/logo-white.svg":"/images/logo-vectors/logo.svg",alt:"Prop-AI",fill:!0,className:"header-brand"})})}),(0,v.jsx)("div",{className:"header-content"})]}),(0,v.jsxs)("div",{className:"progress-bar-wrapper",children:[(0,v.jsx)("div",{className:"content",children:n&&(0,v.jsx)("button",{type:"button",className:"back-btn",onClick:r})}),(0,v.jsx)("div",{className:"content",children:(0,v.jsx)(ac,{selectedStepsCount:s.length,activeStepIndex:l,hasError:!!i,onStepClick:e=>{null!==l&&e<l&&c(s[e])}})}),(0,v.jsx)("div",{className:"content"})]})]})]})}a(25014),a(35283);var ad=a(53866),am=a(96602);function au(e){let{children:t,visible:a,onClose:l}=e;return(0,v.jsx)(L.M,{children:a&&(0,v.jsxs)(k.E.div,{initial:{opacity:0,y:"-100%"},animate:{opacity:1,y:"0%"},exit:{opacity:0,y:"-100%"},className:"survey-step-error",children:[(0,v.jsx)("div",{className:"survey-step-error__content",children:t}),(0,v.jsx)("div",{className:"survey-step-error__action",children:(0,v.jsx)(S.J,{icon:"/icons/close-white.svg",size:24,alt:"x",onClick:l})})]})})}function ap(){let e=(0,j.useSearchParams)(),t=e.get("orderPreference"),a=(0,g.I0)(),l=(0,j.useRouter)(),s=x.createRef(),{activeStepIndex:n,isMapActive:i,selectedSteps:r,activeStepKey:c,surveyError:o,setSurveyError:d,moveToNextStep:m,submitOnboardingSurvey:u}=P(),[p]=(0,eP.Jh)(),[h]=(0,eP.Yu)(),[f]=(0,eP.BR)(),y=ai[c]||void 0,_=an[c]||null,w=async t=>{var l,s,n,i,r;let o=!1,{authAction:m,residence:u,email:v,otp:x,first_name:j,last_name:g,mobile:b,buying_timeline:N,citizenship:y,property_owner:P}=t,_=c===tv.UF.authenticate&&m===tv.sS.login,w=c===tv.UF.authenticate&&m===tv.sS.register,S=c===tv.UF.confirmOtp;if(_){let e=await h({email:v});if(null==e?void 0:e.error){if(null==e?void 0:null===(l=e.error)||void 0===l?void 0:l.data){let{message:t}=null===(s=e.error)||void 0===s?void 0:s.data;d(t||"Email validation failed. Please try again.")}}else(0,tG.$j)({action:"SIGNIN",category:"ONBOARDING_SURVEY_V2",label:"Request OTP"}),o=!0}if(w){let t=(0,tG.On)(e),a={firstName:j,lastName:g,email:v,mobile:b,planningToBuyIn:N,citizenship:y||void 0,ownsRealEstate:P===T.cT.isNotOwn,interestedCities:[{value:ad.zq,isCustom:!1}],countryOfResidence:u,sourcePage:z.jY.onboardingJourney,utmParams:t},l=await p(a);if(!(null==l?void 0:l.error)){let e=null==l?void 0:null===(n=l.data)||void 0===n?void 0:n.message,t=(0,E.MV)(e);"success"===e?((0,tG.$j)({action:"WAITINGLIST",category:"ONBOARDING_SURVEY_V2",label:"Early Access Form Submitted"}),o=!0):d(t)}}if(S){let e=await f({otp:x,email:v});(null==e?void 0:e.error)?d((null==e?void 0:null===(r=e.error)||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.message)||"Unable to sign in. Please try again."):((0,tG.$j)({action:"SIGNIN",category:"ONBOARDING_SURVEY_V2",label:"Successful Signin"}),localStorage.setItem("accToken",null==e?void 0:e.data.accToken),a(am.Y.setUserDetails(null==e?void 0:e.data)),o=!0)}return o},S=async e=>{let t=n===r.length-1;if(c===tv.UF.authenticate||c===tv.UF.confirmOtp){let t=c===tv.UF.confirmOtp;if(!await w(e))return;t?(await u(e),l.push("/app/dashboard")):m()}else t?(await u(e),l.push("/app/dashboard")):m()};x.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[n]);let C=t&&Object.keys(tv.HP).includes(t)?t:void 0;return(0,v.jsx)("div",{ref:s,className:"prop-ai-survey-page",children:(0,v.jsxs)(N.l0,{initialValues:{...ar,surveySubPath:C},validationSchema:y,onSubmit:S,enableReinitialize:!0,formClassName:"survey-form",children:[(0,v.jsx)(ao,{activeStepKey:c,isMapModeActive:i}),(0,v.jsx)(au,{visible:!!o,onClose:()=>{d(null)},children:o?b()(o):null}),!!_&&(0,v.jsx)(_,{})]})})}a(62495),a(97218)},51320:function(e,t,a){"use strict";a.d(t,{Z:function(){return m},default:function(){return u}});var l=a(57437),s=a(2265),n=a(33775),i=a(99376),r=a(60097),c=a(11509);let o=Object.values(n.UF),d={allSteps:[],dubaiDropdownLocations:[],isDubaiDropdownLocationsLoading:!1,topMasterCommunities:[],isTopMasterCommunitiesLoading:!1,selectedSteps:[],activeStepIndex:null,isNextPermitted:!1,isPreviousPermitted:!1,surveyError:null,setSurveyError:()=>{},activeStepKey:n.UF.investmentStrategy,setActiveStepKey:()=>{},moveToNextStep:()=>{},moveToPreviousStep:()=>{},isMapActive:!1,setIsMapActive:()=>{},isMapDisabled:!1,setIsMapDisabled:()=>{},fetchTopMasterCommunitiesForSurveyData:async()=>{},submitOnboardingSurvey:async()=>{}},m=s.createContext(d);function u(e){let{children:t}=e,a=(0,c.b)(),u=(0,i.useSearchParams)().get("orderPreference"),[p,h]=s.useState(d.surveyError),[v,x]=s.useState(d.activeStepKey),[j,g]=s.useState(d.isMapActive),[f,b]=s.useState(d.isMapDisabled),{data:N,isLoading:y}=(0,r.En)({}),[P,{data:_,isLoading:w}]=(0,r.UR)(),[S]=(0,r.vt)(),C=s.useMemo(()=>{let e=o.slice();if(a){let t={[n.UF.authenticate]:!0,[n.UF.confirmOtp]:!0};e=e.filter(e=>!t[e])}if(u===n.HP.locationFirst){x(n.UF.preferredLocations),g(!0);let t=e.indexOf(n.UF.preferredLocations);t>-1&&(e.splice(t,1),e.unshift(n.UF.preferredLocations))}return e},[u,a]),L=async e=>{await P({userData:e})},k=async e=>{e&&await S({userData:e})},A=C.findIndex(e=>e===v),T=A>-1?A:null,D=null!==T&&C.length>0&&!!C[T+1],Z=null!==T&&C.length>0&&!!C[T-1];return(0,l.jsx)(m.Provider,{value:{allSteps:o,dubaiDropdownLocations:N||[],isDubaiDropdownLocationsLoading:y,topMasterCommunities:_||[],isTopMasterCommunitiesLoading:w,selectedSteps:C,activeStepIndex:T,isNextPermitted:D,isPreviousPermitted:Z,surveyError:p,activeStepKey:v,setSurveyError:h,setActiveStepKey:x,moveToNextStep:()=>{null!==A&&D&&x(C[A+1])},moveToPreviousStep:()=>{null!==A&&Z&&x(C[A-1])},isMapActive:j,setIsMapActive:g,isMapDisabled:f,setIsMapDisabled:b,fetchTopMasterCommunitiesForSurveyData:L,submitOnboardingSurvey:k},children:t})}},54414:function(e,t,a){"use strict";a.d(t,{Fc:function(){return n},SV:function(){return o},cz:function(){return c},g0:function(){return i},jP:function(){return r}});var l=a(33775),s=a(41317);let n=e=>{let t=0,a=0,l=0;for(let s of e)for(let e=0;e<s.length-1;e++){let[n,i]=s[e],[r,c]=s[e+1],o=n*c-r*i;t+=o,a+=(n+r)*o,l+=(i+c)*o}return[a/=3*t,l/=3*t]},i=(e,t)=>{var a,s,n;return null!==(a=e.properties)&&void 0!==a&&!!a.isPriceChangeConfidenceInsufficient&&t===l.WI.priceChangeYoy||null!==(s=e.properties)&&void 0!==s&&!!s.isRentChangeConfidenceInsufficient&&t===l.WI.rentChangeYoy||null!==(n=e.properties)&&void 0!==n&&!!n.isRentalYieldConfidenceInsufficient&&t===l.WI.rentalYield},r=(e,t)=>[l.WI.numberOfListings,l.WI.totalSalesP12m,l.WI.totalRentContractsP12m].includes(t)?e.toLocaleString():[l.WI.pricePerSqftP6m,l.WI.salesPriceMedianP6m,l.WI.serviceChargesSqft].includes(t)?(0,s.AZ)(e,1):(0,s.XX)(e),c=e=>[l.WI.serviceChargesSqft,l.WI.pricePerSqftP6m,l.WI.salesPriceMedianP6m].includes(e)?" AED":[l.WI.numberOfListings,l.WI.totalSalesP12m,l.WI.totalRentContractsP12m].includes(e)?"":" %",o=()=>"".concat(window.location.protocol,"//").concat(window.location.host)},1890:function(e,t,a){"use strict";a.d(t,{_I:function(){return c},jy:function(){return r}});let l={orderPreference:"orderPreference",activeLayer:"al",expanded:"exp",metric:"m",detailedTab:"dt",filterType:"ft",filterStatus:"fs",filterDeveloper:"fd",propertyType:"pt",beds:"b",status:"s",type:"typ",project:"t-pr",masterProject:"t-mp",area:"t-ar"},s={activeLayer:{projects:"p","master-projects":"mp",areas:"a"},expanded:{true:"t",false:"f"},metric:{pricePerSqftP6m:"pps",salesPriceMedianP6m:"spm",priceChangeYoy:"pcy",rentalYield:"ry",rentChangeYoy:"rcy",serviceChargesSqft:"scs",numberOfListings:"nl",fmvSpread:"fs",totalSalesP12m:"ts",totalRentContractsP12m:"trc"},detailedTab:{"Key Metrics":"km",Trends:"tr",Projects:"pr"},type:{project:"p",masterProject:"mp",area:"a"}},n=Object.fromEntries(Object.entries(l).map(e=>{let[t,a]=e;return[a,t]})),i={activeLayer:Object.fromEntries(Object.entries(s.activeLayer).map(e=>{let[t,a]=e;return[a,t]})),expanded:Object.fromEntries(Object.entries(s.expanded).map(e=>{let[t,a]=e;return[a,t]})),metric:Object.fromEntries(Object.entries(s.metric).map(e=>{let[t,a]=e;return[a,t]})),detailedTab:Object.fromEntries(Object.entries(s.detailedTab).map(e=>{let[t,a]=e;return[a,t]})),type:Object.fromEntries(Object.entries(s.type).map(e=>{let[t,a]=e;return[a,t]}))};function r(e){let t={};for(let[n,i]of Object.entries(e)){var a;if(null==i)continue;let e=l[n]||n,r="boolean"==typeof i?String(i):i,c=(a=s[n])&&r in a?a[r]:r;t[e]=c}return t}function c(e){let t={};return e.forEach((e,a)=>{let l=n[a]||a,s=i[l],r=s&&e in s?s[e]:e;t[l]="expanded"===l?"true"===r?"true":"false":r}),t}},33775:function(e,t,a){"use strict";var l,s,n,i,r,c,o,d,m,u,p;a.d(t,{HP:function(){return s},UF:function(){return l},WI:function(){return r},Zn:function(){return i},sS:function(){return n},uS:function(){return c}}),(o=l||(l={})).investmentStrategy="investmentStrategy",o.availableBudget="availableBudget",o.preferredLocations="preferredLocations",o.propertyPreferences="propertyPreferences",o.scoreAndLoadProperties="scoreAndLoadProperties",o.authenticate="authenticate",o.confirmOtp="confirmOtp",(s||(s={})).locationFirst="locationFirst",(d=n||(n={})).login="LOGIN",d.register="REGISTER",(m=i||(i={})).existing="FINISHED",m.offPlan="ACTIVE",m.pending="PENDING",m.notStarted="NOT_STARTED",(u=r||(r={})).rentalYield="rentalYield",u.priceChangeYoy="priceChangeYoy",u.rentChangeYoy="rentChangeYoy",u.fmvSpread="fmvSpread",u.serviceChargesSqft="serviceChargesSqft",u.numberOfListings="numberOfListings",u.salesPriceMedianP6m="salesPriceMedianP6m",u.pricePerSqftP6m="pricePerSqftP6m",u.totalRentContractsP12m="totalRentContractsP12m",u.totalSalesP12m="totalSalesP12m",(p=c||(c={})).apartment="Apartment",p.villa="Villa"},37893:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var l=a(57437);a(2265);var s=a(10279);function n(e){let{wrapperClassName:t="",loadingText:a="Loading..."}=e;return(0,l.jsx)("div",{className:"in-page-activity-indicator ".concat(t),children:(0,l.jsxs)("div",{className:"indicator-content",children:[(0,l.jsx)(s.default,{variant:"primary"}),(0,l.jsx)("span",{className:"loading-text",children:a})]})})}a(50617)},20347:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var l=a(57437),s=a(2265),n=a(63433),i=a(23891);function r(e){let{from:t,to:a,decimals:r=1,delaySeconds:c=0,durationSeconds:o=1,className:d,animateOnFocus:m=!1,formatValue:u}=e,p=s.useRef(null),h=(0,n.Y)(p,{once:!0});s.useEffect(()=>{let e=p.current,l=(0,i.j)(t,a,{duration:o,delay:c,onUpdate:t=>{e&&(m&&!h&&(e.textContent=u?u(t):t.toFixed(r)),m||(e.textContent=u?u(t):t.toFixed(r)))}});return()=>{l&&l.stop()}},[t,a,r,o,c,u,h]);let v=u?u(t):t.toFixed(r);return(0,l.jsx)("div",{className:d,ref:p,children:v})}},41842:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var l=a(57437),s=a(2265),n=a(24076),i=a(99376),r=a(61335),c=a(11509),o=a(41160);a(61034);var d=a(53866),m=a(29806);let u=["Immediate access to real estate data in more than 200 cities","Use our copilot to get AI-powered property recommendations","Create your own analysis with our investment simulator instantly","Sign-up now to save over 300 hours buying your next property"];function p(e){let{delaySeconds:t,children:a,actions:p=[],containerClassName:h="",content:v=u}=e,x=(0,i.usePathname)(),j=(0,i.useRouter)(),g=(0,c.b)(),{showModal:f}=(0,o.d)(),[b,N]=s.useState(void 0===t&&!g),y=x==="/explore-cities/".concat(d.zq);return s.useEffect(()=>{void 0!==t&&setTimeout(()=>{N(!0)},1e3*t)},[]),(0,l.jsxs)("div",{className:"authentication-required-wrapped-content".concat(!g&&b?" active":""),children:[a,(0,l.jsx)("div",{className:"authentication-required-overlay",children:(0,l.jsx)("div",{className:"authentication-required-container ".concat(h),children:(0,l.jsx)("div",{className:"p-3",children:(0,l.jsxs)("div",{className:"authentication-required",children:[(0,l.jsxs)("div",{className:"authentication-required__content",children:[(0,l.jsxs)("div",{className:"authentication-required__title",children:["Get a ",(0,l.jsx)("strong",{children:"PROP-AI account"})," to find better properties with AI"]}),(0,l.jsx)("div",{className:"authentication-required__body",children:(0,l.jsx)("div",{className:"ps-3 ps-md-4 ps-xl-5",children:v.map((e,t)=>(0,l.jsxs)("div",{className:"authentication-required__body-item",children:[(0,l.jsx)(r.J,{icon:"/icons/white-tick-circle-green.svg",alt:"",size:24}),e]},t))})}),(0,l.jsxs)("div",{className:"authentication-required__actions",children:[(0,l.jsx)(n.Z,{className:"px-4 py-3",onClick:()=>{if(y){let e=new URLSearchParams;e.set("surveyAction",m.h.InitiateDubaiSurvey),j.push("/survey?".concat(e.toString()))}else f({modalType:"SignupModal"})},children:y?"Start Search in Dubai":"Sign up"}),p.map((e,t)=>(0,l.jsx)(n.Z,{type:"button",variant:e.variant,className:"px-4 py-3",onClick:e.onClick,children:e.title},t))]})]}),(0,l.jsxs)("div",{className:"authentication-required__footer",children:["Already have an account?\xa0",(0,l.jsx)(n.Z,{variant:"link",className:"p-0 text-primary text-decoration-underline",onClick:()=>{f({modalType:"SigninModal"})},children:"Sign In"})]})]})})})})]})}},31034:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var l=a(57437),s=a(2265);function n(e){let t,{seconds:a,onEnd:n,className:i}=e,[r,c]=s.useState(a),o=()=>{t=setInterval(()=>{r>0&&c(e=>e-1)},1e3)},d=s.useCallback(()=>{clearInterval(t)},[t]);s.useEffect(()=>(o(),()=>{d()}),[]),s.useEffect(()=>{r<=0&&n&&n()},[r]);let m="0:".concat(r<10?"0".concat(r):r);return(0,l.jsx)("div",{className:i,children:m})}},74292:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var l=a(57437);function s(){return(0,l.jsx)("span",{className:"dirham-symbol",children:"AED"})}a(2265),a(81014)},46650:function(e,t,a){"use strict";a.d(t,{W:function(){return s.Z},Z:function(){return r}});var l=a(57437),s=a(74292),n=a(74470),i=a(41317);function r(e){let{currencyStr:t,decimals:a=2,value:r,hideCurrencySymbol:c,enableSuffix:o=!1,options:d={}}=e,m="AED"===t,u=!!r&&r<0,p=(0,n.uW)(t),h=null!==r?(0,n.RE)(Math.abs(r),!0,t,!1,{maximumFractionDigits:a,minimumFractionDigits:a,...d}):null;return o&&null!==r&&(h=(0,i.AZ)(r,a)),(0,l.jsxs)("span",{children:[u&&(0,l.jsx)("span",{children:"-"}),m&&!c?(0,l.jsxs)("span",{children:[(0,l.jsx)(s.Z,{})," "]}):null,m||c?null:"".concat(p," "),h]})}a(2265)},28730:function(e,t,a){"use strict";a.d(t,{Z:function(){return r},k:function(){return s}});var l,s,n=a(57437);a(2265);var i=a(46650);function r(e){let{value:t=0,type:a,enableColors:l=!1,isBold:s=!1,className:r="",currencySymbol:c="USD",showCurrencyWording:o=!1,removeMathematicalSign:d=!1,currencyFormatOptions:m,disableParenthesisOnNegativeCurrency:u=!1}=e,p=(()=>{let e=[];return l&&(t>=0?e.push("text-success"):e.push("text-danger")),s&&e.push("fw-semibold"),r&&e.push(r),e.join(" ")})(),h=(()=>{if(null===t||isNaN(t)||void 0===t)return"N/A";let e=!u&&t<0,l=t.toString();if("currency"===a&&(l=(0,n.jsxs)("span",{children:[e&&(0,n.jsx)("span",{children:"("}),(0,n.jsx)(i.Z,{currencyStr:c,value:e?Math.abs(t):t,hideCurrencySymbol:!o,options:m}),o?null:(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(i.Z,{currencyStr:c,value:null})]}),e&&(0,n.jsx)("span",{children:")"})]})),"percentage"===a){let e="";t>=0?e="+":t<0&&(e="-"),d&&(e="");let a=Math.abs(Number(t)).toFixed(1);l="".concat(e).concat(a,"%")}return"fixed"===a&&(l=(0,n.jsxs)("span",{children:[e&&(0,n.jsx)("span",{children:"("}),Math.abs(t).toLocaleString("en-US",{...m,minimumFractionDigits:0,maximumFractionDigits:0}),e&&(0,n.jsx)("span",{children:")"})]})),l})();return(0,n.jsx)("div",{className:p,children:h})}(l=s||(s={})).currency="currency",l.percentage="percentage",l.fixed="fixed"},4726:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var l=a(57437),s=a(2265),n=a(86757),i=a.n(n);function r(e){let{activeTabIdx:t,onChangeTab:a,tabs:n=[],className:r="",resolveOptionLabel:c,shouldFocusTabOnMount:o=!1}=e,d=s.createRef(),m=e=>{a&&a(e)},u=()=>{if(o){let e=d.current;if(e&&n.length){let a=e.children.item(t);if(a&&a.offsetLeft>0){let t=a.offsetLeft+a.clientWidth/2-e.clientWidth/2-15;e.scrollTo({left:t,behavior:"smooth"})}}}};return s.useEffect(()=>{u()},[]),(0,l.jsx)("div",{ref:d,className:"section-tabs ".concat(r),children:n.map((e,a)=>(0,l.jsx)("button",{type:"button",className:"section-tab".concat(t===a?" active":""),onClick:()=>m(a),children:i()(c)?c(e):e},a))})}a(89189)},74869:function(e,t,a){"use strict";a.d(t,{Z:function(){return l.Z}});var l=a(4726)},682:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var l=a(57437);a(2265);var s=a(32491),n=a(62058),i=a(18848);function r(e){let{content:t,placement:a="auto",children:r,wrapperClassName:c}=e;if(!r)return null;if(!t)return r;let o="string"==typeof t;return(0,l.jsx)(n.Z,{delay:{show:250,hide:0},placement:a,overlay:e=>o?(0,l.jsx)(s.Z,{...e,children:(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:i.Z.sanitize(t)}})}):(0,l.jsx)(s.Z,{...e,children:t}),children:(0,l.jsx)("div",{className:"tooltip-target-wrapper ".concat(c),children:r})})}a(82594)},3552:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var l=a(57437),s=a(2265),n=a(71096),i=a.n(n),r=a(50309),c=a.n(r),o=a(57685),d=a.n(o),m=a(74470),u=a(41317);a(67194);var p=a(46650);function h(e){let{children:t}=e;return(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsx)("div",{className:"transactions-table",children:t})})}h.Row=function(e){let{isHeader:t=!1,children:a}=e;return(0,l.jsx)("div",{className:"transactions-table-row ".concat(t?"header":""),children:a})},h.Cell=function(e){let{children:t}=e;return(0,l.jsx)("div",{className:"transactions-table-item",children:(0,l.jsx)("div",{className:"item-content",children:t})})},h.CellNumber=function(e){let{value:t,subtitle:a}=e,n=(0,m.j4)(t);return"number"==typeof t&&(n=t.toLocaleString()),(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)("div",{className:"title",children:n}),a&&(0,l.jsx)("div",{className:"subtitle",children:a})]})},h.CellDate=function(e){let{value:t}=e,a=t?i()(t).format("DD MMM"):"",n=t?i()(t).format("YYYY"):"";return(0,l.jsxs)(s.Fragment,{children:[a&&(0,l.jsx)("div",{className:"title",children:a}),n&&(0,l.jsx)("div",{className:"subtitle",children:n})]})},h.CellProperty=function(e){let{bedrooms:t,developmentStatus:a,type:n}=e,i=(0,u.cD)(t,"BR");return(0,l.jsxs)(s.Fragment,{children:[!!n&&(0,l.jsxs)("div",{className:"title d-flex align-items-center gap-2 flex-wrap",children:[(0,l.jsxs)("div",{children:[n,","]}),i]}),!!a&&(0,l.jsx)("div",{className:"subtitle",children:a})]})},h.CellString=function(e){let{value:t,subtitle:a,capitalizeValue:n=!1,capitalizeSubtitle:i=!1}=e;return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)("div",{className:"title",children:null===t?" - ":"string"==typeof t&&n?d()(c()(t)):t}),(0,l.jsx)("div",{className:"subtitle",children:a?"string"==typeof a&&i?d()(c()(a)):a:" - "})]})},h.CellCurrency=function(e){let{value:t,subtitle:a,currency:n="AED"}=e;return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)("div",{className:"title",children:(0,l.jsx)(p.Z,{currencyStr:n,value:null!=t?t:null,decimals:0})}),a&&(0,l.jsx)("div",{className:"subtitle",children:a})]})};var v=h},19153:function(e,t,a){"use strict";a.d(t,{HL:function(){return c},Rv:function(){return d},Ty:function(){return o},ZP:function(){return u},sT:function(){return r}});var l,s,n,i,r,c,o,d,m=a(57437);function u(e){let{variant:t="variant-body",color:a="variant-body",className:l="",children:s,weight:n,lineHeight:i="lh-1",spacing:r="spacing-1"}=e;return(0,m.jsx)("div",{className:"prop-ai-typography ".concat(t," ").concat(a," ").concat(i," ").concat(r," ").concat(l),style:{fontWeight:n},children:s})}a(2265),a(71451),(l=r||(r={})).h0="variant-h0",l.h1="variant-h1",l.h2="variant-h2",l.h3="variant-h3",l.h4="variant-h4",l.h5="variant-h5",l.body="variant-body",l.body2="variant-body-2",l.body3="variant-body-3",l.bodySmall="variant-body-sm",l.bodyExtraSmall="variant-body-xs",l.bodyHeader="variant-body-header",(s=c||(c={})).primary="primary",s.success="success",s.warning="warning",s.danger="danger",s.greyDark="color-grey-dark",s.body="variant-body",s.error="error",s.pureWhite="color-pure-white",(n=o||(o={})).lh1="lh-1",n.lh2="lh-2",n.lh3="lh-3",n.lh4="lh-4",n.lh5="lh-5",n.lh6="lh-6",(i=d||(d={})).spacing1="spacing-1",i.spacing2="spacing-2"},93995:function(e,t,a){"use strict";a.d(t,{HL:function(){return l.HL},ZP:function(){return l.ZP},sT:function(){return l.sT}});var l=a(19153)},88056:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var l=a(57437);a(2265);var s=a(77314),n=a(5095),i=a(58130),r=a(36596);function c(e){let{name:t,numInputs:a=6,size:c=3}=e,[o,d,m]=(0,s.U$)(t),u=d.touched&&d.error,p=a*c+.5*(a-1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{renderInput:e=>(0,l.jsx)("input",{...e,className:"formfield-root formfield-otp".concat(u?" formfield-invalid":"")}),onChange:e=>{m.setValue(e)},value:o.value,numInputs:a,shouldAutoFocus:!0,inputStyle:{width:"".concat(c,"rem"),height:"".concat(c,"rem")},containerStyle:{justifyContent:"center"},inputType:"number"}),(0,l.jsx)("div",{style:{width:"".concat(p,"rem")},className:"mx-auto",children:(0,l.jsx)("div",{className:"formfield-error",children:(0,l.jsx)(n.M,{children:u&&(0,l.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:d.error})})})})]})}a(75222)},98708:function(e,t,a){"use strict";a.d(t,{c:function(){return l}});let l="https://prop-ai-web-app.s3.me-central-1.amazonaws.com"},11509:function(e,t,a){"use strict";a.d(t,{b:function(){return r},x:function(){return c}});var l=a(2265),s=a(50452),n=a(49567),i=a(60097);let r=()=>{let{isLoggedIn:e}=(0,n.v9)(e=>e.auth),[t,a]=l.useState(!1);return l.useEffect(()=>{localStorage.getItem(s.LI)?a(!0):a(!1)},[e]),t},c=()=>{let e=null,t=r(),{data:a}=(0,i.UV)({},{skip:!t});return a&&(e=a),e}},41160:function(e,t,a){"use strict";a.d(t,{d:function(){return n}});var l=a(2265),s=a(86982);let n=()=>{let{showModal:e,hideModal:t,hideAllModals:a,modalTypes:n}=(0,l.useContext)(s.t);return{showModal:e,hideModal:t,hideAllModals:a,modalTypes:n}}},46496:function(e,t,a){"use strict";a.d(t,{s:function(){return s}});var l=a(2265);let s=()=>{let[e,t]=l.useState(!1);return l.useEffect(()=>{let e=()=>{t(window.innerWidth<=768)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}},86982:function(e,t,a){"use strict";a.d(t,{Z:function(){return i},t:function(){return n}});var l=a(57437),s=a(2265);let n=s.createContext({modalTypes:[],modalProps:{},showModal:()=>{},hideModal:()=>{},hideAllModals:()=>{}});function i(e){let{children:t}=e,[a,i]=s.useState([]),[r,c]=s.useState({});return(0,l.jsx)(n.Provider,{value:{modalTypes:a,modalProps:r,showModal:e=>{let{modalType:t,modalProps:a}=e;c(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,[t]:a}}),i(e=>[...e,t])},hideModal:()=>{i(e=>{let t=[...e];return t.pop(),t})},hideAllModals:()=>{c({}),i([])}},children:t})}},96602:function(e,t,a){"use strict";a.d(t,{Y:function(){return s},d:function(){return n}});let l=(0,a(14506).oM)({name:"auth",initialState:{firstWatchlistCreated:!1,isLoggedIn:!1},reducers:{setUserDetails:(e,t)=>{let{payload:a}=t;e.firstWatchlistCreated=a.firstWatchlistCreated,e.isLoggedIn=!0}}}),s=l.actions,n=l.reducer},78786:function(e,t,a){"use strict";a.d(t,{S:function(){return r},y:function(){return i}});var l=a(14506);let s={watchlistCities:[],newPropertyId:null,propertyScoringData:{total_relevant_count:0,total_analyzed_count:0,totalScoredProperties:0,userPreferenceFiltered:0,totalFiltered:0,shortlistedCount:0,properties:[],statistics:{analyzed_count:0,relevant_count:0,shortlisted_count:0}}},n=(0,l.oM)({name:"watchlist",initialState:s,reducers:{setWatchlistCities:(e,t)=>{let{payload:a}=t;a.length&&(e.watchlistCities=a)},setWatchlistPropertyScoringData:(e,t)=>{let{payload:a}=t;e.propertyScoringData={...e.propertyScoringData,...a}},setEvaluatedPropertySummary:(e,t)=>{let{payload:a}=t;e.evaluatedPropertySummary=a},setNewPropertyId:(e,t)=>{let{payload:a}=t;e.newPropertyId=a},resetAllData:()=>s}}),i=n.actions,r=n.reducer},22201:function(e,t,a){"use strict";a.d(t,{$j:function(){return n},MB:function(){return s},On:function(){return i}});var l=a(28898);let s=()=>{let e="G-TWD0DR247B";e&&l.ZP.initialize(e)},n=e=>{l.ZP.event({...e})},i=e=>{let t={utm_campaign:"",utm_medium:"",utm_source:"",utm_term:"",utm_content:""};return e.has("utm_campaign")&&(t.utm_campaign=e.get("utm_campaign")||""),e.has("utm_medium")&&(t.utm_medium=e.get("utm_medium")||""),e.has("utm_source")&&(t.utm_source=e.get("utm_source")||""),e.has("utm_term")&&(t.utm_term=e.get("utm_term")||""),e.has("utm_content")&&(t.utm_content=e.get("utm_content")||""),t}},53866:function(e,t,a){"use strict";a.d(t,{BF:function(){return o},DQ:function(){return m},KB:function(){return u},Qo:function(){return c},gh:function(){return d},zq:function(){return p}});var l=a(25614),s=a.n(l),n=a(28431),i=a.n(n),r=a(98708);let c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return"".concat(r.c,"/city_images/").concat(e,".jpg")},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return s()(e)&&(t=e.map(e=>({...e,image:{external:!1,url:c(e.city_id)}})).sort((e,t)=>{let{ranking:a}=e,{ranking:l}=t;return Number(a)-Number(l)})),t},d=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0;e=i()(t,[a,"ranking"],[l,"asc"]);let s=0;e.slice(0,20).forEach((t,l)=>{let n=e[l+1],i=t[a];if(n){let e=n[a];null!==i&&i===e&&(s+=1)}});let n=20+s;return e.slice(0,n)},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("Yes")?"Yes":"No"},u=(e,t)=>{let a={country1:[],country2:[],country3:[]};if(e.length){let l=e[0];l&&(a.country1=t.map(e=>({year:e.year,value:e[l]})));let s=e[1];s&&(a.country2=t.map(e=>({year:e.year,value:e[s]})));let n=e[2];n&&(a.country3=t.map(e=>({year:e.year,value:e[n]})))}return a},p="1133A"},62495:function(){},78846:function(){},51190:function(){},18932:function(){},49469:function(){},36997:function(){},55226:function(){},14923:function(){},23613:function(){},40595:function(){},90942:function(){},48472:function(){},25014:function(){},56123:function(){},75982:function(){},35283:function(){},97218:function(){},40899:function(){},85501:function(){},35813:function(){},50715:function(){},27625:function(){},29936:function(){},93959:function(){},36429:function(){},94822:function(){},40894:function(){},61213:function(){},50617:function(){},61034:function(){},1881:function(){},51953:function(){},93600:function(){},81014:function(){},18728:function(){},89189:function(){},22098:function(){},82594:function(){},67194:function(){},71451:function(){},4770:function(){},21939:function(){},83249:function(e){"use strict";e.exports=JSON.parse('[{"value":"0-3","label":"0-3 months"},{"value":"3-6","label":"3-6 months "},{"value":"6-12","label":"6-12 months"},{"value":"12-24","label":"12-24 months"},{"value":"not sure","label":"Not sure "},{"value":"planning to sell","label":"Planning to sell"}]')}},function(e){e.O(0,[54,1126,1723,9954,748,3836,5796,1773,2938,9510,7726,9834,3518,2033,5652,1442,8977,6748,4598,2205,7508,3742,1866,7674,5878,429,7256,6979,3448,4576,6406,3542,4422,7916,8642,7185,7555,1760,7668,920,4436,97,1245,2259,2971,2117,1744],function(){return e(e.s=2035)}),_N_E=e.O()}]);